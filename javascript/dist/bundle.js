(function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var u=typeof require=="function"&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return r(i?i:t)},h,h.exports,t,e,i,n)}return i[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<n.length;s++)r(n[s]);return r})({1:[function(t,e,i){(function(e){var i=t("./shim");e(i.Backbone,i.L)})(function(e,i){"use strict";var n=t("nzta-map-components"),r=t("./constants"),o=t("./components/map/mapView"),s=t("./components/menu/menuView"),a=t("./components/popup/popupView"),u=t("./components/user-controls/userControlsView");var l=new e.Marionette.Application;var h=new e.Wreqr.EventAggregator;var c=i.map("map").setView([-40.866119,174.14378],5);i.Icon.Default.imagePath="/silverstripe-backbone/images";i.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,zIndex:10}).addTo(c);var f=new o({vent:h,map:c});l.addRegions({menuRegion:"#menu-region",popupRegion:"#popup-region",userControlsRegion:"#user-controls-region"});l.popupRegion.show(new a({vent:h}));l.userControlsRegion.show(new u({vent:h}));l.router=n.router;l.on("start",function(){if(e.history){e.history.start({pushState:true,root:r.ROOT_PATH})}});l.start()})},{"./components/map/mapView":4,"./components/menu/menuView":8,"./components/popup/popupView":12,"./components/user-controls/userControlsView":13,"./constants":14,"./shim":16,"nzta-map-components":31}],2:[function(t,e,i){"use strict";var n=t("nzta-map-components");var r=n.GeoJsonCollection.extend({model:n.GeoJsonModel,url:"/rest/cameras"});e.exports=r},{"nzta-map-components":31}],3:[function(t,e,i){"use strict";var n=t("underscore"),r=t("jquery"),o=t("nzta-map-components"),s=t("./camerasCollection"),a=t("./regionsCollection"),u=t("./roadEventsCollection"),l=t("../../constants");var h=o.MapModel.extend({defaults:{cameras:new s,regions:new a,events:new u},initialize:function(){this._startPolling(l.FETCH_INTERVAL)},_doFetch:function(){var t=this;r.when(this.get("cameras").fetch(),this.get("regions").fetch(),this.get("events").fetch()).done(function(e,i,n){t.trigger("allDataFetched",{cameras:t.get("cameras"),regions:t.get("regions"),events:t.get("events")})})}});e.exports=h},{"../../constants":14,"./camerasCollection":2,"./regionsCollection":5,"./roadEventsCollection":6,jquery:28,"nzta-map-components":31,underscore:50}],4:[function(t,e,i){"use strict";var n=t("backbone"),r=t("underscore"),o=t("jquery"),s=t("nzta-map-components"),a=t("./mapModel"),u=t("../../constants"),l=t("../../mixins/eventsMixin");var h=s.MapView.extend({el:"#map",template:false,initialize:function(){var t=this;s.MapView.prototype.initialize.call(this);this.model=new a;this.listenTo(this.model,"allDataFetched",function(t){this.options.vent.trigger("map.update.all",t)},this)},_onRoute:function(t,e){switch(e[0]){case null:this._handleRootNavigate();break;default:this._handleFeatureNavigate(e[0],e[1]);break}},_onMapData:function(t){r.each(t,function(t,e){var i=r.findWhere(this.geoJsonLayers,{id:e});if(i===void 0||i!==void 0&&i.markerClusterGroup!==null){this._addMapLayer(e)}},this)},_handleRootNavigate:function(){this._setMapBounds(u.MAP_DEFAULT_BOUNDS)},_handleFeatureNavigate:function(t,e){var i=this.model.get(t+"s"),n=i._getFeatureById(e);if(n===void 0){this.listenToOnce(i,"sync",function(){this._handleFeatureNavigate(t,e)},this);return}this._moveToFeature(n)}});Cocktail.mixin(h,l);e.exports=h},{"../../constants":14,"../../mixins/eventsMixin":15,"./mapModel":3,backbone:26,jquery:28,"nzta-map-components":31,underscore:50}],5:[function(t,e,i){"use strict";var n=t("nzta-map-components");var r=n.GeoJsonCollection.extend({model:n.GeoJsonModel,url:"/rest/regions",excludeFromMap:true});e.exports=r},{"nzta-map-components":31}],6:[function(t,e,i){"use strict";var n=t("nzta-map-components");var r=n.GeoJsonCollection.extend({model:n.GeoJsonModel,url:"/rest/events"});e.exports=r},{"nzta-map-components":31}],7:[function(t,e,i){"use strict";var n=t("backbone"),r=t("nzta-map-components");var o=n.Model.extend({defaults:{regions:new r.GeoJsonCollection,events:new r.GeoJsonCollection}});e.exports=o},{backbone:26,"nzta-map-components":31}],8:[function(t,e,i){"use strict";var n=t("underscore"),r=t("nzta-map-components"),o=t("./menuModel"),s=t("./regionPanelView"),a=t("../../mixins/eventsMixin");var u=r.DrillDownMenuView.extend({template:n.template('<div id="default-panel-region"></div>'),regions:{defaultPanelRegion:"#default-panel-region"},initialize:function(t){this.model=new o;r.DrillDownMenuView.prototype.initialize.call(this,t)},_isMenuRoute:function(t){return t[0]==="region"&&t[1]!==null},_handleMenuRoute:function(t,e){var i,n,r,o;if(this.model.get("events").models.length===0){this.listenToOnce(this.model.get("events"),"sync",function(){this._handleMenuRoute(t,e)},this);return}i={key:e[0],value:e[0]+"/"+e[1]};r=this.model.get("regions").models.filter(function(t){return t.get("properties").id===e[0]+"/"+e[1]});r=r.length>0?r[0].get("properties").name+" Traffic":"";n={title:r,urlSegment:e[0]+"/"+e[1]};o=this._createPanel(s,"events",i,n);this._showNewPanelView(o)},_onRoute:function(t,e){if(this._isMenuRoute(e)){this._handleMenuRoute(t,e)}},_onMapData:function(t){this.model.get("regions").set(t.regions.models);this.model.get("events").set(t.events.models)}});Cocktail.mixin(u,a);e.exports=u},{"../../mixins/eventsMixin":15,"./menuModel":7,"./regionPanelView":10,"nzta-map-components":31,underscore:50}],9:[function(t,e,i){"use strict";var n=t("underscore"),r=t("nzta-map-components");var o=r.DrillDownItemView.extend({className:"list__item",template:n.template('        <div class="menu-item">             sup         </div>     ')});e.exports=o},{"nzta-map-components":31,underscore:50}],10:[function(t,e,i){"use strict";var n=t("underscore"),r=t("nzta-map-components"),o=t("./regionPanelItemView"),s=t("../../mixins/eventsMixin");var a=r.DrillDownPanelView.extend({childView:o,template:n.template('        <div class="menu-panel">             Sup             <ul class="items"></ul>         </div>     '),_onMapData:function(t){var e=this._getRelationsForFeature(t.journeys.models,"regions",this.model.get("id"));this.collection.set(e);n.each(this.children._views,function(t){var e=n.findWhere(this.eventSummaryStates,{journeyId:t.model.get("properties").id});if(e!==void 0&&e.expandedSummary!==null){t._openRoadEventSummary(t.$el.find('.pill--summary[data-type="'+e.expandedSummary+'"]'))}},this)}});Cocktail.mixin(a,s);e.exports=a},{"../../mixins/eventsMixin":15,"./regionPanelItemView":9,"nzta-map-components":31,underscore:50}],11:[function(t,e,i){"use strict";var n=t("backbone"),r=t("nzta-map-components");var o=r.PopupModel.extend({defaults:{hidden:true,feature:null,cameras:new r.GeoJsonCollection,events:new r.GeoJsonCollection}});e.exports=o},{backbone:26,"nzta-map-components":31}],12:[function(t,e,i){"use strict";var n=t("underscore"),r=t("nzta-map-components"),o=t("./popupModel"),s=t("../../mixins/eventsMixin");var a=r.PopupView.extend({template:n.template('        <div id="popup">             <a class="icon-cross close" href="javascript:void(0)"></a>             <% if (feature !== null) { %>                 <%= feature.properties.eventComments %>             <% } %>         </div>     '),initialize:function(){r.PopupView.prototype.initialize.call(this);this.model=new o},_isPopupRoute:function(t){var e=true;switch(t[0]){case"camera":break;case"event":break;default:e=false}return e},_handlePopupRoute:function(t){var e=t[0]+"s",i=this.model.get(e);if(i.length===0){this.listenToOnce(this.model.get(e),"add",function(){this._handlePopupRoute(t)},this);return}this._openPopup(i._getFeatureById(t[1]))},_onRoute:function(t,e){if(this._isPopupRoute(e)){this._handlePopupRoute(e)}else{this._closePopup()}},_onMapData:function(t){this.model.get("cameras").set(t.cameras.models);this.model.get("events").set(t.events.models);if(this.model.get("hidden")===false&&this.model.get("feature").properties!==void 0){this._openPopup(this._getFeatureById(this.model.get(this.model.get("type")+"s").models,this.model.get("feature").properties.id))}this.render()}});Cocktail.mixin(a,s);e.exports=a},{"../../mixins/eventsMixin":15,"./popupModel":11,"nzta-map-components":31,underscore:50}],13:[function(t,e,i){"use strict";var n=t("underscore"),r=t("nzta-map-components");var o=r.UserControlsView.extend({template:n.template('        <div id="user-controls">             <!-- <ul class="controls-list secondary-controls">                 <a id="mobile-control-map-button" class="control-item" href="javascript:void(0)">Map</a>                 <a id="mobile-control-list-button" class="control-item" href="javascript:void(0)">List</a>             </ul> -->             <ul class="controls-list primary-controls">                 <li class="control-item">                     <a id="zoomIn" class="icon-zoom-in" href="javascript:void(0)">&nbsp;</a>                 </li>                 <li class="control-item">                     <a id="zoomOut" class="icon-zoom-out" href="javascript:void(0)"></a>                 </li>                 <li class="control-item">                     <a id="locate" class="icon-compass" href="javascript:void(0)"></a>                 </li>                 <li class="control-item">                     <a id="mapLayerFilters" class="icon-stack" href="javascript:void(0)"></a>                 </li>                <ul id="mapLayerFiltersList" class="<% if (!mapLayerFiltersOpen) { %>hidden<% } %>">                     <li>                         <a class="map-layer-filter" href="javascript:void(0)" data-layer="cameras">Cameras</a>                     </li>                     <li>                         <a class="map-layer-filter" href="javascript:void(0)" data-layer="events">Road events</a>                     </li>                 </ul>             </ul>         </div>     '),_toggleMapLayerFilters:function(){this.model.set("mapLayerFiltersOpen",this.model.get("mapLayerFiltersOpen")===false);this.render()}});e.exports=o},{"nzta-map-components":31,underscore:50}],14:[function(t,e,i){var n={};n.FETCH_INTERVAL=1e4;n.MAP_DEFAULT_BOUNDS=[[-29.20997,175.987198],[-52.618591,165.883804]];n.ROOT_PATH=document.getElementById("map").getAttribute("data-root");e.exports=n},{}],15:[function(t,e,i){var n={initialize:function(){this.listenTo(this.options.vent,"map.update.all",function(t){if(typeof this._onMapData==="function"){this._onMapData(t)}},this)}};e.exports=n},{}],16:[function(t,e,i){(function(i){var n=window.Backbone,r=window._,o=window.Cocktail;i.L=window.L=t("leaflet");t("leaflet.markercluster");if(n===void 0){n=window.Backbone=t("backbone")}if(n.Associations===void 0){n=t("backbone-associations")}if(r===void 0){r=window._=t("underscore")}if(o===void 0){o=window.Cocktail=t("backbone.cocktail")}if(n.$===void 0){n.$=t("jquery")}if(n.Marionette===void 0){n.Marionette=t("backbone.marionette")}if(n.Wreqr===void 0){n.Wreqr=t("backbone.wreqr")}e.exports={Backbone:n,_:r,Cocktail:o,L:i.L}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{backbone:26,"backbone-associations":17,"backbone.cocktail":18,"backbone.marionette":20,"backbone.wreqr":24,jquery:28,leaflet:30,"leaflet.markercluster":29,underscore:50}],17:[function(t,e,i){(function(n,r){if(typeof define==="function"&&define.amd){define(["underscore","backbone"],function(t,e){return r(n,e,t)})}else if(typeof i!=="undefined"){var o=t("underscore"),s=t("backbone");r(n,s,o);if(typeof e!=="undefined"&&e.exports){e.exports=s}i=s}else{r(n,n.Backbone,n._)}})(this,function(t,e,i){"use strict";var n,r,o,s,a,u,l,h,c,f,d,p={};n=e.Model;r=e.Collection;o=n.prototype;a=r.prototype;s=e.Events;e.Associations={VERSION:"0.6.2"};e.Associations.scopes=[];var g=function(){return c};var m=function(t){if(!i.isString(t)||i.size(t)<1){t="."}c=t;l=new RegExp("[\\"+c+"\\[\\]]+","g");h=new RegExp("[^\\"+c+"\\[\\]]+","g")};try{Object.defineProperty(e.Associations,"SEPARATOR",{enumerable:true,get:g,set:m})}catch(v){}e.Associations.Many=e.Many="Many";e.Associations.One=e.One="One";e.Associations.Self=e.Self="Self";e.Associations.SEPARATOR=".";e.Associations.getSeparator=g;e.Associations.setSeparator=m;e.Associations.EVENTS_BUBBLE=true;e.Associations.EVENTS_WILDCARD=true;e.Associations.EVENTS_NC=false;m();u=e.AssociatedModel=e.Associations.AssociatedModel=n.extend({relations:undefined,_proxyCalls:undefined,constructor:function(t,e){e&&e.__parents__&&(this.parents=[e.__parents__]);n.apply(this,arguments)},on:function(t,n,r){var o=s.on.apply(this,arguments);if(e.Associations.EVENTS_NC)return o;var a=/\s+/;if(i.isString(t)&&t&&!a.test(t)&&n){var u=y(t);if(u){p[u]=typeof p[u]==="undefined"?1:p[u]+1}}return o},off:function(t,n,r){if(e.Associations.EVENTS_NC)return s.off.apply(this,arguments);var o=/\s+/,a=this._events,u={},l=a?i.keys(a):[],h=!t&&!n&&!r,c=i.isString(t)&&!o.test(t);if(h||c){for(var f=0,d=l.length;f<d;f++){u[l[f]]=a[l[f]]?a[l[f]].length:0}}var g=s.off.apply(this,arguments);if(h||c){for(f=0,d=l.length;f<d;f++){var m=y(l[f]);if(m){if(a[l[f]]){p[m]-=u[l[f]]-a[l[f]].length}else{p[m]-=u[l[f]]}}}}return g},get:function(t){var e=this.__attributes__,i=o.get.call(this,t),n=e?x(i)?i:e[t]:i;return x(n)?n:this._getAttr.apply(this,arguments)},set:function(t,e,n){var r,o;if(i.isObject(t)||t==null){r=t;n=e}else{r={};r[t]=e}o=this._set(r,n);this._processPendingEvents();return o},_set:function(t,e){var r,o,s,a,u=this;if(!t)return this;this.__attributes__=t;for(r in t){o||(o={});if(r.match(l)){var h=_(r),c=i.initial(h),f=h[h.length-1],d=this.get(c);if(d instanceof n){a=o[d.cid]||(o[d.cid]={model:d,data:{}});a.data[f]=t[r]}}else{a=o[this.cid]||(o[this.cid]={model:this,data:{}});a.data[r]=t[r]}}if(o){for(s in o){a=o[s];this._setAttr.call(a.model,a.data,e)||(u=false)}}else{u=this._setAttr.call(this,t,e)}delete this.__attributes__;return u},_setAttr:function(s,a){var u;a||(a={});if(a.unset)for(u in s)s[u]=void 0;this.parents=this.parents||[];if(this.relations){i.each(this.relations,function(o){var u=o.key,l=o.scope||t,h=this._transformRelatedModel(o,s),c=this._transformCollectionType(o,h,s),f=i.isString(o.map)?b(o.map,l):o.map,d=this.attributes[u],p=d&&d.idAttribute,g,m,v,_,y=false;m=o.options?i.extend({},o.options,a):a;if(s[u]){g=i.result(s,u);g=f?f.call(this,g,c?c:h):g;if(!x(g)){v=g}else{if(o.type===e.Many){if(d){d._deferEvents=true;d[m.reset?"reset":"set"](g instanceof r?g.models:g,m);v=d}else{y=true;if(g instanceof r){v=g}else{v=this._createCollection(c||r,o.collectionOptions||(h?{model:h}:{}));v[m.reset?"reset":"set"](g,m)}}}else if(o.type===e.One){var w=g instanceof n?g.attributes.hasOwnProperty(p):g.hasOwnProperty(p);var C=g instanceof n?g.attributes[p]:g[p];if(d&&w&&d.attributes[p]===C){d._deferEvents=true;d._set(g instanceof n?g.attributes:g,m);v=d}else{y=true;if(g instanceof n){v=g}else{m.__parents__=this;v=new h(g,m);delete m.__parents__}}}else{throw new Error("type attribute must be specified and "+"have the values Backbone.One or Backbone.Many")}}s[u]=v;_=v;if(y||_&&!_._proxyCallback){if(!_._proxyCallback){_._proxyCallback=function(){return e.Associations.EVENTS_BUBBLE&&this._bubbleEvent.call(this,u,_,arguments)}}_.on("all",_._proxyCallback,this)}}if(s.hasOwnProperty(u))this._setupParents(s[u],this.attributes[u])},this)}return o.set.call(this,s,a)},_bubbleEvent:function(t,i,o){var s=o,a=s[0].split(":"),u=a[0],l=s[0]=="nested-change",h=u==="change",g=s[1],m=-1,v=i._proxyCalls,_,b=a[1],w=!b||b.indexOf(c)==-1,x;if(l)return;if(w)d=y(s[0])||t;if(!e.Associations.EVENTS_NC&&!p[d])return;if(e.Associations.EVENTS_WILDCARD){if(/\[\*\]/g.test(b))return this}if(i instanceof r&&(h||b)){m=i.indexOf(f||g)}if(this instanceof n){f=this}b=t+(m!==-1&&(h||b)?"["+m+"]":"")+(b?c+b:"");if(e.Associations.EVENTS_WILDCARD){x=b.replace(/\[\d+\]/g,"[*]")}_=[];_.push.apply(_,s);_[0]=u+":"+b;if(e.Associations.EVENTS_WILDCARD&&b!==x){_[0]=_[0]+" "+u+":"+x}v=i._proxyCalls=v||{};if(this._isEventAvailable.call(this,v,b))return this;v[b]=true;if(h){this._previousAttributes[t]=i._previousAttributes;this.changed[t]=i}this.trigger.apply(this,_);if(e.Associations.EVENTS_NC&&h&&this.get(b)!=s[2]){var C=["nested-change",b,s[1]];s[2]&&C.push(s[2]);this.trigger.apply(this,C)}if(v&&b)delete v[b];f=undefined;return this},_isEventAvailable:function(t,e){return i.find(t,function(t,i){return e.indexOf(i,e.length-i.length)!==-1})},_setupParents:function(t,e){if(t){t.parents=t.parents||[];i.indexOf(t.parents,this)==-1&&t.parents.push(this)}if(e&&e.parents.length>0&&e!=t){e.parents=i.difference(e.parents,[this]);e._proxyCallback&&e.off("all",e._proxyCallback,this)}},_createCollection:function(t,e){e=i.defaults(e,{model:t.model});var n=new t([],i.isFunction(e)?e.call(this):e);n.parents=[this];return n},_processPendingEvents:function(){if(!this._processedEvents){this._processedEvents=true;this._deferEvents=false;i.each(this._pendingEvents,function(t){t.c.trigger.apply(t.c,t.a)});this._pendingEvents=[];i.each(this.relations,function(t){var e=this.attributes[t.key];e&&e._processPendingEvents&&e._processPendingEvents()},this);delete this._processedEvents}},_transformRelatedModel:function(r,o){var s=r.relatedModel;var a=r.scope||t;if(s&&!(s.prototype instanceof n))s=i.isFunction(s)?s.call(this,r,o):s;if(s&&i.isString(s)){s=s===e.Self?this.constructor:b(s,a)}if(r.type===e.One){if(!s)throw new Error("specify a relatedModel for Backbone.One type");if(!(s.prototype instanceof e.Model))throw new Error("specify an AssociatedModel or Backbone.Model for Backbone.One type")}return s},_transformCollectionType:function(o,s,a){var u=o.collectionType;var l=o.scope||t;if(u&&i.isFunction(u)&&u.prototype instanceof n)throw new Error("type is of Backbone.Model. Specify derivatives of Backbone.Collection");if(u&&!(u.prototype instanceof r))u=i.isFunction(u)?u.call(this,o,a):u;u&&i.isString(u)&&(u=b(u,l));if(u&&!u.prototype instanceof r){throw new Error("collectionType must inherit from Backbone.Collection")}if(o.type===e.Many){if(!s&&!u)throw new Error("specify either a relatedModel or collectionType")}return u},trigger:function(t){if(this._deferEvents){this._pendingEvents=this._pendingEvents||[];this._pendingEvents.push({c:this,a:arguments})}else{o.trigger.apply(this,arguments)}},toJSON:function(t){var e={},n;e[this.idAttribute]=this.id;if(!this.visited){this.visited=true;e=o.toJSON.apply(this,arguments);if(t&&t.serialize_keys){e=i.pick(e,t.serialize_keys)}if(this.relations){i.each(this.relations,function(r){var o=r.key,s=r.remoteKey,a=this.attributes[o],u=!r.isTransient,l=r.serialize||[],h=i.clone(t);delete e[o];if(u){if(l.length){h?h.serialize_keys=l:h={serialize_keys:l}}n=a&&a.toJSON?a.toJSON(h):a;e[s||o]=i.isArray(n)?i.compact(n):n}},this)}delete this.visited}return e},clone:function(t){return new this.constructor(this.toJSON(t))},cleanup:function(t){t=t||{};i.each(this.relations,function(t){var e=this.attributes[t.key];if(e){e._proxyCallback&&e.off("all",e._proxyCallback,this);e.parents=i.difference(e.parents,[this])}},this);!t.listen&&this.off()},destroy:function(t){t=t?i.clone(t):{};t=i.defaults(t,{remove_references:true,listen:true});var e=this;if(t.remove_references&&t.wait){var n=t.success;t.success=function(i){if(n)n(e,i,t);e.cleanup(t)}}var r=o.destroy.apply(this,[t]);if(t.remove_references&&!t.wait){e.cleanup(t)}return r},_getAttr:function(t){var e=this,n=this.__attributes__,o=_(t),s,a;if(i.size(o)<1)return;for(a=0;a<o.length;a++){s=o[a];if(!e)break;e=e instanceof r?isNaN(s)?undefined:e.at(s):n?x(e.attributes[s])?e.attributes[s]:n[s]:e.attributes[s]}return e}});var _=function(t){if(t==="")return[""];return i.isString(t)?t.match(h):t||[]};var y=function(t){if(!t)return t;var e=t.split(":");if(e.length>1){t=e[e.length-1];e=t.split(c);return e.length>1?e[e.length-1].split("[")[0]:e[0].split("[")[0]}else{return""}};var b=function(t,n){var r,o=[n];o.push.apply(o,e.Associations.scopes);for(var s,a=0,u=o.length;a<u;++a){if(s=o[a]){r=i.reduce(t.split(c),function(t,e){return t[e]},s);if(r)break}}return r};var w=function(t,e,n){var r,o;i.find(t,function(t){r=i.find(t.relations,function(i){return t.get(i.key)===e},this);if(r){o=t;return true}},this);if(r&&r.map){return r.map.call(o,n,e)}return n};var x=function(t){return!i.isUndefined(t)&&!i.isNull(t)};var C={};i.each(["set","remove","reset"],function(t){C[t]=r.prototype[t];a[t]=function(e,i){if(this.model.prototype instanceof u&&this.parents){arguments[0]=w(this.parents,this,e)}return C[t].apply(this,arguments)}});C["trigger"]=a["trigger"];a["trigger"]=function(t){if(this._deferEvents){this._pendingEvents=this._pendingEvents||[];this._pendingEvents.push({c:this,a:arguments})}else{C["trigger"].apply(this,arguments)}};a._processPendingEvents=u.prototype._processPendingEvents;a.on=u.prototype.on;a.off=u.prototype.off;return e})},{backbone:26,underscore:50}],18:[function(t,e,i){(function(i){if(typeof t==="function"&&typeof e!=="undefined"&&e.exports){e.exports=i(t("underscore"))}else if(typeof define==="function"){define(["underscore"],i)}else{this.Cocktail=i(_)}})(function(t){var e={};e.mixins={};e.mixin=function n(i){var n=t.chain(arguments).toArray().rest().flatten().value();var r=i.prototype||i;var o={};t.each(n,function(i){if(t.isString(i)){i=e.mixins[i]}t.each(i,function(e,i){if(t.isFunction(e)){if(r[i]===e)return;if(r[i]){o[i]=o.hasOwnProperty(i)?o[i]:[r[i]];o[i].push(e)}r[i]=e}else if(t.isArray(e)){r[i]=t.union(e,r[i]||[])}else if(t.isObject(e)){r[i]=t.extend({},e,r[i]||{})}else if(!(i in r)){r[i]=e}})});t.each(o,function(e,i){r[i]=function(){var i=this,n=arguments,r;t.each(e,function(e){var o=t.isFunction(e)?e.apply(i,n):e;r=typeof o==="undefined"?r:o});return r}});return i};var i;e.patch=function r(n){i=n.Model.extend;var r=function(t,n){var r=i.call(this,t,n);var o=r.prototype.mixins;if(o&&r.prototype.hasOwnProperty("mixins")){e.mixin(r,o)}return r};t.each([n.Model,n.Collection,n.Router,n.View],function(i){i.mixin=function n(){e.mixin(this,t.toArray(arguments))};i.extend=r})};e.unpatch=function o(e){t.each([e.Model,e.Collection,e.Router,e.View],function(t){t.mixin=undefined;t.extend=i})};return e})},{underscore:19}],19:[function(t,e,i){(function(){var t=this;var n=t._;var r={};var o=Array.prototype,s=Object.prototype,a=Function.prototype;var u=o.push,l=o.slice,h=o.concat,c=s.toString,f=s.hasOwnProperty;var d=o.forEach,p=o.map,g=o.reduce,m=o.reduceRight,v=o.filter,_=o.every,y=o.some,b=o.indexOf,w=o.lastIndexOf,x=Array.isArray,C=Object.keys,L=a.bind;var E=function(t){if(t instanceof E)return t;if(!(this instanceof E))return new E(t);this._wrapped=t};if(typeof i!=="undefined"){if(typeof e!=="undefined"&&e.exports){i=e.exports=E}i._=E}else{t._=E}E.VERSION="1.5.2";var M=E.each=E.forEach=function(t,e,i){if(t==null)return;if(d&&t.forEach===d){t.forEach(e,i)}else if(t.length===+t.length){for(var n=0,o=t.length;n<o;n++){if(e.call(i,t[n],n,t)===r)return}}else{var s=E.keys(t);for(var n=0,o=s.length;n<o;n++){if(e.call(i,t[s[n]],s[n],t)===r)return}}};E.map=E.collect=function(t,e,i){var n=[];if(t==null)return n;if(p&&t.map===p)return t.map(e,i);M(t,function(t,r,o){n.push(e.call(i,t,r,o))});return n};var P="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(t,e,i,n){var r=arguments.length>2;if(t==null)t=[];if(g&&t.reduce===g){if(n)e=E.bind(e,n);return r?t.reduce(e,i):t.reduce(e)}M(t,function(t,o,s){if(!r){i=t;r=true}else{i=e.call(n,i,t,o,s)}});if(!r)throw new TypeError(P);return i};E.reduceRight=E.foldr=function(t,e,i,n){var r=arguments.length>2;if(t==null)t=[];if(m&&t.reduceRight===m){if(n)e=E.bind(e,n);return r?t.reduceRight(e,i):t.reduceRight(e)}var o=t.length;if(o!==+o){var s=E.keys(t);o=s.length}M(t,function(a,u,l){u=s?s[--o]:--o;if(!r){i=t[u];r=true}else{i=e.call(n,i,t[u],u,l)}});if(!r)throw new TypeError(P);return i};E.find=E.detect=function(t,e,i){var n;T(t,function(t,r,o){if(e.call(i,t,r,o)){n=t;return true}});return n};E.filter=E.select=function(t,e,i){var n=[];if(t==null)return n;if(v&&t.filter===v)return t.filter(e,i);M(t,function(t,r,o){if(e.call(i,t,r,o))n.push(t)});return n};E.reject=function(t,e,i){return E.filter(t,function(t,n,r){return!e.call(i,t,n,r)},i)};E.every=E.all=function(t,e,i){e||(e=E.identity);var n=true;if(t==null)return n;if(_&&t.every===_)return t.every(e,i);M(t,function(t,o,s){if(!(n=n&&e.call(i,t,o,s)))return r});return!!n};var T=E.some=E.any=function(t,e,i){e||(e=E.identity);var n=false;if(t==null)return n;if(y&&t.some===y)return t.some(e,i);M(t,function(t,o,s){if(n||(n=e.call(i,t,o,s)))return r});return!!n};E.contains=E.include=function(t,e){if(t==null)return false;if(b&&t.indexOf===b)return t.indexOf(e)!=-1;return T(t,function(t){return t===e})};E.invoke=function(t,e){var i=l.call(arguments,2);var n=E.isFunction(e);return E.map(t,function(t){return(n?e:t[e]).apply(t,i)})};E.pluck=function(t,e){return E.map(t,function(t){return t[e]})};E.where=function(t,e,i){if(E.isEmpty(e))return i?void 0:[];return E[i?"find":"filter"](t,function(t){for(var i in e){if(e[i]!==t[i])return false}return true})};E.findWhere=function(t,e){return E.where(t,e,true)};E.max=function(t,e,i){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535){return Math.max.apply(Math,t)}if(!e&&E.isEmpty(t))return-Infinity;var n={computed:-Infinity,value:-Infinity};M(t,function(t,r,o){var s=e?e.call(i,t,r,o):t;s>n.computed&&(n={value:t,computed:s})});return n.value};E.min=function(t,e,i){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535){return Math.min.apply(Math,t)}if(!e&&E.isEmpty(t))return Infinity;var n={computed:Infinity,value:Infinity};M(t,function(t,r,o){var s=e?e.call(i,t,r,o):t;s<n.computed&&(n={value:t,computed:s})});return n.value};E.shuffle=function(t){var e;var i=0;var n=[];M(t,function(t){e=E.random(i++);n[i-1]=n[e];n[e]=t});return n};E.sample=function(t,e,i){if(arguments.length<2||i){return t[E.random(t.length-1)]}return E.shuffle(t).slice(0,Math.max(0,e))};var k=function(t){return E.isFunction(t)?t:function(e){return e[t]}};E.sortBy=function(t,e,i){var n=k(e);return E.pluck(E.map(t,function(t,e,r){return{value:t,index:e,criteria:n.call(i,t,e,r)}}).sort(function(t,e){var i=t.criteria;var n=e.criteria;if(i!==n){if(i>n||i===void 0)return 1;if(i<n||n===void 0)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,i,n){var r={};var o=i==null?E.identity:k(i);M(e,function(i,s){var a=o.call(n,i,s,e);t(r,a,i)});return r}};E.groupBy=S(function(t,e,i){(E.has(t,e)?t[e]:t[e]=[]).push(i)});E.indexBy=S(function(t,e,i){t[e]=i});E.countBy=S(function(t,e){E.has(t,e)?t[e]++:t[e]=1});E.sortedIndex=function(t,e,i,n){i=i==null?E.identity:k(i);var r=i.call(n,e);var o=0,s=t.length;while(o<s){var a=o+s>>>1;i.call(n,t[a])<r?o=a+1:s=a}return o};E.toArray=function(t){if(!t)return[];if(E.isArray(t))return l.call(t);if(t.length===+t.length)return E.map(t,E.identity);return E.values(t)};E.size=function(t){if(t==null)return 0;return t.length===+t.length?t.length:E.keys(t).length};E.first=E.head=E.take=function(t,e,i){if(t==null)return void 0;return e==null||i?t[0]:l.call(t,0,e)};E.initial=function(t,e,i){return l.call(t,0,t.length-(e==null||i?1:e))};E.last=function(t,e,i){if(t==null)return void 0;if(e==null||i){return t[t.length-1]}else{return l.call(t,Math.max(t.length-e,0))}};E.rest=E.tail=E.drop=function(t,e,i){return l.call(t,e==null||i?1:e)};E.compact=function(t){return E.filter(t,E.identity)};var O=function(t,e,i){if(e&&E.every(t,E.isArray)){return h.apply(i,t)}M(t,function(t){if(E.isArray(t)||E.isArguments(t)){e?u.apply(i,t):O(t,e,i)}else{i.push(t)}});return i};E.flatten=function(t,e){return O(t,e,[])};E.without=function(t){return E.difference(t,l.call(arguments,1))};E.uniq=E.unique=function(t,e,i,n){if(E.isFunction(e)){n=i;i=e;e=false}var r=i?E.map(t,i,n):t;var o=[];var s=[];M(r,function(i,n){if(e?!n||s[s.length-1]!==i:!E.contains(s,i)){s.push(i);o.push(t[n])}});return o};E.union=function(){return E.uniq(E.flatten(arguments,true))};E.intersection=function(t){var e=l.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(e,function(e){return E.indexOf(e,t)>=0})})};E.difference=function(t){var e=h.apply(o,l.call(arguments,1));return E.filter(t,function(t){return!E.contains(e,t)})};E.zip=function(){var t=E.max(E.pluck(arguments,"length").concat(0));var e=new Array(t);for(var i=0;i<t;i++){e[i]=E.pluck(arguments,""+i)}return e};E.object=function(t,e){if(t==null)return{};var i={};for(var n=0,r=t.length;n<r;n++){if(e){i[t[n]]=e[n]}else{i[t[n][0]]=t[n][1]}}return i};E.indexOf=function(t,e,i){if(t==null)return-1;var n=0,r=t.length;if(i){if(typeof i=="number"){n=i<0?Math.max(0,r+i):i}else{n=E.sortedIndex(t,e);return t[n]===e?n:-1}}if(b&&t.indexOf===b)return t.indexOf(e,i);for(;n<r;n++)if(t[n]===e)return n;return-1};E.lastIndexOf=function(t,e,i){if(t==null)return-1;var n=i!=null;if(w&&t.lastIndexOf===w){return n?t.lastIndexOf(e,i):t.lastIndexOf(e)}var r=n?i:t.length;while(r--)if(t[r]===e)return r;return-1};E.range=function(t,e,i){if(arguments.length<=1){e=t||0;t=0}i=arguments[2]||1;var n=Math.max(Math.ceil((e-t)/i),0);var r=0;var o=new Array(n);while(r<n){o[r++]=t;t+=i}return o};var A=function(){};E.bind=function(t,e){var i,n;if(L&&t.bind===L)return L.apply(t,l.call(arguments,1));if(!E.isFunction(t))throw new TypeError;i=l.call(arguments,2);return n=function(){if(!(this instanceof n))return t.apply(e,i.concat(l.call(arguments)));A.prototype=t.prototype;var r=new A;A.prototype=null;var o=t.apply(r,i.concat(l.call(arguments)));if(Object(o)===o)return o;return r}};E.partial=function(t){var e=l.call(arguments,1);return function(){return t.apply(this,e.concat(l.call(arguments)))}};E.bindAll=function(t){var e=l.call(arguments,1);if(e.length===0)throw new Error("bindAll must be passed function names");M(e,function(e){t[e]=E.bind(t[e],t)});return t};E.memoize=function(t,e){var i={};e||(e=E.identity);return function(){var n=e.apply(this,arguments);return E.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}};E.delay=function(t,e){var i=l.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)};E.defer=function(t){return E.delay.apply(E,[t,1].concat(l.call(arguments,1)))};E.throttle=function(t,e,i){var n,r,o;var s=null;var a=0;i||(i={});var u=function(){a=i.leading===false?0:new Date;s=null;o=t.apply(n,r)};return function(){var l=new Date;if(!a&&i.leading===false)a=l;var h=e-(l-a);n=this;r=arguments;if(h<=0){clearTimeout(s);s=null;a=l;o=t.apply(n,r)}else if(!s&&i.trailing!==false){s=setTimeout(u,h)}return o}};E.debounce=function(t,e,i){var n,r,o,s,a;return function(){o=this;r=arguments;s=new Date;var u=function(){var l=new Date-s;if(l<e){n=setTimeout(u,e-l)}else{n=null;if(!i)a=t.apply(o,r)}};var l=i&&!n;if(!n){n=setTimeout(u,e)}if(l)a=t.apply(o,r);return a}};E.once=function(t){var e=false,i;return function(){if(e)return i;e=true;i=t.apply(this,arguments);t=null;return i}};E.wrap=function(t,e){return function(){var i=[t];u.apply(i,arguments);return e.apply(this,i)}};E.compose=function(){var t=arguments;return function(){var e=arguments;for(var i=t.length-1;i>=0;i--){e=[t[i].apply(this,e)]}return e[0]}};E.after=function(t,e){return function(){if(--t<1){return e.apply(this,arguments)}}};E.keys=C||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)if(E.has(t,i))e.push(i);return e};E.values=function(t){var e=E.keys(t);var i=e.length;var n=new Array(i);for(var r=0;r<i;r++){n[r]=t[e[r]]}return n};E.pairs=function(t){var e=E.keys(t);var i=e.length;var n=new Array(i);for(var r=0;r<i;r++){n[r]=[e[r],t[e[r]]]}return n};E.invert=function(t){var e={};var i=E.keys(t);for(var n=0,r=i.length;n<r;n++){e[t[i[n]]]=i[n]}return e};E.functions=E.methods=function(t){var e=[];for(var i in t){if(E.isFunction(t[i]))e.push(i)}return e.sort()};E.extend=function(t){M(l.call(arguments,1),function(e){if(e){for(var i in e){t[i]=e[i]}}});return t};E.pick=function(t){var e={};
var i=h.apply(o,l.call(arguments,1));M(i,function(i){if(i in t)e[i]=t[i]});return e};E.omit=function(t){var e={};var i=h.apply(o,l.call(arguments,1));for(var n in t){if(!E.contains(i,n))e[n]=t[n]}return e};E.defaults=function(t){M(l.call(arguments,1),function(e){if(e){for(var i in e){if(t[i]===void 0)t[i]=e[i]}}});return t};E.clone=function(t){if(!E.isObject(t))return t;return E.isArray(t)?t.slice():E.extend({},t)};E.tap=function(t,e){e(t);return t};var D=function(t,e,i,n){if(t===e)return t!==0||1/t==1/e;if(t==null||e==null)return t===e;if(t instanceof E)t=t._wrapped;if(e instanceof E)e=e._wrapped;var r=c.call(t);if(r!=c.call(e))return false;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:t==0?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if(typeof t!="object"||typeof e!="object")return false;var o=i.length;while(o--){if(i[o]==t)return n[o]==e}var s=t.constructor,a=e.constructor;if(s!==a&&!(E.isFunction(s)&&s instanceof s&&E.isFunction(a)&&a instanceof a)){return false}i.push(t);n.push(e);var u=0,l=true;if(r=="[object Array]"){u=t.length;l=u==e.length;if(l){while(u--){if(!(l=D(t[u],e[u],i,n)))break}}}else{for(var h in t){if(E.has(t,h)){u++;if(!(l=E.has(e,h)&&D(t[h],e[h],i,n)))break}}if(l){for(h in e){if(E.has(e,h)&&!u--)break}l=!u}}i.pop();n.pop();return l};E.isEqual=function(t,e){return D(t,e,[],[])};E.isEmpty=function(t){if(t==null)return true;if(E.isArray(t)||E.isString(t))return t.length===0;for(var e in t)if(E.has(t,e))return false;return true};E.isElement=function(t){return!!(t&&t.nodeType===1)};E.isArray=x||function(t){return c.call(t)=="[object Array]"};E.isObject=function(t){return t===Object(t)};M(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}});if(!E.isArguments(arguments)){E.isArguments=function(t){return!!(t&&E.has(t,"callee"))}}if(typeof/./!=="function"){E.isFunction=function(t){return typeof t==="function"}}E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))};E.isNaN=function(t){return E.isNumber(t)&&t!=+t};E.isBoolean=function(t){return t===true||t===false||c.call(t)=="[object Boolean]"};E.isNull=function(t){return t===null};E.isUndefined=function(t){return t===void 0};E.has=function(t,e){return f.call(t,e)};E.noConflict=function(){t._=n;return this};E.identity=function(t){return t};E.times=function(t,e,i){var n=Array(Math.max(0,t));for(var r=0;r<t;r++)n[r]=e.call(i,r);return n};E.random=function(t,e){if(e==null){e=t;t=0}return t+Math.floor(Math.random()*(e-t+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=E.invert(I.escape);var R={escape:new RegExp("["+E.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(I.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(t){E[t]=function(e){if(e==null)return"";return(""+e).replace(R[t],function(e){return I[t][e]})}});E.result=function(t,e){if(t==null)return void 0;var i=t[e];return E.isFunction(i)?i.call(t):i};E.mixin=function(t){M(E.functions(t),function(e){var i=E[e]=t[e];E.prototype[e]=function(){var t=[this._wrapped];u.apply(t,arguments);return j.call(this,i.apply(E,t))}})};var B=0;E.uniqueId=function(t){var e=++B+"";return t?t+e:e};E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/;var z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var V=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(t,e,i){var n;i=E.defaults({},i,E.templateSettings);var r=new RegExp([(i.escape||N).source,(i.interpolate||N).source,(i.evaluate||N).source].join("|")+"|$","g");var o=0;var s="__p+='";t.replace(r,function(e,i,n,r,a){s+=t.slice(o,a).replace(V,function(t){return"\\"+z[t]});if(i){s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"}if(n){s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"}if(r){s+="';\n"+r+"\n__p+='"}o=a+e.length;return e});s+="';\n";if(!i.variable)s="with(obj||{}){\n"+s+"}\n";s="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(a){a.source=s;throw a}if(e)return n(e,E);var u=function(t){return n.call(this,t,E)};u.source="function("+(i.variable||"obj")+"){\n"+s+"}";return u};E.chain=function(t){return E(t).chain()};var j=function(t){return this._chain?E(t).chain():t};E.mixin(E);M(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];E.prototype[t]=function(){var i=this._wrapped;e.apply(i,arguments);if((t=="shift"||t=="splice")&&i.length===0)delete i[0];return j.call(this,i)}});M(["concat","join","slice"],function(t){var e=o[t];E.prototype[t]=function(){return j.call(this,e.apply(this._wrapped,arguments))}});E.extend(E.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)},{}],20:[function(t,e,i){(function(n,r){if(typeof define==="function"&&define.amd){define(["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(t,e){return n.Marionette=n.Mn=r(n,t,e)})}else if(typeof i!=="undefined"){var o=t("backbone");var s=t("underscore");var a=t("backbone.wreqr");var u=t("backbone.babysitter");e.exports=r(n,o,s)}else{n.Marionette=n.Mn=r(n,n.Backbone,n._)}})(this,function(t,e,i){"use strict";var n=t.Marionette;var r=t.Mn;var o=e.Marionette={};o.VERSION="2.4.1";o.noConflict=function(){t.Marionette=n;t.Mn=r;return this};o.Deferred=e.$.Deferred;o.FEATURES={};o.isEnabled=function(t){return!!o.FEATURES[t]};o.extend=e.Model.extend;o.isNodeAttached=function(t){return e.$.contains(document.documentElement,t)};o.mergeOptions=function(t,e){if(!t){return}i.extend(this,i.pick(t,e))};o.getOption=function(t,e){if(!t||!e){return}if(t.options&&t.options[e]!==undefined){return t.options[e]}else{return t[e]}};o.proxyGetOption=function(t){return o.getOption(this,t)};o._getValue=function(t,e,n){if(i.isFunction(t)){t=n?t.apply(e,n):t.call(e)}return t};o.normalizeMethods=function(t){return i.reduce(t,function(t,e,n){if(!i.isFunction(e)){e=this[e]}if(e){t[n]=e}return t},{},this)};o.normalizeUIString=function(t,e){return t.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(t){return e[t.slice(4)]})};o.normalizeUIKeys=function(t,e){return i.reduce(t,function(t,i,n){var r=o.normalizeUIString(n,e);t[r]=i;return t},{})};o.normalizeUIValues=function(t,e,n){i.each(t,function(r,s){if(i.isString(r)){t[s]=o.normalizeUIString(r,e)}else if(i.isObject(r)&&i.isArray(n)){i.extend(r,o.normalizeUIValues(i.pick(r,n),e));i.each(n,function(t){var n=r[t];if(i.isString(n)){r[t]=o.normalizeUIString(n,e)}})}});return t};o.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e));var r=[t].concat(i.toArray(arguments));return i[n].apply(i,r)}})};var s=o.deprecate=function(t,e){if(i.isObject(t)){t=t.prev+" is going to be removed in the future. "+"Please use "+t.next+" instead."+(t.url?" See: "+t.url:"")}if((e===undefined||!e)&&!s._cache[t]){s._warn("Deprecation warning: "+t);s._cache[t]=true}};s._warn=typeof console!=="undefined"&&(console.warn||console.log)||function(){};s._cache={};o._triggerMethod=function(){var t=/(^|:)(\w)/gi;function e(t,e,i){return i.toUpperCase()}return function(n,r,o){var s=arguments.length<3;if(s){o=r;r=o[0]}var a="on"+r.replace(t,e);var u=n[a];var l;if(i.isFunction(u)){l=u.apply(n,s?i.rest(o):o)}if(i.isFunction(n.trigger)){if(s+o.length>1){n.trigger.apply(n,s?o:[r].concat(i.drop(o,0)))}else{n.trigger(r)}}return l}}();o.triggerMethod=function(t){return o._triggerMethod(this,arguments)};o.triggerMethodOn=function(t){var e=i.isFunction(t.triggerMethod)?t.triggerMethod:o.triggerMethod;return e.apply(t,i.rest(arguments))};o.MonitorDOMRefresh=function(t){function e(){t._isShown=true;r()}function n(){t._isRendered=true;r()}function r(){if(t._isShown&&t._isRendered&&o.isNodeAttached(t.el)){if(i.isFunction(t.triggerMethod)){t.triggerMethod("dom:refresh")}}}t.on({show:e,render:n})};(function(t){"use strict";function e(e,n,r,o){var s=o.split(/\s+/);i.each(s,function(i){var o=e[i];if(!o){throw new t.Error('Method "'+i+'" was configured as an event handler, but does not exist.')}e.listenTo(n,r,o)})}function n(t,e,i,n){t.listenTo(e,i,n)}function r(t,e,n,r){var o=r.split(/\s+/);i.each(o,function(i){var r=t[i];t.stopListening(e,n,r)})}function o(t,e,i,n){t.stopListening(e,i,n)}function s(e,n,r,o,s){if(!n||!r){return}if(!i.isObject(r)){throw new t.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"})}r=t._getValue(r,e);i.each(r,function(t,r){if(i.isFunction(t)){o(e,n,r,t)}else{s(e,n,r,t)}})}t.bindEntityEvents=function(t,i,r){s(t,i,r,n,e)};t.unbindEntityEvents=function(t,e,i){s(t,e,i,o,r)};t.proxyBindEntityEvents=function(e,i){return t.bindEntityEvents(this,e,i)};t.proxyUnbindEntityEvents=function(e,i){return t.unbindEntityEvents(this,e,i)}})(o);var a=["description","fileName","lineNumber","name","message","number"];o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(t,e){if(i.isObject(t)){e=t;t=e.message}else if(!e){e={}}var n=Error.call(this,t);i.extend(this,i.pick(n,a),i.pick(e,a));this.captureStackTrace();if(e.url){this.url=this.urlRoot+e.url}},captureStackTrace:function(){if(Error.captureStackTrace){Error.captureStackTrace(this,o.Error)}},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});o.Error.extend=o.extend;o.Callbacks=function(){this._deferred=o.Deferred();this._callbacks=[]};i.extend(o.Callbacks.prototype,{add:function(t,e){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:t,ctx:e});n.then(function(i){if(e){i.context=e}t.call(i.context,i.options)})},run:function(t,e){this._deferred.resolve({options:t,context:e})},reset:function(){var t=this._callbacks;this._deferred=o.Deferred();this._callbacks=[];i.each(t,function(t){this.add(t.cb,t.ctx)},this)}});o.Controller=function(t){this.options=t||{};if(i.isFunction(this.initialize)){this.initialize(this.options)}};o.Controller.extend=o.extend;i.extend(o.Controller.prototype,e.Events,{destroy:function(){o._triggerMethod(this,"before:destroy",arguments);o._triggerMethod(this,"destroy",arguments);this.stopListening();this.off();return this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption});o.Object=function(t){this.options=i.extend({},i.result(this,"options"),t);this.initialize.apply(this,arguments)};o.Object.extend=o.extend;i.extend(o.Object.prototype,e.Events,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening();return this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents});o.Region=o.Object.extend({constructor:function(t){this.options=t||{};this.el=this.getOption("el");this.el=this.el instanceof e.$?this.el[0]:this.el;if(!this.el){throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'})}this.$el=this.getEl(this.el);o.Object.call(this,t)},show:function(t,e){if(!this._ensureElement()){return}this._ensureViewIsIntact(t);var i=e||{};var n=t!==this.currentView;var r=!!i.preventDestroy;var s=!!i.forceShow;var a=!!this.currentView;var u=n&&!r;var l=n||s;if(a){this.triggerMethod("before:swapOut",this.currentView,this,e)}if(this.currentView){delete this.currentView._parent}if(u){this.empty()}else if(a&&l){this.currentView.off("destroy",this.empty,this)}if(l){t.once("destroy",this.empty,this);t.render();t._parent=this;if(a){this.triggerMethod("before:swap",t,this,e)}this.triggerMethod("before:show",t,this,e);o.triggerMethodOn(t,"before:show",t,this,e);if(a){this.triggerMethod("swapOut",this.currentView,this,e)}var h=o.isNodeAttached(this.el);var c=[];var f=i.triggerBeforeAttach||this.triggerBeforeAttach;var d=i.triggerAttach||this.triggerAttach;if(h&&f){c=this._displayedViews(t);this._triggerAttach(c,"before:")}this.attachHtml(t);this.currentView=t;if(h&&d){c=this._displayedViews(t);this._triggerAttach(c)}if(a){this.triggerMethod("swap",t,this,e)}this.triggerMethod("show",t,this,e);o.triggerMethodOn(t,"show",t,this,e);return this}return this},triggerBeforeAttach:true,triggerAttach:true,_triggerAttach:function(t,e){var n=(e||"")+"attach";i.each(t,function(t){o.triggerMethodOn(t,n,t,this)},this)},_displayedViews:function(t){return i.union([t],i.result(t,"_getNestedViews")||[])},_ensureElement:function(){if(!i.isObject(this.el)){this.$el=this.getEl(this.el);this.el=this.$el[0]}if(!this.$el||this.$el.length===0){if(this.getOption("allowMissingEl")){return false}else{throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")}}return true},_ensureViewIsIntact:function(t){if(!t){throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."})}if(t.isDestroyed){throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+t.cid+'") has already been destroyed and cannot be used.'})}},getEl:function(t){return e.$(t,o._getValue(this.options.parentEl,this))},attachHtml:function(t){this.$el.contents().detach();this.el.appendChild(t.el)},empty:function(t){var e=this.currentView;var i=o._getValue(t,"preventDestroy",this);if(!e){return}e.off("destroy",this.empty,this);this.triggerMethod("before:empty",e);if(!i){this._destroyView()}this.triggerMethod("empty",e);delete this.currentView;if(i){this.$el.contents().detach()}return this},_destroyView:function(){var t=this.currentView;if(t.destroy&&!t.isDestroyed){t.destroy()}else if(t.remove){t.remove();t.isDestroyed=true}},attachView:function(t){this.currentView=t;return this},hasView:function(){return!!this.currentView},reset:function(){this.empty();if(this.$el){this.el=this.$el.selector}delete this.$el;return this}},{buildRegion:function(t,e){if(i.isString(t)){return this._buildRegionFromSelector(t,e)}if(t.selector||t.el||t.regionClass){return this._buildRegionFromObject(t,e)}if(i.isFunction(t)){return this._buildRegionFromRegionClass(t)}throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(t,e){return new e({el:t})},_buildRegionFromObject:function(t,e){var n=t.regionClass||e;var r=i.omit(t,"selector","regionClass");if(t.selector&&!r.el){r.el=t.selector}return new n(r)},_buildRegionFromRegionClass:function(t){return new t}});o.RegionManager=o.Controller.extend({constructor:function(t){this._regions={};this.length=0;o.Controller.call(this,t);this.addRegions(this.getOption("regions"))},addRegions:function(t,e){t=o._getValue(t,this,arguments);return i.reduce(t,function(t,n,r){if(i.isString(n)){n={selector:n}}if(n.selector){n=i.defaults({},n,e)}t[r]=this.addRegion(r,n);return t},{},this)},addRegion:function(t,e){var i;if(e instanceof o.Region){i=e}else{i=o.Region.buildRegion(e,o.Region)}this.triggerMethod("before:add:region",t,i);i._parent=this;this._store(t,i);this.triggerMethod("add:region",t,i);return i},get:function(t){return this._regions[t]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(t){var e=this._regions[t];this._remove(t,e);return e},removeRegions:function(){var t=this.getRegions();i.each(this._regions,function(t,e){this._remove(e,t)},this);return t},emptyRegions:function(){var t=this.getRegions();i.invoke(t,"empty");return t},destroy:function(){this.removeRegions();return o.Controller.prototype.destroy.apply(this,arguments)},_store:function(t,e){if(!this._regions[t]){this.length++}this._regions[t]=e},_remove:function(t,e){this.triggerMethod("before:remove:region",t,e);e.empty();e.stopListening();delete e._parent;delete this._regions[t];this.length--;this.triggerMethod("remove:region",t,e)}});o.actAsCollection(o.RegionManager.prototype,"_regions");o.TemplateCache=function(t){this.templateId=t};i.extend(o.TemplateCache,{templateCaches:{},get:function(t,e){var i=this.templateCaches[t];if(!i){i=new o.TemplateCache(t);this.templateCaches[t]=i}return i.load(e)},clear:function(){var t;var e=i.toArray(arguments);var n=e.length;if(n>0){for(t=0;t<n;t++){delete this.templateCaches[e[t]]}}else{this.templateCaches={}}}});i.extend(o.TemplateCache.prototype,{load:function(t){if(this.compiledTemplate){return this.compiledTemplate}var e=this.loadTemplate(this.templateId,t);this.compiledTemplate=this.compileTemplate(e,t);return this.compiledTemplate},loadTemplate:function(t,i){var n=e.$(t).html();if(!n||n.length===0){throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+t+'"'})}return n},compileTemplate:function(t,e){return i.template(t,e)}});o.Renderer={render:function(t,e){if(!t){throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."})}var n=i.isFunction(t)?t:o.TemplateCache.get(t);return n(e)}};o.View=e.View.extend({isDestroyed:false,constructor:function(t){i.bindAll(this,"render");t=o._getValue(t,this);this.options=i.extend({},i.result(this,"options"),t);this._behaviors=o.Behaviors(this);e.View.call(this,this.options);o.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(t){return t.toJSON.apply(t,i.rest(arguments))},mixinTemplateHelpers:function(t){t=t||{};var e=this.getOption("templateHelpers");e=o._getValue(e,this);return i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"_uiBindings");return o.normalizeUIKeys(t,e||i.result(this,"ui"))},normalizeUIValues:function(t,e){var n=i.result(this,"ui");var r=i.result(this,"_uiBindings");return o.normalizeUIValues(t,r||n,e)},configureTriggers:function(){if(!this.triggers){return}var t=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(t,function(t,e,i){t[i]=this._buildViewTrigger(e);return t},{},this)},delegateEvents:function(t){this._delegateDOMEvents(t);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));i.each(this._behaviors,function(t){t.bindEntityEvents(this.model,t.getOption("modelEvents"));t.bindEntityEvents(this.collection,t.getOption("collectionEvents"))},this);return this},_delegateDOMEvents:function(t){var n=o._getValue(t||this.events,this);n=this.normalizeUIKeys(n);if(i.isUndefined(t)){this.events=n}var r={};var s=i.result(this,"behaviorEvents")||{};var a=this.configureTriggers();var u=i.result(this,"behaviorTriggers")||{};i.extend(r,s,n,a,u);e.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){e.View.prototype.undelegateEvents.apply(this,arguments);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));i.each(this._behaviors,function(t){t.unbindEntityEvents(this.model,t.getOption("modelEvents"));t.unbindEntityEvents(this.collection,t.getOption("collectionEvents"))},this);return this},_ensureViewIsIntact:function(){if(this.isDestroyed){throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})}},destroy:function(){if(this.isDestroyed){return this}var t=i.toArray(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(t));this.isDestroyed=true;this.triggerMethod.apply(this,["destroy"].concat(t));this.unbindUIElements();this.isRendered=false;this.remove();i.invoke(this._behaviors,"destroy",t);return this},bindUIElements:function(){this._bindUIElements();i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(!this.ui){return}if(!this._uiBindings){this._uiBindings=this.ui}var t=i.result(this,"_uiBindings");this.ui={};i.each(t,function(t,e){this.ui[e]=this.$(t)},this)},unbindUIElements:function(){this._unbindUIElements();i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){if(!this.ui||!this._uiBindings){return}i.each(this.ui,function(t,e){delete this.ui[e]},this);this.ui=this._uiBindings;delete this._uiBindings},_buildViewTrigger:function(t){var e=i.isObject(t);var n=i.defaults({},e?t:{},{preventDefault:true,stopPropagation:true});var r=e?n.event:t;return function(t){if(t){if(t.preventDefault&&n.preventDefault){t.preventDefault()}if(t.stopPropagation&&n.stopPropagation){t.stopPropagation()}}var e={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,e)}},setElement:function(){var t=e.View.prototype.setElement.apply(this,arguments);i.invoke(this._behaviors,"proxyViewProperties",this);return t},triggerMethod:function(){var t=o._triggerMethod(this,arguments);this._triggerEventOnBehaviors(arguments);this._triggerEventOnParentLayout(arguments[0],i.rest(arguments));return t},_triggerEventOnBehaviors:function(t){var e=o._triggerMethod;var i=this._behaviors;for(var n=0,r=i&&i.length;n<r;n++){e(i[n],t)}},_triggerEventOnParentLayout:function(t,e){var n=this._parentLayoutView();if(!n){return}var r=o.getOption(n,"childViewEventPrefix");var s=r+":"+t;o._triggerMethod(n,[s,this].concat(e));var a=o.getOption(n,"childEvents");var u=n.normalizeMethods(a);if(!!u&&i.isFunction(u[t])){u[t].apply(n,[this].concat(e))}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var t=this._getImmediateChildren();if(!t.length){return t}return i.reduce(t,function(t,e){if(!e._getNestedViews){return t}return t.concat(e._getNestedViews())},t)},_getAncestors:function(){var t=[];var e=this._parent;while(e){t.push(e);e=e._parent}return t},_parentLayoutView:function(){var t=this._getAncestors();return i.find(t,function(t){return t instanceof o.LayoutView})},normalizeMethods:o.normalizeMethods,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents});o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection){return{}}var t=[this.model||this.collection];if(arguments.length){t.push.apply(t,arguments)}if(this.model){return this.serializeModel.apply(this,t)}else{return{items:this.serializeCollection.apply(this,t)}}},serializeCollection:function(t){return t.toJSON.apply(t,i.rest(arguments))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.isRendered=true;this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var t=this.getTemplate();if(t===false){return}if(!t){throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."})}var e=this.mixinTemplateHelpers(this.serializeData());var i=o.Renderer.render(t,e,this);this.attachElContent(i);return this},attachElContent:function(t){this.$el.html(t);return this}});o.CollectionView=o.View.extend({childViewEventPrefix:"childview",sort:true,constructor:function(t){this.once("render",this._initialEvents);this._initChildViewStorage();o.View.apply(this,arguments);this.on("show",this._onShowCalled);this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=true},endBuffering:function(){this.isBuffering=false;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){if(this._isShown){i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"before:show"))}},_triggerShowBufferedChildren:function(){if(this._isShown){i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"show"));this._bufferedChildren=[]}},_triggerMethodOnChild:function(t,e){o.triggerMethodOn(e,t)},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this._onCollectionAdd);this.listenTo(this.collection,"remove",this._onCollectionRemove);this.listenTo(this.collection,"reset",this.render);if(this.getOption("sort")){this.listenTo(this.collection,"sort",this._sortViews)}}},_onCollectionAdd:function(t,e,n){var r;if(n.at!==undefined){r=n.at}else{r=i.indexOf(this._filteredSortedModels(),t)}if(this._shouldAddChild(t,r)){this.destroyEmptyView();var o=this.getChildView(t);this.addChild(t,o,r)}},_onCollectionRemove:function(t){var e=this.children.findByModel(t);this.removeChildView(e);this.checkEmpty()},_onShowCalled:function(){this.children.each(i.partial(this._triggerMethodOnChild,"show"))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.isRendered=true;this.triggerMethod("render",this);return this},reorder:function(){var t=this.children;var e=this._filteredSortedModels();var n=i.find(e,function(e){return!t.findByModel(e)});if(n){this.render()}else{var r=i.map(e,function(e){return t.findByModel(e).el});this.triggerMethod("before:reorder");this._appendReorderedChildren(r);this.triggerMethod("reorder")}},resortView:function(){if(o.getOption(this,"reorderOnSort")){this.reorder()}else{this.render()}},_sortViews:function(){var t=this._filteredSortedModels();var e=i.find(t,function(t,e){var i=this.children.findByModel(t);return!i||i._index!==e},this);if(e){this.resortView()}},_emptyViewIndex:-1,_appendReorderedChildren:function(t){this.$el.append(t)},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();if(this.isEmpty(this.collection)){this.showEmptyView()}else{this.triggerMethod("before:render:collection",this);this.startBuffering();this.showCollection();this.endBuffering();this.triggerMethod("render:collection",this);if(this.children.isEmpty()){this.showEmptyView()}}},showCollection:function(){var t;var e=this._filteredSortedModels();i.each(e,function(e,i){t=this.getChildView(e);this.addChild(e,t,i)},this)},_filteredSortedModels:function(){var t;var e=this.getViewComparator();if(e){if(i.isString(e)||e.length===1){t=this.collection.sortBy(e,this)}else{t=i.clone(this.collection.models).sort(i.bind(e,this))}}else{t=this.collection.models}if(this.getOption("filter")){t=i.filter(t,function(t,e){return this._shouldAddChild(t,e)},this)}return t},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=true;var i=new e.Model;this.addEmptyView(i,t);this.triggerMethod("render:empty")}},destroyEmptyView:function(){if(this._showingEmptyView){this.triggerMethod("before:remove:empty");this.destroyChildren();delete this._showingEmptyView;this.triggerMethod("remove:empty")}},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(t,e){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");if(i.isFunction(n)){n=n.call(this,t,this._emptyViewIndex)}var r=this.buildChildView(t,e,n);r._parent=this;this.proxyChildEvents(r);if(this._isShown){o.triggerMethodOn(r,"before:show")}this.children.add(r);this.renderChildView(r,this._emptyViewIndex);if(this._isShown){o.triggerMethodOn(r,"show")}},getChildView:function(t){var e=this.getOption("childView");if(!e){throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'})}return e},addChild:function(t,e,i){var n=this.getOption("childViewOptions");n=o._getValue(n,this,[t,i]);var r=this.buildChildView(t,e,n);this._updateIndices(r,true,i);this._addChildView(r,i);r._parent=this;return r},_updateIndices:function(t,e,i){if(!this.getOption("sort")){return}if(e){t._index=i}this.children.each(function(i){if(i._index>=t._index){i._index+=e?1:-1}})},_addChildView:function(t,e){this.proxyChildEvents(t);this.triggerMethod("before:add:child",t);if(this._isShown&&!this.isBuffering){o.triggerMethodOn(t,"before:show")}this.children.add(t);this.renderChildView(t,e);if(this._isShown&&!this.isBuffering){o.triggerMethodOn(t,"show")}this.triggerMethod("add:child",t)},renderChildView:function(t,e){t.render();this.attachHtml(this,t,e);return t},buildChildView:function(t,e,n){var r=i.extend({model:t},n);return new e(r)},removeChildView:function(t){if(t){this.triggerMethod("before:remove:child",t);if(t.destroy){t.destroy()}else if(t.remove){t.remove()}delete t._parent;this.stopListening(t);this.children.remove(t);this.triggerMethod("remove:child",t);this._updateIndices(t,false)}return t},isEmpty:function(){return!this.collection||this.collection.length===0},checkEmpty:function(){if(this.isEmpty(this.collection)){this.showEmptyView()}},attachBuffer:function(t){t.$el.append(this._createBuffer(t))},_createBuffer:function(t){var e=document.createDocumentFragment();i.each(t._bufferedChildren,function(t){e.appendChild(t.el)});return e},attachHtml:function(t,e,i){if(t.isBuffering){t._bufferedChildren.splice(i,0,e)}else{if(!t._insertBefore(e,i)){t._insertAfter(e)}}},_insertBefore:function(t,e){var i;var n=this.getOption("sort")&&e<this.children.length-1;if(n){i=this.children.find(function(t){return t._index===e+1})}if(i){i.$el.before(t.el);return true}return false},_insertAfter:function(t){this.$el.append(t.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},destroy:function(){if(this.isDestroyed){return this}this.triggerMethod("before:destroy:collection");this.destroyChildren();this.triggerMethod("destroy:collection");return o.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var t=this.children.map(i.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return t},_shouldAddChild:function(t,e){var n=this.getOption("filter");return!i.isFunction(n)||n.call(this,t,e,this.collection)},proxyChildEvents:function(t){var e=this.getOption("childViewEventPrefix");this.listenTo(t,"all",function(){var n=i.toArray(arguments);var r=n[0];var o=this.normalizeMethods(i.result(this,"childEvents"));n[0]=e+":"+r;n.splice(1,0,t);if(typeof o!=="undefined"&&i.isFunction(o[r])){o[r].apply(this,n.slice(1))}this.triggerMethod.apply(this,n)})},_getImmediateChildren:function(){return i.values(this.children._views)},getViewComparator:function(){return this.getOption("viewComparator")}});o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this._onCollectionAdd);this.listenTo(this.collection,"remove",this._onCollectionRemove);this.listenTo(this.collection,"reset",this._renderChildren);if(this.getOption("sort")){this.listenTo(this.collection,"sort",this._sortViews)}}},getChildView:function(t){var e=this.getOption("childView")||this.constructor;return e},serializeData:function(){var t={};if(this.model){t=i.partial(this.serializeModel,this.model).apply(this,arguments)}return t},render:function(){this._ensureViewIsIntact();this._isRendering=true;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this._renderChildren();this._isRendering=false;this.isRendered=true;this.triggerMethod("render",this);return this},_renderChildren:function(){if(this.isRendered||this._isRendering){o.CollectionView.prototype._renderChildren.call(this)}},_renderTemplate:function(){var t={};t=this.serializeData();t=this.mixinTemplateHelpers(t);this.triggerMethod("before:render:template");var e=this.getTemplate();var i=o.Renderer.render(e,t,this);this.attachElContent(i);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(t){this.$el.html(t);return this},attachBuffer:function(t){var e=this.getChildViewContainer(t);e.append(this._createBuffer(t))},_insertAfter:function(t){var e=this.getChildViewContainer(this,t);e.append(t.el)},_appendReorderedChildren:function(t){var e=this.getChildViewContainer(this);
e.append(t)},getChildViewContainer:function(t,e){if("$childViewContainer"in t){return t.$childViewContainer}var i;var n=o.getOption(t,"childViewContainer");if(n){var r=o._getValue(n,t);if(r.charAt(0)==="@"&&t.ui){i=t.ui[r.substr(4)]}else{i=t.$(r)}if(i.length<=0){throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+t.childViewContainer})}}else{i=t.$el}t.$childViewContainer=i;return i},resetChildViewContainer:function(){if(this.$childViewContainer){delete this.$childViewContainer}}});o.LayoutView=o.ItemView.extend({regionClass:o.Region,options:{destroyImmediate:false},childViewEventPrefix:"childview",constructor:function(t){t=t||{};this._firstRender=true;this._initializeRegions(t);o.ItemView.call(this,t)},render:function(){this._ensureViewIsIntact();if(this._firstRender){this._firstRender=false}else{this._reInitializeRegions()}return o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed){return this}if(this.getOption("destroyImmediate")===true){this.$el.remove()}this.regionManager.destroy();return o.ItemView.prototype.destroy.apply(this,arguments)},showChildView:function(t,e){return this.getRegion(t).show(e)},getChildView:function(t){return this.getRegion(t).currentView},addRegion:function(t,e){var i={};i[t]=e;return this._buildRegions(i)[t]},addRegions:function(t){this.regions=i.extend({},this.regions,t);return this._buildRegions(t)},removeRegion:function(t){delete this.regions[t];return this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(t){var e={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(t,e)},_initializeRegions:function(t){var e;this._initRegionManager();e=o._getValue(this.regions,this,[t])||{};var n=this.getOption.call(t,"regions");n=o._getValue(n,this,[t]);i.extend(e,n);e=this.normalizeUIValues(e,["selector","el"]);this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.regionManager._parent=this;this.listenTo(this.regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)});this.listenTo(this.regionManager,"add:region",function(t,e){this[t]=e;this.triggerMethod("add:region",t,e)});this.listenTo(this.regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)});this.listenTo(this.regionManager,"remove:region",function(t,e){delete this[t];this.triggerMethod("remove:region",t,e)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}});o.Behavior=o.Object.extend({constructor:function(t,e){this.view=e;this.defaults=i.result(this,"defaults")||{};this.options=i.extend({},this.defaults,t);this.ui=i.extend({},i.result(e,"ui"),i.result(this,"ui"));o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening();return this},proxyViewProperties:function(t){this.$el=t.$el;this.el=t.el}});o.Behaviors=function(t,e){var i=/^(\S+)\s*(.*)$/;function n(t,i){if(!e.isObject(t.behaviors)){return{}}i=n.parseBehaviors(t,i||e.result(t,"behaviors"));n.wrap(t,i,e.keys(r));return i}var r={behaviorTriggers:function(t,e){var i=new o(this,e);return i.buildBehaviorTriggers()},behaviorEvents:function(n,r){var o={};e.each(r,function(n,r){var a={};var u=e.clone(e.result(n,"events"))||{};u=t.normalizeUIKeys(u,s(n));var l=0;e.each(u,function(t,o){var s=o.match(i);var u=s[1]+"."+[this.cid,r,l++," "].join("");var h=s[2];var c=u+h;var f=e.isFunction(t)?t:n[t];a[c]=e.bind(f,n)},this);o=e.extend(o,a)},this);return o}};e.extend(n,{behaviorsLookup:function(){throw new t.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(e,i){if(e.behaviorClass){return e.behaviorClass}return t._getValue(n.behaviorsLookup,this,[e,i])[i]},parseBehaviors:function(t,i){return e.chain(i).map(function(i,r){var o=n.getBehaviorClass(i,r);var s=new o(i,t);var a=n.parseBehaviors(t,e.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(t,i,n){e.each(n,function(n){t[n]=e.partial(r[n],t[n],i)})}});function o(t,e){this._view=t;this._behaviors=e;this._triggers={}}e.extend(o.prototype,{buildBehaviorTriggers:function(){e.each(this._behaviors,this._buildTriggerHandlersForBehavior,this);return this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var r=e.clone(e.result(i,"triggers"))||{};r=t.normalizeUIKeys(r,s(i));e.each(r,e.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(t,e,i,n){var r=n.replace(/^\S+/,function(t){return t+"."+"behaviortriggers"+e});this._triggers[r]=this._view._buildViewTrigger(i)}});function s(t){return t._uiBindings||t.ui}return n}(o,i);o.AppRouter=e.Router.extend({constructor:function(t){this.options=t||{};e.Router.apply(this,arguments);var i=this.getOption("appRoutes");var n=this._getController();this.processAppRoutes(n,i);this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[t];this.onRoute(t,n,e)}},processAppRoutes:function(t,e){if(!e){return}var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)},_getController:function(){return this.getOption("controller")},_addAppRoute:function(t,e,n){var r=t[n];if(!r){throw new o.Error('Method "'+n+'" was not found on the controller')}this.route(e,n,i.bind(r,t))},mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents});o.Application=o.Object.extend({constructor:function(t){this._initializeRegions(t);this._initCallbacks=new o.Callbacks;this.submodules={};i.extend(this,t);this._initChannel();o.Object.call(this,t)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("before:start",t);this._initCallbacks.run(t,this);this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(t){return this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},getRegions:function(){return this._regionManager.getRegions()},module:function(t,e){var n=o.Module.getClass(e);var r=i.toArray(arguments);r.unshift(this);return n.create.apply(n,r)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(t){var e=i.isFunction(this.regions)?this.regions(t):this.regions||{};this._initRegionManager();var n=o.getOption(t,"regions");if(i.isFunction(n)){n=n.call(this,t)}i.extend(e,n);this.addRegions(e);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this._regionManager._parent=this;this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)});this.listenTo(this._regionManager,"add:region",function(t,e){this[t]=e;o._triggerMethod(this,"add:region",arguments)});this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)});this.listenTo(this._regionManager,"remove:region",function(t){delete this[t];o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global";this.channel=i.result(this,"channel")||e.Wreqr.radio.channel(this.channelName);this.vent=i.result(this,"vent")||this.channel.vent;this.commands=i.result(this,"commands")||this.channel.commands;this.reqres=i.result(this,"reqres")||this.channel.reqres}});o.Module=function(t,e,n){this.moduleName=t;this.options=i.extend({},this.options,n);this.initialize=n.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=e;if(i.isFunction(this.initialize)){this.initialize(t,e,this.options)}};o.Module.extend=o.extend;i.extend(o.Module.prototype,e.Events,{startWithParent:true,initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){if(this._isInitialized){return}i.each(this.submodules,function(e){if(e.startWithParent){e.start(t)}});this.triggerMethod("before:start",t);this._initializerCallbacks.run(t,this);this._isInitialized=true;this.triggerMethod("start",t)},stop:function(){if(!this._isInitialized){return}this._isInitialized=false;this.triggerMethod("before:stop");i.invoke(this.submodules,"stop");this._finalizerCallbacks.run(undefined,this);this._initializerCallbacks.reset();this._finalizerCallbacks.reset();this.triggerMethod("stop")},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(!t){return}var r=i.flatten([this,this.app,e,o,e.$,i,n]);t.apply(this,r)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks;this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod});i.extend(o.Module,{create:function(t,e,n){var r=t;var o=i.drop(arguments,3);e=e.split(".");var s=e.length;var a=[];a[s-1]=n;i.each(e,function(e,i){var s=r;r=this._getModule(s,e,t,n);this._addModuleDefinition(s,r,a[i],o)},this);return r},_getModule:function(t,e,n,r,o){var s=i.extend({},r);var a=this.getClass(r);var u=t[e];if(!u){u=new a(e,n,s);t[e]=u;t.submodules[e]=u}return u},getClass:function(t){var e=o.Module;if(!t){return e}if(t.prototype instanceof e){return t}return t.moduleClass||e},_addModuleDefinition:function(t,e,i,n){var r=this._getDefine(i);var o=this._getStartWithParent(i,e);if(r){e.addDefinition(r,n)}this._addStartWithParent(t,e,o)},_getStartWithParent:function(t,e){var n;if(i.isFunction(t)&&t.prototype instanceof o.Module){n=e.constructor.prototype.startWithParent;return i.isUndefined(n)?true:n}if(i.isObject(t)){n=t.startWithParent;return i.isUndefined(n)?true:n}return true},_getDefine:function(t){if(i.isFunction(t)&&!(t.prototype instanceof o.Module)){return t}if(i.isObject(t)){return t.define}return null},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i;if(!e.startWithParent||!!e.startWithParentIsConfigured){return}e.startWithParentIsConfigured=true;t.addInitializer(function(t){if(e.startWithParent){e.start(t)}})}});return o})},{backbone:26,"backbone.babysitter":21,"backbone.wreqr":22,underscore:23}],21:[function(t,e,i){(function(n,r){if(typeof define==="function"&&define.amd){define(["backbone","underscore"],function(t,e){return r(t,e)})}else if(typeof i!=="undefined"){var o=t("backbone");var s=t("underscore");e.exports=r(o,s)}else{r(n.Backbone,n._)}})(this,function(t,e){"use strict";var i=t.ChildViewContainer;t.ChildViewContainer=function(t,e){var i=function(t){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;this._views[i]=t;if(t.model){this._indexByModel[t.model.cid]=i}if(e){this._indexByCustom[e]=i}this._updateLength();return this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;if(t.model){delete this._indexByModel[t.model.cid]}e.any(this._indexByCustom,function(t,e){if(t===i){delete this._indexByCustom[e];return true}},this);delete this._views[i];this._updateLength();return this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){if(e.isFunction(n[t])){n[t].apply(n,i||[])}})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views);var n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}});return i}(t,e);t.ChildViewContainer.VERSION="0.1.6";t.ChildViewContainer.noConflict=function(){t.ChildViewContainer=i;return this};return t.ChildViewContainer})},{backbone:26,underscore:23}],22:[function(t,e,i){(function(n,r){if(typeof define==="function"&&define.amd){define(["backbone","underscore"],function(t,e){return r(t,e)})}else if(typeof i!=="undefined"){var o=t("backbone");var s=t("underscore");e.exports=r(o,s)}else{r(n.Backbone,n._)}})(this,function(t,e){"use strict";var i=t.Wreqr;var n=t.Wreqr={};t.Wreqr.VERSION="1.3.1";t.Wreqr.noConflict=function(){t.Wreqr=i;return this};n.Handlers=function(t,e){"use strict";var i=function(t){this.options=t;this._wreqrHandlers={};if(e.isFunction(this.initialize)){this.initialize(t)}};i.extend=t.Model.extend;e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,i){var n=null;if(e.isObject(t)&&!e.isFunction(t)){n=t.context;t=t.callback}this.setHandler(i,t,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n;this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(!e){return}return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}});return i}(t,e);n.CommandStorage=function(){"use strict";var i=function(t){this.options=t;this._commands={};if(e.isFunction(this.initialize)){this.initialize(t)}};e.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];if(!e){e={command:t,instances:[]};this._commands[t]=e}return e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}});return i}();n.Commands=function(t){"use strict";return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,i)},execute:function(t,e){t=arguments[0];e=Array.prototype.slice.call(arguments,1);if(this.hasHandler(t)){this.getHandler(t).apply(this,e)}else{this.storage.addCommand(t,e)}},_executeCommands:function(t,i,n){var r=this.storage.getCommands(t);e.each(r.instances,function(t){i.apply(n,t)});this.storage.clearCommands(t)},_initializeStorage:function(t){var i;var n=t.storageType||this.storageType;if(e.isFunction(n)){i=new n}else{i=n}this.storage=i}})}(n);n.RequestResponse=function(t){"use strict";return t.Handlers.extend({request:function(){var t=arguments[0];var e=Array.prototype.slice.call(arguments,1);if(this.hasHandler(t)){return this.getHandler(t).apply(this,e)}}})}(n);n.EventAggregator=function(t,e){"use strict";var i=function(){};i.extend=t.Model.extend;e.extend(i.prototype,t.Events);return i}(t,e);n.Channel=function(i){"use strict";var n=function(e){this.vent=new t.Wreqr.EventAggregator;this.reqres=new t.Wreqr.RequestResponse;this.commands=new t.Wreqr.Commands;this.channelName=e};e.extend(n.prototype,{reset:function(){this.vent.off();this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(t,e){this._connect("vent",t,e);return this},connectCommands:function(t,e){this._connect("commands",t,e);return this},connectRequests:function(t,e){this._connect("reqres",t,e);return this},_connect:function(t,i,n){if(!i){return}n=n||this;var r=t==="vent"?"on":"setHandler";e.each(i,function(i,o){this[t][r](o,e.bind(i,n))},this)}});return n}(n);n.radio=function(t){"use strict";var i=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods()};e.extend(i.prototype,{channel:function(t){if(!t){throw new Error("Channel must receive a name")}return this._getChannel(t)},_getChannel:function(e){var i=this._channels[e];if(!i){i=new t.Channel(e);this._channels[e]=i}return i},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(n[t],function(e){this[t][e]=r(this,t,e)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]};var r=function(t,e,i){return function(n){var r=t._getChannel(n)[e];var o=Array.prototype.slice.call(arguments,1);return r[i].apply(r,o)}};return new i}(n);return t.Wreqr})},{backbone:26,underscore:23}],23:[function(t,e,i){(function(){var t=this;var n=t._;var r={};var o=Array.prototype,s=Object.prototype,a=Function.prototype;var u=o.push,l=o.slice,h=o.concat,c=s.toString,f=s.hasOwnProperty;var d=o.forEach,p=o.map,g=o.reduce,m=o.reduceRight,v=o.filter,_=o.every,y=o.some,b=o.indexOf,w=o.lastIndexOf,x=Array.isArray,C=Object.keys,L=a.bind;var E=function(t){if(t instanceof E)return t;if(!(this instanceof E))return new E(t);this._wrapped=t};if(typeof i!=="undefined"){if(typeof e!=="undefined"&&e.exports){i=e.exports=E}i._=E}else{t._=E}E.VERSION="1.6.0";var M=E.each=E.forEach=function(t,e,i){if(t==null)return t;if(d&&t.forEach===d){t.forEach(e,i)}else if(t.length===+t.length){for(var n=0,o=t.length;n<o;n++){if(e.call(i,t[n],n,t)===r)return}}else{var s=E.keys(t);for(var n=0,o=s.length;n<o;n++){if(e.call(i,t[s[n]],s[n],t)===r)return}}return t};E.map=E.collect=function(t,e,i){var n=[];if(t==null)return n;if(p&&t.map===p)return t.map(e,i);M(t,function(t,r,o){n.push(e.call(i,t,r,o))});return n};var P="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(t,e,i,n){var r=arguments.length>2;if(t==null)t=[];if(g&&t.reduce===g){if(n)e=E.bind(e,n);return r?t.reduce(e,i):t.reduce(e)}M(t,function(t,o,s){if(!r){i=t;r=true}else{i=e.call(n,i,t,o,s)}});if(!r)throw new TypeError(P);return i};E.reduceRight=E.foldr=function(t,e,i,n){var r=arguments.length>2;if(t==null)t=[];if(m&&t.reduceRight===m){if(n)e=E.bind(e,n);return r?t.reduceRight(e,i):t.reduceRight(e)}var o=t.length;if(o!==+o){var s=E.keys(t);o=s.length}M(t,function(a,u,l){u=s?s[--o]:--o;if(!r){i=t[u];r=true}else{i=e.call(n,i,t[u],u,l)}});if(!r)throw new TypeError(P);return i};E.find=E.detect=function(t,e,i){var n;T(t,function(t,r,o){if(e.call(i,t,r,o)){n=t;return true}});return n};E.filter=E.select=function(t,e,i){var n=[];if(t==null)return n;if(v&&t.filter===v)return t.filter(e,i);M(t,function(t,r,o){if(e.call(i,t,r,o))n.push(t)});return n};E.reject=function(t,e,i){return E.filter(t,function(t,n,r){return!e.call(i,t,n,r)},i)};E.every=E.all=function(t,e,i){e||(e=E.identity);var n=true;if(t==null)return n;if(_&&t.every===_)return t.every(e,i);M(t,function(t,o,s){if(!(n=n&&e.call(i,t,o,s)))return r});return!!n};var T=E.some=E.any=function(t,e,i){e||(e=E.identity);var n=false;if(t==null)return n;if(y&&t.some===y)return t.some(e,i);M(t,function(t,o,s){if(n||(n=e.call(i,t,o,s)))return r});return!!n};E.contains=E.include=function(t,e){if(t==null)return false;if(b&&t.indexOf===b)return t.indexOf(e)!=-1;return T(t,function(t){return t===e})};E.invoke=function(t,e){var i=l.call(arguments,2);var n=E.isFunction(e);return E.map(t,function(t){return(n?e:t[e]).apply(t,i)})};E.pluck=function(t,e){return E.map(t,E.property(e))};E.where=function(t,e){return E.filter(t,E.matches(e))};E.findWhere=function(t,e){return E.find(t,E.matches(e))};E.max=function(t,e,i){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535){return Math.max.apply(Math,t)}var n=-Infinity,r=-Infinity;M(t,function(t,o,s){var a=e?e.call(i,t,o,s):t;if(a>r){n=t;r=a}});return n};E.min=function(t,e,i){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535){return Math.min.apply(Math,t)}var n=Infinity,r=Infinity;M(t,function(t,o,s){var a=e?e.call(i,t,o,s):t;if(a<r){n=t;r=a}});return n};E.shuffle=function(t){var e;var i=0;var n=[];M(t,function(t){e=E.random(i++);n[i-1]=n[e];n[e]=t});return n};E.sample=function(t,e,i){if(e==null||i){if(t.length!==+t.length)t=E.values(t);return t[E.random(t.length-1)]}return E.shuffle(t).slice(0,Math.max(0,e))};var k=function(t){if(t==null)return E.identity;if(E.isFunction(t))return t;return E.property(t)};E.sortBy=function(t,e,i){e=k(e);return E.pluck(E.map(t,function(t,n,r){return{value:t,index:n,criteria:e.call(i,t,n,r)}}).sort(function(t,e){var i=t.criteria;var n=e.criteria;if(i!==n){if(i>n||i===void 0)return 1;if(i<n||n===void 0)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,i,n){var r={};i=k(i);M(e,function(o,s){var a=i.call(n,o,s,e);t(r,a,o)});return r}};E.groupBy=S(function(t,e,i){E.has(t,e)?t[e].push(i):t[e]=[i]});E.indexBy=S(function(t,e,i){t[e]=i});E.countBy=S(function(t,e){E.has(t,e)?t[e]++:t[e]=1});E.sortedIndex=function(t,e,i,n){i=k(i);var r=i.call(n,e);var o=0,s=t.length;while(o<s){var a=o+s>>>1;i.call(n,t[a])<r?o=a+1:s=a}return o};E.toArray=function(t){if(!t)return[];if(E.isArray(t))return l.call(t);if(t.length===+t.length)return E.map(t,E.identity);return E.values(t)};E.size=function(t){if(t==null)return 0;return t.length===+t.length?t.length:E.keys(t).length};E.first=E.head=E.take=function(t,e,i){if(t==null)return void 0;if(e==null||i)return t[0];if(e<0)return[];return l.call(t,0,e)};E.initial=function(t,e,i){return l.call(t,0,t.length-(e==null||i?1:e))};E.last=function(t,e,i){if(t==null)return void 0;if(e==null||i)return t[t.length-1];return l.call(t,Math.max(t.length-e,0))};E.rest=E.tail=E.drop=function(t,e,i){return l.call(t,e==null||i?1:e)};E.compact=function(t){return E.filter(t,E.identity)};var O=function(t,e,i){if(e&&E.every(t,E.isArray)){return h.apply(i,t)}M(t,function(t){if(E.isArray(t)||E.isArguments(t)){e?u.apply(i,t):O(t,e,i)}else{i.push(t)}});return i};E.flatten=function(t,e){return O(t,e,[])};E.without=function(t){return E.difference(t,l.call(arguments,1))};E.partition=function(t,e){var i=[],n=[];M(t,function(t){(e(t)?i:n).push(t)});return[i,n]};E.uniq=E.unique=function(t,e,i,n){if(E.isFunction(e)){n=i;i=e;e=false}var r=i?E.map(t,i,n):t;var o=[];var s=[];M(r,function(i,n){if(e?!n||s[s.length-1]!==i:!E.contains(s,i)){s.push(i);o.push(t[n])}});return o};E.union=function(){return E.uniq(E.flatten(arguments,true))};E.intersection=function(t){var e=l.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(e,function(e){return E.contains(e,t)})})};E.difference=function(t){var e=h.apply(o,l.call(arguments,1));return E.filter(t,function(t){return!E.contains(e,t)})};E.zip=function(){var t=E.max(E.pluck(arguments,"length").concat(0));var e=new Array(t);for(var i=0;i<t;i++){e[i]=E.pluck(arguments,""+i)}return e};E.object=function(t,e){if(t==null)return{};var i={};for(var n=0,r=t.length;n<r;n++){if(e){i[t[n]]=e[n]}else{i[t[n][0]]=t[n][1]}}return i};E.indexOf=function(t,e,i){if(t==null)return-1;var n=0,r=t.length;if(i){if(typeof i=="number"){n=i<0?Math.max(0,r+i):i}else{n=E.sortedIndex(t,e);return t[n]===e?n:-1}}if(b&&t.indexOf===b)return t.indexOf(e,i);for(;n<r;n++)if(t[n]===e)return n;return-1};E.lastIndexOf=function(t,e,i){if(t==null)return-1;var n=i!=null;if(w&&t.lastIndexOf===w){return n?t.lastIndexOf(e,i):t.lastIndexOf(e)}var r=n?i:t.length;while(r--)if(t[r]===e)return r;return-1};E.range=function(t,e,i){if(arguments.length<=1){e=t||0;t=0}i=arguments[2]||1;var n=Math.max(Math.ceil((e-t)/i),0);var r=0;var o=new Array(n);while(r<n){o[r++]=t;t+=i}return o};var A=function(){};E.bind=function(t,e){var i,n;if(L&&t.bind===L)return L.apply(t,l.call(arguments,1));if(!E.isFunction(t))throw new TypeError;i=l.call(arguments,2);return n=function(){if(!(this instanceof n))return t.apply(e,i.concat(l.call(arguments)));A.prototype=t.prototype;var r=new A;A.prototype=null;var o=t.apply(r,i.concat(l.call(arguments)));if(Object(o)===o)return o;return r}};E.partial=function(t){var e=l.call(arguments,1);return function(){var i=0;var n=e.slice();for(var r=0,o=n.length;r<o;r++){if(n[r]===E)n[r]=arguments[i++]}while(i<arguments.length)n.push(arguments[i++]);return t.apply(this,n)}};E.bindAll=function(t){var e=l.call(arguments,1);if(e.length===0)throw new Error("bindAll must be passed function names");M(e,function(e){t[e]=E.bind(t[e],t)});return t};E.memoize=function(t,e){var i={};e||(e=E.identity);return function(){var n=e.apply(this,arguments);return E.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}};E.delay=function(t,e){var i=l.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)};E.defer=function(t){return E.delay.apply(E,[t,1].concat(l.call(arguments,1)))};E.throttle=function(t,e,i){var n,r,o;var s=null;var a=0;i||(i={});var u=function(){a=i.leading===false?0:E.now();s=null;o=t.apply(n,r);n=r=null};return function(){var l=E.now();if(!a&&i.leading===false)a=l;var h=e-(l-a);n=this;r=arguments;if(h<=0){clearTimeout(s);s=null;a=l;o=t.apply(n,r);n=r=null}else if(!s&&i.trailing!==false){s=setTimeout(u,h)}return o}};E.debounce=function(t,e,i){var n,r,o,s,a;var u=function(){var l=E.now()-s;if(l<e){n=setTimeout(u,e-l)}else{n=null;if(!i){a=t.apply(o,r);o=r=null}}};return function(){o=this;r=arguments;s=E.now();var l=i&&!n;if(!n){n=setTimeout(u,e)}if(l){a=t.apply(o,r);o=r=null}return a}};E.once=function(t){var e=false,i;return function(){if(e)return i;e=true;i=t.apply(this,arguments);t=null;return i}};E.wrap=function(t,e){return E.partial(e,t)};E.compose=function(){var t=arguments;return function(){var e=arguments;for(var i=t.length-1;i>=0;i--){e=[t[i].apply(this,e)]}return e[0]}};E.after=function(t,e){return function(){if(--t<1){return e.apply(this,arguments)}}};E.keys=function(t){if(!E.isObject(t))return[];if(C)return C(t);var e=[];for(var i in t)if(E.has(t,i))e.push(i);return e};E.values=function(t){var e=E.keys(t);var i=e.length;var n=new Array(i);for(var r=0;r<i;r++){n[r]=t[e[r]]}return n};E.pairs=function(t){var e=E.keys(t);var i=e.length;var n=new Array(i);for(var r=0;r<i;r++){n[r]=[e[r],t[e[r]]]}return n};E.invert=function(t){var e={};var i=E.keys(t);for(var n=0,r=i.length;n<r;n++){e[t[i[n]]]=i[n]}return e};E.functions=E.methods=function(t){var e=[];for(var i in t){if(E.isFunction(t[i]))e.push(i)}return e.sort()};E.extend=function(t){M(l.call(arguments,1),function(e){if(e){for(var i in e){t[i]=e[i]}}});return t};E.pick=function(t){var e={};var i=h.apply(o,l.call(arguments,1));M(i,function(i){if(i in t)e[i]=t[i]});return e};E.omit=function(t){var e={};var i=h.apply(o,l.call(arguments,1));for(var n in t){if(!E.contains(i,n))e[n]=t[n]}return e};E.defaults=function(t){M(l.call(arguments,1),function(e){if(e){for(var i in e){if(t[i]===void 0)t[i]=e[i]}}});return t};E.clone=function(t){if(!E.isObject(t))return t;return E.isArray(t)?t.slice():E.extend({},t)};E.tap=function(t,e){e(t);return t};var D=function(t,e,i,n){if(t===e)return t!==0||1/t==1/e;if(t==null||e==null)return t===e;if(t instanceof E)t=t._wrapped;if(e instanceof E)e=e._wrapped;var r=c.call(t);if(r!=c.call(e))return false;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:t==0?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if(typeof t!="object"||typeof e!="object")return false;var o=i.length;while(o--){if(i[o]==t)return n[o]==e}var s=t.constructor,a=e.constructor;if(s!==a&&!(E.isFunction(s)&&s instanceof s&&E.isFunction(a)&&a instanceof a)&&("constructor"in t&&"constructor"in e)){return false}i.push(t);n.push(e);var u=0,l=true;if(r=="[object Array]"){u=t.length;l=u==e.length;if(l){while(u--){if(!(l=D(t[u],e[u],i,n)))break}}}else{for(var h in t){if(E.has(t,h)){u++;if(!(l=E.has(e,h)&&D(t[h],e[h],i,n)))break}}if(l){for(h in e){if(E.has(e,h)&&!u--)break}l=!u}}i.pop();n.pop();return l};E.isEqual=function(t,e){return D(t,e,[],[])};E.isEmpty=function(t){if(t==null)return true;if(E.isArray(t)||E.isString(t))return t.length===0;for(var e in t)if(E.has(t,e))return false;return true};E.isElement=function(t){return!!(t&&t.nodeType===1)};E.isArray=x||function(t){return c.call(t)=="[object Array]"};E.isObject=function(t){return t===Object(t)};M(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}});if(!E.isArguments(arguments)){E.isArguments=function(t){return!!(t&&E.has(t,"callee"))}}if(typeof/./!=="function"){E.isFunction=function(t){return typeof t==="function"}}E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))};E.isNaN=function(t){return E.isNumber(t)&&t!=+t};E.isBoolean=function(t){return t===true||t===false||c.call(t)=="[object Boolean]"};E.isNull=function(t){return t===null};E.isUndefined=function(t){return t===void 0};E.has=function(t,e){return f.call(t,e)};E.noConflict=function(){t._=n;return this};E.identity=function(t){return t};E.constant=function(t){return function(){return t}};E.property=function(t){return function(e){return e[t]}};E.matches=function(t){return function(e){if(e===t)return true;for(var i in t){if(t[i]!==e[i])return false}return true}};E.times=function(t,e,i){var n=Array(Math.max(0,t));for(var r=0;r<t;r++)n[r]=e.call(i,r);return n};E.random=function(t,e){if(e==null){e=t;t=0}return t+Math.floor(Math.random()*(e-t+1))};E.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=E.invert(I.escape);var R={escape:new RegExp("["+E.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(I.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(t){E[t]=function(e){if(e==null)return"";return(""+e).replace(R[t],function(e){return I[t][e]})}});E.result=function(t,e){if(t==null)return void 0;var i=t[e];return E.isFunction(i)?i.call(t):i};E.mixin=function(t){M(E.functions(t),function(e){var i=E[e]=t[e];E.prototype[e]=function(){var t=[this._wrapped];u.apply(t,arguments);return j.call(this,i.apply(E,t))}})};var B=0;E.uniqueId=function(t){var e=++B+"";return t?t+e:e};E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/;var z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var V=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(t,e,i){var n;i=E.defaults({},i,E.templateSettings);var r=new RegExp([(i.escape||N).source,(i.interpolate||N).source,(i.evaluate||N).source].join("|")+"|$","g");var o=0;var s="__p+='";t.replace(r,function(e,i,n,r,a){s+=t.slice(o,a).replace(V,function(t){return"\\"+z[t]});if(i){s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"}if(n){s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"}if(r){s+="';\n"+r+"\n__p+='"}o=a+e.length;return e});s+="';\n";if(!i.variable)s="with(obj||{}){\n"+s+"}\n";s="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(a){a.source=s;throw a}if(e)return n(e,E);var u=function(t){return n.call(this,t,E)};u.source="function("+(i.variable||"obj")+"){\n"+s+"}";return u};E.chain=function(t){return E(t).chain()};var j=function(t){return this._chain?E(t).chain():t};E.mixin(E);M(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];E.prototype[t]=function(){var i=this._wrapped;
e.apply(i,arguments);if((t=="shift"||t=="splice")&&i.length===0)delete i[0];return j.call(this,i)}});M(["concat","join","slice"],function(t){var e=o[t];E.prototype[t]=function(){return j.call(this,e.apply(this._wrapped,arguments))}});E.extend(E.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}});if(typeof define==="function"&&define.amd){define("underscore",[],function(){return E})}}).call(this)},{}],24:[function(t,e,i){arguments[4][22][0].apply(i,arguments)},{backbone:26,dup:22,underscore:25}],25:[function(t,e,i){arguments[4][23][0].apply(i,arguments)},{dup:23}],26:[function(t,e,i){(function(e,n){if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(t,i,r){e.Backbone=n(e,r,t,i)})}else if(typeof i!=="undefined"){var r=t("underscore");n(e,i,r)}else{e.Backbone=n(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}})(this,function(t,e,i,n){var r=t.Backbone;var o=[];var s=o.push;var a=o.slice;var u=o.splice;e.VERSION="1.1.2";e.$=n;e.noConflict=function(){t.Backbone=r;return this};e.emulateHTTP=false;e.emulateJSON=false;var l=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);n.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var r=this;var o=i.once(function(){r.off(t,o);e.apply(this,arguments)});o._callback=e;return this.on(t,o,n)},off:function(t,e,n){var r,o,s,a,u,l,h,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n){this._events=void 0;return this}a=t?[t]:i.keys(this._events);for(u=0,l=a.length;u<l;u++){t=a[u];if(s=this._events[t]){this._events[t]=r=[];if(e||n){for(h=0,f=s.length;h<f;h++){o=s[h];if(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context){r.push(o)}}}if(!r.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t];var n=this._events.all;if(i)f(i,e);if(n)f(n,arguments);return this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var o=!e&&!n;if(!n&&typeof e==="object")n=this;if(t)(r={})[t._listenId]=t;for(var s in r){t=r[s];t.off(e,n,this);if(o||i.isEmpty(t._events))delete this._listeningTo[s]}return this}};var h=/\s+/;var c=function(t,e,i,n){if(!i)return true;if(typeof i==="object"){for(var r in i){t[e].apply(t,[r,i[r]].concat(n))}return false}if(h.test(i)){var o=i.split(h);for(var s=0,a=o.length;s<a;s++){t[e].apply(t,[o[s]].concat(n))}return false}return true};var f=function(t,e){var i,n=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:while(++n<r)(i=t[n]).callback.call(i.ctx);return;case 1:while(++n<r)(i=t[n]).callback.call(i.ctx,o);return;case 2:while(++n<r)(i=t[n]).callback.call(i.ctx,o,s);return;case 3:while(++n<r)(i=t[n]).callback.call(i.ctx,o,s,a);return;default:while(++n<r)(i=t[n]).callback.apply(i.ctx,e);return}};var d={listenTo:"on",listenToOnce:"once"};i.each(d,function(t,e){l[e]=function(e,n,r){var o=this._listeningTo||(this._listeningTo={});var s=e._listenId||(e._listenId=i.uniqueId("l"));o[s]=e;if(!r&&typeof n==="object")r=this;e[t](n,r,this);return this}});l.bind=l.on;l.unbind=l.off;i.extend(e,l);var p=e.Model=function(t,e){var n=t||{};e||(e={});this.cid=i.uniqueId("c");this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)n=this.parse(n,e)||{};n=i.defaults({},n,i.result(this,"defaults"));this.set(n,e);this.changed={};this.initialize.apply(this,arguments)};i.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,n){var r,o,s,a,u,l,h,c;if(t==null)return this;if(typeof t==="object"){o=t;n=e}else{(o={})[t]=e}n||(n={});if(!this._validate(o,n))return false;s=n.unset;u=n.silent;a=[];l=this._changing;this._changing=true;if(!l){this._previousAttributes=i.clone(this.attributes);this.changed={}}c=this.attributes,h=this._previousAttributes;if(this.idAttribute in o)this.id=o[this.idAttribute];for(r in o){e=o[r];if(!i.isEqual(c[r],e))a.push(r);if(!i.isEqual(h[r],e)){this.changed[r]=e}else{delete this.changed[r]}s?delete c[r]:c[r]=e}if(!u){if(a.length)this._pending=n;for(var f=0,d=a.length;f<d;f++){this.trigger("change:"+a[f],this,c[a[f]],n)}}if(l)return this;if(!u){while(this._pending){n=this._pending;this._pending=false;this.trigger("change",this,n)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:true}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!i.isEmpty(this.changed);return i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):false;var e,n=false;var r=this._changing?this._previousAttributes:this.attributes;for(var o in t){if(i.isEqual(r[o],e=t[o]))continue;(n||(n={}))[o]=e}return n},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var n=t.success;t.success=function(i){if(!e.set(e.parse(i,t),t))return false;if(n)n(e,i,t);e.trigger("sync",e,i,t)};V(this,t);return this.sync("read",this,t)},save:function(t,e,n){var r,o,s,a=this.attributes;if(t==null||typeof t==="object"){r=t;n=e}else{(r={})[t]=e}n=i.extend({validate:true},n);if(r&&!n.wait){if(!this.set(r,n))return false}else{if(!this._validate(r,n))return false}if(r&&n.wait){this.attributes=i.extend({},a,r)}if(n.parse===void 0)n.parse=true;var u=this;var l=n.success;n.success=function(t){u.attributes=a;var e=u.parse(t,n);if(n.wait)e=i.extend(r||{},e);if(i.isObject(e)&&!u.set(e,n)){return false}if(l)l(u,t,n);u.trigger("sync",u,t,n)};V(this,n);o=this.isNew()?"create":n.patch?"patch":"update";if(o==="patch")n.attrs=r;s=this.sync(o,this,n);if(r&&n.wait)this.attributes=a;return s},destroy:function(t){t=t?i.clone(t):{};var e=this;var n=t.success;var r=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(i){if(t.wait||e.isNew())r();if(n)n(e,i,t);if(!e.isNew())e.trigger("sync",e,i,t)};if(this.isNew()){t.success();return false}V(this,t);var o=this.sync("delete",this,t);if(!t.wait)r();return o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||z();if(this.isNew())return t;return t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;if(!n)return true;this.trigger("invalid",this,n,i.extend(e,{validationError:n}));return false}});var g=["keys","values","pairs","invert","pick","omit"];i.each(g,function(t){p.prototype[t]=function(){var e=a.call(arguments);e.unshift(this.attributes);return i[t].apply(i,e)}});var m=e.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,i.extend({silent:true},e))};var v={add:true,remove:true,merge:true};var _={add:true,remove:false};i.extend(m.prototype,l,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:false},e,_))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t);e||(e={});var r,o,s,a;for(r=0,o=t.length;r<o;r++){a=t[r]=this.get(t[r]);if(!a)continue;delete this._byId[a.id];delete this._byId[a.cid];s=this.indexOf(a);this.models.splice(s,1);this.length--;if(!e.silent){e.index=s;a.trigger("remove",a,this,e)}this._removeReference(a,e)}return n?t[0]:t},set:function(t,e){e=i.defaults({},e,v);if(e.parse)t=this.parse(t,e);var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var r,o,s,a,u,l,h;var c=e.at;var f=this.model;var d=this.comparator&&c==null&&e.sort!==false;var g=i.isString(this.comparator)?this.comparator:null;var m=[],_=[],y={};var b=e.add,w=e.merge,x=e.remove;var C=!d&&b&&x?[]:false;for(r=0,o=t.length;r<o;r++){u=t[r]||{};if(u instanceof p){s=a=u}else{s=u[f.prototype.idAttribute||"id"]}if(l=this.get(s)){if(x)y[l.cid]=true;if(w){u=u===a?a.attributes:u;if(e.parse)u=l.parse(u,e);l.set(u,e);if(d&&!h&&l.hasChanged(g))h=true}t[r]=l}else if(b){a=t[r]=this._prepareModel(u,e);if(!a)continue;m.push(a);this._addReference(a,e)}a=l||a;if(C&&(a.isNew()||!y[a.id]))C.push(a);y[a.id]=true}if(x){for(r=0,o=this.length;r<o;++r){if(!y[(a=this.models[r]).cid])_.push(a)}if(_.length)this.remove(_,e)}if(m.length||C&&C.length){if(d)h=true;this.length+=m.length;if(c!=null){for(r=0,o=m.length;r<o;r++){this.models.splice(c+r,0,m[r])}}else{if(C)this.models.length=0;var L=C||m;for(r=0,o=L.length;r<o;r++){this.models.push(L[r])}}}if(h)this.sort({silent:true});if(!e.silent){for(r=0,o=m.length;r<o;r++){(a=m[r]).trigger("add",a,this,e)}if(h||C&&C.length)this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;n<r;n++){this._removeReference(this.models[n],e)}e.previousModels=this.models;this._reset();t=this.add(t,i.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){if(i.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(i.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(i.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var n=this;t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t);if(e)e(n,i,t);n.trigger("sync",n,i,t)};V(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var n=this;var r=e.success;e.success=function(t,i){if(e.wait)n.add(t,e);if(r)r(t,i,e)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{};e.collection=this;var n=new this.model(t,e);if(!n.validationError)return n;this.trigger("invalid",this,n.validationError,e);return false},_addReference:function(t,e){this._byId[t.cid]=t;if(t.id!=null)this._byId[t.id]=t;if(!t.collection)t.collection=this;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,n);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(y,function(t){m.prototype[t]=function(){var e=a.call(arguments);e.unshift(this.models);return i[t].apply(i,e)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(t){m.prototype[t]=function(e,n){var r=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,r,n)}});var w=e.View=function(t){this.cid=i.uniqueId("view");t||(t={});i.extend(this,i.pick(t,C));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var x=/^(\S+)\s*(.*)$/;var C=["model","collection","el","id","attributes","className","tagName","events"];i.extend(w.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,i){if(this.$el)this.undelegateEvents();this.$el=t instanceof e.$?t:e.$(t);this.el=this.$el[0];if(i!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=i.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(!i.isFunction(n))n=this[t[e]];if(!n)continue;var r=e.match(x);var o=r[1],s=r[2];n=i.bind(n,this);o+=".delegateEvents"+this.cid;if(s===""){this.$el.on(o,n)}else{this.$el.on(o,s,n)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var t=i.extend({},i.result(this,"attributes"));if(this.id)t.id=i.result(this,"id");if(this.className)t["class"]=i.result(this,"className");var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,false)}else{this.setElement(i.result(this,"el"),false)}}});e.sync=function(t,n,r){var o=E[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(!r.url){s.url=i.result(n,"url")||z()}if(r.data==null&&n&&(t==="create"||t==="update"||t==="patch")){s.contentType="application/json";s.data=JSON.stringify(r.attrs||n.toJSON(r))}if(r.emulateJSON){s.contentType="application/x-www-form-urlencoded";s.data=s.data?{model:s.data}:{}}if(r.emulateHTTP&&(o==="PUT"||o==="DELETE"||o==="PATCH")){s.type="POST";if(r.emulateJSON)s.data._method=o;var a=r.beforeSend;r.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",o);if(a)return a.apply(this,arguments)}}if(s.type!=="GET"&&!r.emulateJSON){s.processData=false}if(s.type==="PATCH"&&L){s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var u=r.xhr=e.ajax(i.extend(s,r));n.trigger("request",n,u,r);return u};var L=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var M=e.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var P=/\((.*?)\)/g;var T=/(\(\?)?:\w+/g;var k=/\*\w+/g;var S=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(M.prototype,l,{initialize:function(){},route:function(t,n,r){if(!i.isRegExp(t))t=this._routeToRegExp(t);if(i.isFunction(n)){r=n;n=""}if(!r)r=this[n];var o=this;e.history.route(t,function(i){var s=o._extractParameters(t,i);o.execute(r,s);o.trigger.apply(o,["route:"+n].concat(s));o.trigger("route",n,s);e.history.trigger("route",o,n,s)});return this},execute:function(t,e){if(t)t.apply(this,e)},navigate:function(t,i){e.history.navigate(t,i);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=i.result(this,"routes");var t,e=i.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(S,"\\$&").replace(P,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(k,"([^?]*?)");return new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){if(e===n.length-1)return t||null;return t?decodeURIComponent(t):null})}});var O=e.History=function(){this.handlers=[];i.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var A=/^[#\/]|\s+$/g;var D=/^\/+|\/+$/g;var I=/msie [\w.]+/;var R=/\/$/;var B=/#.*$/;O.started=false;i.extend(O.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(R,"");if(!t.indexOf(i))t=t.slice(i.length)}else{t=this.getHash()}}return t.replace(A,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");O.started=true;this.options=i.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment();var r=document.documentMode;var o=I.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);this.root=("/"+this.root+"/").replace(D,"/");if(o&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow;this.navigate(n)}if(this._hasPushState){e.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!o){e.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else if(this._hasPushState&&this.atRoot()&&a.hash){this.fragment=this.getHash().replace(A,"");this.history.replaceState({},document.title,this.root+this.fragment)}}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);O.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return i.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!O.started)return false;if(!e||e===true)e={trigger:!!e};var i=this.root+(t=this.getFragment(t||""));t=t.replace(B,"");if(this.fragment===t)return;this.fragment=t;if(t===""&&i!=="/")i=i.slice(0,-1);if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else{t.hash="#"+e}}});e.history=new O;var N=function(t,e){var n=this;var r;if(t&&i.has(t,"constructor")){r=t.constructor}else{r=function(){return n.apply(this,arguments)}}i.extend(r,n,e);var o=function(){this.constructor=r};o.prototype=n.prototype;r.prototype=new o;if(t)i.extend(r.prototype,t);r.__super__=n.prototype;return r};p.extend=m.extend=M.extend=w.extend=O.extend=N;var z=function(){throw new Error('A "url" property or function must be specified')};var V=function(t,e){var i=e.error;e.error=function(n){if(i)i(t,n,e);t.trigger("error",t,n,e)}};return e})},{underscore:27}],27:[function(t,e,i){(function(){var t=this;var n=t._;var r=Array.prototype,o=Object.prototype,s=Function.prototype;var a=r.push,u=r.slice,l=r.concat,h=o.toString,c=o.hasOwnProperty;var f=Array.isArray,d=Object.keys,p=s.bind;var g=function(t){if(t instanceof g)return t;if(!(this instanceof g))return new g(t);this._wrapped=t};if(typeof i!=="undefined"){if(typeof e!=="undefined"&&e.exports){i=e.exports=g}i._=g}else{t._=g}g.VERSION="1.7.0";var m=function(t,e,i){if(e===void 0)return t;switch(i==null?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}};g.iteratee=function(t,e,i){if(t==null)return g.identity;if(g.isFunction(t))return m(t,e,i);if(g.isObject(t))return g.matches(t);return g.property(t)};g.each=g.forEach=function(t,e,i){if(t==null)return t;e=m(e,i);var n,r=t.length;if(r===+r){for(n=0;n<r;n++){e(t[n],n,t)}}else{var o=g.keys(t);for(n=0,r=o.length;n<r;n++){e(t[o[n]],o[n],t)}}return t};g.map=g.collect=function(t,e,i){if(t==null)return[];e=g.iteratee(e,i);var n=t.length!==+t.length&&g.keys(t),r=(n||t).length,o=Array(r),s;for(var a=0;a<r;a++){s=n?n[a]:a;o[a]=e(t[s],s,t)}return o};var v="Reduce of empty array with no initial value";g.reduce=g.foldl=g.inject=function(t,e,i,n){if(t==null)t=[];e=m(e,n,4);var r=t.length!==+t.length&&g.keys(t),o=(r||t).length,s=0,a;if(arguments.length<3){if(!o)throw new TypeError(v);i=t[r?r[s++]:s++]}for(;s<o;s++){a=r?r[s]:s;i=e(i,t[a],a,t)}return i};g.reduceRight=g.foldr=function(t,e,i,n){if(t==null)t=[];e=m(e,n,4);var r=t.length!==+t.length&&g.keys(t),o=(r||t).length,s;if(arguments.length<3){if(!o)throw new TypeError(v);i=t[r?r[--o]:--o]}while(o--){s=r?r[o]:o;i=e(i,t[s],s,t)}return i};g.find=g.detect=function(t,e,i){var n;e=g.iteratee(e,i);g.some(t,function(t,i,r){if(e(t,i,r)){n=t;return true}});return n};g.filter=g.select=function(t,e,i){var n=[];if(t==null)return n;e=g.iteratee(e,i);g.each(t,function(t,i,r){if(e(t,i,r))n.push(t)});return n};g.reject=function(t,e,i){return g.filter(t,g.negate(g.iteratee(e)),i)};g.every=g.all=function(t,e,i){if(t==null)return true;e=g.iteratee(e,i);var n=t.length!==+t.length&&g.keys(t),r=(n||t).length,o,s;for(o=0;o<r;o++){s=n?n[o]:o;if(!e(t[s],s,t))return false}return true};g.some=g.any=function(t,e,i){if(t==null)return false;e=g.iteratee(e,i);var n=t.length!==+t.length&&g.keys(t),r=(n||t).length,o,s;for(o=0;o<r;o++){s=n?n[o]:o;if(e(t[s],s,t))return true}return false};g.contains=g.include=function(t,e){if(t==null)return false;if(t.length!==+t.length)t=g.values(t);return g.indexOf(t,e)>=0};g.invoke=function(t,e){var i=u.call(arguments,2);var n=g.isFunction(e);return g.map(t,function(t){return(n?e:t[e]).apply(t,i)})};g.pluck=function(t,e){return g.map(t,g.property(e))};g.where=function(t,e){return g.filter(t,g.matches(e))};g.findWhere=function(t,e){return g.find(t,g.matches(e))};g.max=function(t,e,i){var n=-Infinity,r=-Infinity,o,s;if(e==null&&t!=null){t=t.length===+t.length?t:g.values(t);for(var a=0,u=t.length;a<u;a++){o=t[a];if(o>n){n=o}}}else{e=g.iteratee(e,i);g.each(t,function(t,i,o){s=e(t,i,o);if(s>r||s===-Infinity&&n===-Infinity){n=t;r=s}})}return n};g.min=function(t,e,i){var n=Infinity,r=Infinity,o,s;if(e==null&&t!=null){t=t.length===+t.length?t:g.values(t);for(var a=0,u=t.length;a<u;a++){o=t[a];if(o<n){n=o}}}else{e=g.iteratee(e,i);g.each(t,function(t,i,o){s=e(t,i,o);if(s<r||s===Infinity&&n===Infinity){n=t;r=s}})}return n};g.shuffle=function(t){var e=t&&t.length===+t.length?t:g.values(t);var i=e.length;var n=Array(i);for(var r=0,o;r<i;r++){o=g.random(0,r);if(o!==r)n[r]=n[o];n[o]=e[r]}return n};g.sample=function(t,e,i){if(e==null||i){if(t.length!==+t.length)t=g.values(t);return t[g.random(t.length-1)]}return g.shuffle(t).slice(0,Math.max(0,e))};g.sortBy=function(t,e,i){e=g.iteratee(e,i);return g.pluck(g.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria;var n=e.criteria;if(i!==n){if(i>n||i===void 0)return 1;if(i<n||n===void 0)return-1}return t.index-e.index}),"value")};var _=function(t){return function(e,i,n){var r={};i=g.iteratee(i,n);g.each(e,function(n,o){var s=i(n,o,e);t(r,n,s)});return r}};g.groupBy=_(function(t,e,i){if(g.has(t,i))t[i].push(e);else t[i]=[e]});g.indexBy=_(function(t,e,i){t[i]=e});g.countBy=_(function(t,e,i){if(g.has(t,i))t[i]++;else t[i]=1});g.sortedIndex=function(t,e,i,n){i=g.iteratee(i,n,1);var r=i(e);var o=0,s=t.length;while(o<s){var a=o+s>>>1;if(i(t[a])<r)o=a+1;else s=a}return o};g.toArray=function(t){if(!t)return[];if(g.isArray(t))return u.call(t);if(t.length===+t.length)return g.map(t,g.identity);return g.values(t)};g.size=function(t){if(t==null)return 0;return t.length===+t.length?t.length:g.keys(t).length};g.partition=function(t,e,i){e=g.iteratee(e,i);var n=[],r=[];g.each(t,function(t,i,o){(e(t,i,o)?n:r).push(t)});return[n,r]};g.first=g.head=g.take=function(t,e,i){if(t==null)return void 0;if(e==null||i)return t[0];if(e<0)return[];return u.call(t,0,e)};g.initial=function(t,e,i){return u.call(t,0,Math.max(0,t.length-(e==null||i?1:e)))};g.last=function(t,e,i){if(t==null)return void 0;if(e==null||i)return t[t.length-1];return u.call(t,Math.max(t.length-e,0))};g.rest=g.tail=g.drop=function(t,e,i){return u.call(t,e==null||i?1:e)};g.compact=function(t){return g.filter(t,g.identity)};var y=function(t,e,i,n){if(e&&g.every(t,g.isArray)){return l.apply(n,t)}for(var r=0,o=t.length;r<o;r++){var s=t[r];if(!g.isArray(s)&&!g.isArguments(s)){if(!i)n.push(s)}else if(e){a.apply(n,s)}else{y(s,e,i,n)}}return n};g.flatten=function(t,e){return y(t,e,false,[])};g.without=function(t){return g.difference(t,u.call(arguments,1))};g.uniq=g.unique=function(t,e,i,n){if(t==null)return[];if(!g.isBoolean(e)){n=i;i=e;e=false}if(i!=null)i=g.iteratee(i,n);var r=[];var o=[];for(var s=0,a=t.length;s<a;s++){var u=t[s];if(e){if(!s||o!==u)r.push(u);o=u}else if(i){var l=i(u,s,t);if(g.indexOf(o,l)<0){o.push(l);r.push(u)}}else if(g.indexOf(r,u)<0){r.push(u)}}return r};g.union=function(){return g.uniq(y(arguments,true,true,[]))};g.intersection=function(t){if(t==null)return[];var e=[];var i=arguments.length;for(var n=0,r=t.length;n<r;n++){var o=t[n];if(g.contains(e,o))continue;for(var s=1;s<i;s++){if(!g.contains(arguments[s],o))break}if(s===i)e.push(o)}return e};g.difference=function(t){var e=y(u.call(arguments,1),true,true,[]);return g.filter(t,function(t){return!g.contains(e,t)})};g.zip=function(t){if(t==null)return[];var e=g.max(arguments,"length").length;var i=Array(e);for(var n=0;n<e;n++){i[n]=g.pluck(arguments,n)}return i};g.object=function(t,e){if(t==null)return{};var i={};for(var n=0,r=t.length;n<r;n++){if(e){i[t[n]]=e[n]}else{i[t[n][0]]=t[n][1]}}return i};g.indexOf=function(t,e,i){if(t==null)return-1;var n=0,r=t.length;if(i){if(typeof i=="number"){n=i<0?Math.max(0,r+i):i}else{n=g.sortedIndex(t,e);return t[n]===e?n:-1}}for(;n<r;n++)if(t[n]===e)return n;return-1};g.lastIndexOf=function(t,e,i){if(t==null)return-1;var n=t.length;if(typeof i=="number"){n=i<0?n+i+1:Math.min(n,i+1)}while(--n>=0)if(t[n]===e)return n;return-1};g.range=function(t,e,i){if(arguments.length<=1){e=t||0;t=0}i=i||1;var n=Math.max(Math.ceil((e-t)/i),0);var r=Array(n);for(var o=0;o<n;o++,t+=i){r[o]=t}return r};var b=function(){};g.bind=function(t,e){var i,n;if(p&&t.bind===p)return p.apply(t,u.call(arguments,1));if(!g.isFunction(t))throw new TypeError("Bind must be called on a function");i=u.call(arguments,2);n=function(){if(!(this instanceof n))return t.apply(e,i.concat(u.call(arguments)));b.prototype=t.prototype;var r=new b;b.prototype=null;var o=t.apply(r,i.concat(u.call(arguments)));if(g.isObject(o))return o;return r};return n};g.partial=function(t){var e=u.call(arguments,1);return function(){var i=0;var n=e.slice();for(var r=0,o=n.length;r<o;r++){if(n[r]===g)n[r]=arguments[i++]}while(i<arguments.length)n.push(arguments[i++]);return t.apply(this,n)}};g.bindAll=function(t){var e,i=arguments.length,n;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++){n=arguments[e];t[n]=g.bind(t[n],t)}return t};g.memoize=function(t,e){var i=function(n){var r=i.cache;var o=e?e.apply(this,arguments):n;if(!g.has(r,o))r[o]=t.apply(this,arguments);return r[o]};i.cache={};return i};g.delay=function(t,e){var i=u.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)};g.defer=function(t){return g.delay.apply(g,[t,1].concat(u.call(arguments,1)))};g.throttle=function(t,e,i){var n,r,o;var s=null;var a=0;if(!i)i={};var u=function(){a=i.leading===false?0:g.now();s=null;o=t.apply(n,r);if(!s)n=r=null};return function(){var l=g.now();if(!a&&i.leading===false)a=l;var h=e-(l-a);n=this;r=arguments;if(h<=0||h>e){clearTimeout(s);s=null;a=l;o=t.apply(n,r);if(!s)n=r=null}else if(!s&&i.trailing!==false){s=setTimeout(u,h)}return o}};g.debounce=function(t,e,i){var n,r,o,s,a;var u=function(){var l=g.now()-s;if(l<e&&l>0){n=setTimeout(u,e-l)}else{n=null;if(!i){a=t.apply(o,r);if(!n)o=r=null}}};return function(){o=this;r=arguments;s=g.now();var l=i&&!n;if(!n)n=setTimeout(u,e);if(l){a=t.apply(o,r);o=r=null}return a}};g.wrap=function(t,e){return g.partial(e,t)};g.negate=function(t){return function(){return!t.apply(this,arguments)}};g.compose=function(){var t=arguments;var e=t.length-1;return function(){var i=e;var n=t[e].apply(this,arguments);while(i--)n=t[i].call(this,n);return n}};g.after=function(t,e){return function(){if(--t<1){return e.apply(this,arguments)}}};g.before=function(t,e){var i;return function(){if(--t>0){i=e.apply(this,arguments)}else{e=null}return i}};g.once=g.partial(g.before,2);g.keys=function(t){if(!g.isObject(t))return[];if(d)return d(t);var e=[];for(var i in t)if(g.has(t,i))e.push(i);return e};g.values=function(t){var e=g.keys(t);var i=e.length;var n=Array(i);for(var r=0;r<i;r++){n[r]=t[e[r]]}return n};g.pairs=function(t){var e=g.keys(t);var i=e.length;var n=Array(i);for(var r=0;r<i;r++){n[r]=[e[r],t[e[r]]]}return n};g.invert=function(t){var e={};var i=g.keys(t);for(var n=0,r=i.length;n<r;n++){e[t[i[n]]]=i[n]}return e};g.functions=g.methods=function(t){var e=[];for(var i in t){if(g.isFunction(t[i]))e.push(i)}return e.sort()};g.extend=function(t){if(!g.isObject(t))return t;var e,i;for(var n=1,r=arguments.length;n<r;n++){e=arguments[n];for(i in e){if(c.call(e,i)){t[i]=e[i]}}}return t};g.pick=function(t,e,i){var n={},r;if(t==null)return n;if(g.isFunction(e)){e=m(e,i);for(r in t){var o=t[r];if(e(o,r,t))n[r]=o}}else{var s=l.apply([],u.call(arguments,1));t=new Object(t);for(var a=0,h=s.length;a<h;a++){r=s[a];if(r in t)n[r]=t[r]}}return n};g.omit=function(t,e,i){if(g.isFunction(e)){e=g.negate(e)}else{var n=g.map(l.apply([],u.call(arguments,1)),String);e=function(t,e){return!g.contains(n,e)}}return g.pick(t,e,i)};g.defaults=function(t){if(!g.isObject(t))return t;for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];for(var r in n){if(t[r]===void 0)t[r]=n[r]}}return t};g.clone=function(t){if(!g.isObject(t))return t;return g.isArray(t)?t.slice():g.extend({},t)};g.tap=function(t,e){e(t);return t};var w=function(t,e,i,n){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return t===e;if(t instanceof g)t=t._wrapped;if(e instanceof g)e=e._wrapped;var r=h.call(t);if(r!==h.call(e))return false;switch(r){case"[object RegExp]":case"[object String]":return""+t===""+e;case"[object Number]":if(+t!==+t)return+e!==+e;
return+t===0?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if(typeof t!="object"||typeof e!="object")return false;var o=i.length;while(o--){if(i[o]===t)return n[o]===e}var s=t.constructor,a=e.constructor;if(s!==a&&"constructor"in t&&"constructor"in e&&!(g.isFunction(s)&&s instanceof s&&g.isFunction(a)&&a instanceof a)){return false}i.push(t);n.push(e);var u,l;if(r==="[object Array]"){u=t.length;l=u===e.length;if(l){while(u--){if(!(l=w(t[u],e[u],i,n)))break}}}else{var c=g.keys(t),f;u=c.length;l=g.keys(e).length===u;if(l){while(u--){f=c[u];if(!(l=g.has(e,f)&&w(t[f],e[f],i,n)))break}}}i.pop();n.pop();return l};g.isEqual=function(t,e){return w(t,e,[],[])};g.isEmpty=function(t){if(t==null)return true;if(g.isArray(t)||g.isString(t)||g.isArguments(t))return t.length===0;for(var e in t)if(g.has(t,e))return false;return true};g.isElement=function(t){return!!(t&&t.nodeType===1)};g.isArray=f||function(t){return h.call(t)==="[object Array]"};g.isObject=function(t){var e=typeof t;return e==="function"||e==="object"&&!!t};g.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){g["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}});if(!g.isArguments(arguments)){g.isArguments=function(t){return g.has(t,"callee")}}if(typeof/./!=="function"){g.isFunction=function(t){return typeof t=="function"||false}}g.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))};g.isNaN=function(t){return g.isNumber(t)&&t!==+t};g.isBoolean=function(t){return t===true||t===false||h.call(t)==="[object Boolean]"};g.isNull=function(t){return t===null};g.isUndefined=function(t){return t===void 0};g.has=function(t,e){return t!=null&&c.call(t,e)};g.noConflict=function(){t._=n;return this};g.identity=function(t){return t};g.constant=function(t){return function(){return t}};g.noop=function(){};g.property=function(t){return function(e){return e[t]}};g.matches=function(t){var e=g.pairs(t),i=e.length;return function(t){if(t==null)return!i;t=new Object(t);for(var n=0;n<i;n++){var r=e[n],o=r[0];if(r[1]!==t[o]||!(o in t))return false}return true}};g.times=function(t,e,i){var n=Array(Math.max(0,t));e=m(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n};g.random=function(t,e){if(e==null){e=t;t=0}return t+Math.floor(Math.random()*(e-t+1))};g.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var C=g.invert(x);var L=function(t){var e=function(e){return t[e]};var i="(?:"+g.keys(t).join("|")+")";var n=RegExp(i);var r=RegExp(i,"g");return function(t){t=t==null?"":""+t;return n.test(t)?t.replace(r,e):t}};g.escape=L(x);g.unescape=L(C);g.result=function(t,e){if(t==null)return void 0;var i=t[e];return g.isFunction(i)?t[e]():i};var E=0;g.uniqueId=function(t){var e=++E+"";return t?t+e:e};g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/;var P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var T=/\\|'|\r|\n|\u2028|\u2029/g;var k=function(t){return"\\"+P[t]};g.template=function(t,e,i){if(!e&&i)e=i;e=g.defaults({},e,g.templateSettings);var n=RegExp([(e.escape||M).source,(e.interpolate||M).source,(e.evaluate||M).source].join("|")+"|$","g");var r=0;var o="__p+='";t.replace(n,function(e,i,n,s,a){o+=t.slice(r,a).replace(T,k);r=a+e.length;if(i){o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"}else if(n){o+="'+\n((__t=("+n+"))==null?'':__t)+\n'"}else if(s){o+="';\n"+s+"\n__p+='"}return e});o+="';\n";if(!e.variable)o="with(obj||{}){\n"+o+"}\n";o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){a.source=o;throw a}var u=function(t){return s.call(this,t,g)};var l=e.variable||"obj";u.source="function("+l+"){\n"+o+"}";return u};g.chain=function(t){var e=g(t);e._chain=true;return e};var S=function(t){return this._chain?g(t).chain():t};g.mixin=function(t){g.each(g.functions(t),function(e){var i=g[e]=t[e];g.prototype[e]=function(){var t=[this._wrapped];a.apply(t,arguments);return S.call(this,i.apply(g,t))}})};g.mixin(g);g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];g.prototype[t]=function(){var i=this._wrapped;e.apply(i,arguments);if((t==="shift"||t==="splice")&&i.length===0)delete i[0];return S.call(this,i)}});g.each(["concat","join","slice"],function(t){var e=r[t];g.prototype[t]=function(){return S.call(this,e.apply(this._wrapped,arguments))}});g.prototype.value=function(){return this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return g})}}).call(this)},{}],28:[function(t,e,i){(function(t,i){if(typeof e==="object"&&typeof e.exports==="object"){e.exports=t.document?i(t,true):function(t){if(!t.document){throw new Error("jQuery requires a window with a document")}return i(t)}}else{i(t)}})(typeof window!=="undefined"?window:this,function(t,e){var i=[];var n=i.slice;var r=i.concat;var o=i.push;var s=i.indexOf;var a={};var u=a.toString;var l=a.hasOwnProperty;var h={};var c=t.document,f="2.1.3",d=function(t,e){return new d.fn.init(t,e)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g=/^-ms-/,m=/-([\da-z])/gi,v=function(t,e){return e.toUpperCase()};d.fn=d.prototype={jquery:f,constructor:d,selector:"",length:0,toArray:function(){return n.call(this)},get:function(t){return t!=null?t<0?this[t+this.length]:this[t]:n.call(this)},pushStack:function(t){var e=d.merge(this.constructor(),t);e.prevObject=this;e.context=this.context;return e},each:function(t,e){return d.each(this,t,e)},map:function(t){return this.pushStack(d.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:i.sort,splice:i.splice};d.extend=d.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,u=arguments.length,l=false;if(typeof s==="boolean"){l=s;s=arguments[a]||{};a++}if(typeof s!=="object"&&!d.isFunction(s)){s={}}if(a===u){s=this;a--}for(;a<u;a++){if((t=arguments[a])!=null){for(e in t){i=s[e];n=t[e];if(s===n){continue}if(l&&n&&(d.isPlainObject(n)||(r=d.isArray(n)))){if(r){r=false;o=i&&d.isArray(i)?i:[]}else{o=i&&d.isPlainObject(i)?i:{}}s[e]=d.extend(l,o,n)}else if(n!==undefined){s[e]=n}}}}return s};d.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:true,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return d.type(t)==="function"},isArray:Array.isArray,isWindow:function(t){return t!=null&&t===t.window},isNumeric:function(t){return!d.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){if(d.type(t)!=="object"||t.nodeType||d.isWindow(t)){return false}if(t.constructor&&!l.call(t.constructor.prototype,"isPrototypeOf")){return false}return true},isEmptyObject:function(t){var e;for(e in t){return false}return true},type:function(t){if(t==null){return t+""}return typeof t==="object"||typeof t==="function"?a[u.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=d.trim(t);if(t){if(t.indexOf("use strict")===1){e=c.createElement("script");e.text=t;c.head.appendChild(e).parentNode.removeChild(e)}else{i(t)}}},camelCase:function(t){return t.replace(g,"ms-").replace(m,v)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var n,r=0,o=t.length,s=_(t);if(i){if(s){for(;r<o;r++){n=e.apply(t[r],i);if(n===false){break}}}else{for(r in t){n=e.apply(t[r],i);if(n===false){break}}}}else{if(s){for(;r<o;r++){n=e.call(t[r],r,t[r]);if(n===false){break}}}else{for(r in t){n=e.call(t[r],r,t[r]);if(n===false){break}}}}return t},trim:function(t){return t==null?"":(t+"").replace(p,"")},makeArray:function(t,e){var i=e||[];if(t!=null){if(_(Object(t))){d.merge(i,typeof t==="string"?[t]:t)}else{o.call(i,t)}}return i},inArray:function(t,e,i){return e==null?-1:s.call(e,t,i)},merge:function(t,e){var i=+e.length,n=0,r=t.length;for(;n<i;n++){t[r++]=e[n]}t.length=r;return t},grep:function(t,e,i){var n,r=[],o=0,s=t.length,a=!i;for(;o<s;o++){n=!e(t[o],o);if(n!==a){r.push(t[o])}}return r},map:function(t,e,i){var n,o=0,s=t.length,a=_(t),u=[];if(a){for(;o<s;o++){n=e(t[o],o,i);if(n!=null){u.push(n)}}}else{for(o in t){n=e(t[o],o,i);if(n!=null){u.push(n)}}}return r.apply([],u)},guid:1,proxy:function(t,e){var i,r,o;if(typeof e==="string"){i=t[e];e=t;t=i}if(!d.isFunction(t)){return undefined}r=n.call(arguments,2);o=function(){return t.apply(e||this,r.concat(n.call(arguments)))};o.guid=t.guid=t.guid||d.guid++;return o},now:Date.now,support:h});d.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){a["[object "+e+"]"]=e.toLowerCase()});function _(t){var e=t.length,i=d.type(t);if(i==="function"||d.isWindow(t)){return false}if(t.nodeType===1&&e){return true}return i==="array"||e===0||typeof e==="number"&&e>0&&e-1 in t}var y=function(t){var e,i,n,r,o,s,a,u,l,h,c,f,d,p,g,m,v,_,y,b="sizzle"+1*new Date,w=t.document,x=0,C=0,L=ae(),E=ae(),M=ae(),P=function(t,e){if(t===e){c=true}return 0},T=1<<31,k={}.hasOwnProperty,S=[],O=S.pop,A=S.push,D=S.push,I=S.slice,R=function(t,e){var i=0,n=t.length;for(;i<n;i++){if(t[i]===e){return i}}return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",z="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",V=z.replace("w","w#"),j="\\["+N+"*("+z+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+V+"))|)"+N+"*\\]",U=":("+z+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|"+".*"+")\\)|)",F=new RegExp(N+"+","g"),H=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),q=new RegExp("^"+N+"*,"+N+"*"),Z=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),W=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),G=new RegExp(U),$=new RegExp("^"+V+"$"),J={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z.replace("w","w*")+")"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,te=/[+~]/,ee=/'|\\/g,ie=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ne=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)},re=function(){f()};try{D.apply(S=I.call(w.childNodes),w.childNodes);S[w.childNodes.length].nodeType}catch(oe){D={apply:S.length?function(t,e){A.apply(t,I.call(e))}:function(t,e){var i=t.length,n=0;while(t[i++]=e[n++]){}t.length=i-1}}}function se(t,e,n,r){var o,a,l,h,c,p,v,_,x,C;if((e?e.ownerDocument||e:w)!==d){f(e)}e=e||d;n=n||[];h=e.nodeType;if(typeof t!=="string"||!t||h!==1&&h!==9&&h!==11){return n}if(!r&&g){if(h!==11&&(o=Q.exec(t))){if(l=o[1]){if(h===9){a=e.getElementById(l);if(a&&a.parentNode){if(a.id===l){n.push(a);return n}}else{return n}}else{if(e.ownerDocument&&(a=e.ownerDocument.getElementById(l))&&y(e,a)&&a.id===l){n.push(a);return n}}}else if(o[2]){D.apply(n,e.getElementsByTagName(t));return n}else if((l=o[3])&&i.getElementsByClassName){D.apply(n,e.getElementsByClassName(l));return n}}if(i.qsa&&(!m||!m.test(t))){_=v=b;x=e;C=h!==1&&t;if(h===1&&e.nodeName.toLowerCase()!=="object"){p=s(t);if(v=e.getAttribute("id")){_=v.replace(ee,"\\$&")}else{e.setAttribute("id",_)}_="[id='"+_+"'] ";c=p.length;while(c--){p[c]=_+ve(p[c])}x=te.test(t)&&ge(e.parentNode)||e;C=p.join(",")}if(C){try{D.apply(n,x.querySelectorAll(C));return n}catch(L){}finally{if(!v){e.removeAttribute("id")}}}}}return u(t.replace(H,"$1"),e,n,r)}function ae(){var t=[];function e(i,r){if(t.push(i+" ")>n.cacheLength){delete e[t.shift()]}return e[i+" "]=r}return e}function ue(t){t[b]=true;return t}function le(t){var e=d.createElement("div");try{return!!t(e)}catch(i){return false}finally{if(e.parentNode){e.parentNode.removeChild(e)}e=null}}function he(t,e){var i=t.split("|"),r=t.length;while(r--){n.attrHandle[i[r]]=e}}function ce(t,e){var i=e&&t,n=i&&t.nodeType===1&&e.nodeType===1&&(~e.sourceIndex||T)-(~t.sourceIndex||T);if(n){return n}if(i){while(i=i.nextSibling){if(i===e){return-1}}}return t?1:-1}function fe(t){return function(e){var i=e.nodeName.toLowerCase();return i==="input"&&e.type===t}}function de(t){return function(e){var i=e.nodeName.toLowerCase();return(i==="input"||i==="button")&&e.type===t}}function pe(t){return ue(function(e){e=+e;return ue(function(i,n){var r,o=t([],i.length,e),s=o.length;while(s--){if(i[r=o[s]]){i[r]=!(n[r]=i[r])}}})})}function ge(t){return t&&typeof t.getElementsByTagName!=="undefined"&&t}i=se.support={};o=se.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?e.nodeName!=="HTML":false};f=se.setDocument=function(t){var e,r,s=t?t.ownerDocument||t:w;if(s===d||s.nodeType!==9||!s.documentElement){return d}d=s;p=s.documentElement;r=s.defaultView;if(r&&r!==r.top){if(r.addEventListener){r.addEventListener("unload",re,false)}else if(r.attachEvent){r.attachEvent("onunload",re)}}g=!o(s);i.attributes=le(function(t){t.className="i";return!t.getAttribute("className")});i.getElementsByTagName=le(function(t){t.appendChild(s.createComment(""));return!t.getElementsByTagName("*").length});i.getElementsByClassName=Y.test(s.getElementsByClassName);i.getById=le(function(t){p.appendChild(t).id=b;return!s.getElementsByName||!s.getElementsByName(b).length});if(i.getById){n.find["ID"]=function(t,e){if(typeof e.getElementById!=="undefined"&&g){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}};n.filter["ID"]=function(t){var e=t.replace(ie,ne);return function(t){return t.getAttribute("id")===e}}}else{delete n.find["ID"];n.filter["ID"]=function(t){var e=t.replace(ie,ne);return function(t){var i=typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id");return i&&i.value===e}}}n.find["TAG"]=i.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName(t)}else if(i.qsa){return e.querySelectorAll(t)}}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if(t==="*"){while(i=o[r++]){if(i.nodeType===1){n.push(i)}}return n}return o};n.find["CLASS"]=i.getElementsByClassName&&function(t,e){if(g){return e.getElementsByClassName(t)}};v=[];m=[];if(i.qsa=Y.test(s.querySelectorAll)){le(function(t){p.appendChild(t).innerHTML="<a id='"+b+"'></a>"+"<select id='"+b+"-\f]' msallowcapture=''>"+"<option selected=''></option></select>";if(t.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+N+"*(?:''|\"\")")}if(!t.querySelectorAll("[selected]").length){m.push("\\["+N+"*(?:value|"+B+")")}if(!t.querySelectorAll("[id~="+b+"-]").length){m.push("~=")}if(!t.querySelectorAll(":checked").length){m.push(":checked")}if(!t.querySelectorAll("a#"+b+"+*").length){m.push(".#.+[+~]")}});le(function(t){var e=s.createElement("input");e.setAttribute("type","hidden");t.appendChild(e).setAttribute("name","D");if(t.querySelectorAll("[name=d]").length){m.push("name"+N+"*[*^$|!~]?=")}if(!t.querySelectorAll(":enabled").length){m.push(":enabled",":disabled")}t.querySelectorAll("*,:x");m.push(",.*:")})}if(i.matchesSelector=Y.test(_=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){le(function(t){i.disconnectedMatch=_.call(t,"div");_.call(t,"[s!='']:x");v.push("!=",U)})}m=m.length&&new RegExp(m.join("|"));v=v.length&&new RegExp(v.join("|"));e=Y.test(p.compareDocumentPosition);y=e||Y.test(p.contains)?function(t,e){var i=t.nodeType===9?t.documentElement:t,n=e&&e.parentNode;return t===n||!!(n&&n.nodeType===1&&(i.contains?i.contains(n):t.compareDocumentPosition&&t.compareDocumentPosition(n)&16))}:function(t,e){if(e){while(e=e.parentNode){if(e===t){return true}}}return false};P=e?function(t,e){if(t===e){c=true;return 0}var n=!t.compareDocumentPosition-!e.compareDocumentPosition;if(n){return n}n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1;if(n&1||!i.sortDetached&&e.compareDocumentPosition(t)===n){if(t===s||t.ownerDocument===w&&y(w,t)){return-1}if(e===s||e.ownerDocument===w&&y(w,e)){return 1}return h?R(h,t)-R(h,e):0}return n&4?-1:1}:function(t,e){if(t===e){c=true;return 0}var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],u=[e];if(!r||!o){return t===s?-1:e===s?1:r?-1:o?1:h?R(h,t)-R(h,e):0}else if(r===o){return ce(t,e)}i=t;while(i=i.parentNode){a.unshift(i)}i=e;while(i=i.parentNode){u.unshift(i)}while(a[n]===u[n]){n++}return n?ce(a[n],u[n]):a[n]===w?-1:u[n]===w?1:0};return s};se.matches=function(t,e){return se(t,null,null,e)};se.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d){f(t)}e=e.replace(W,"='$1']");if(i.matchesSelector&&g&&(!v||!v.test(e))&&(!m||!m.test(e))){try{var n=_.call(t,e);if(n||i.disconnectedMatch||t.document&&t.document.nodeType!==11){return n}}catch(r){}}return se(e,d,null,[t]).length>0};se.contains=function(t,e){if((t.ownerDocument||t)!==d){f(t)}return y(t,e)};se.attr=function(t,e){if((t.ownerDocument||t)!==d){f(t)}var r=n.attrHandle[e.toLowerCase()],o=r&&k.call(n.attrHandle,e.toLowerCase())?r(t,e,!g):undefined;return o!==undefined?o:i.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null};se.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)};se.uniqueSort=function(t){var e,n=[],r=0,o=0;c=!i.detectDuplicates;h=!i.sortStable&&t.slice(0);t.sort(P);if(c){while(e=t[o++]){if(e===t[o]){r=n.push(o)}}while(r--){t.splice(n[r],1)}}h=null;return t};r=se.getText=function(t){var e,i="",n=0,o=t.nodeType;if(!o){while(e=t[n++]){i+=r(e)}}else if(o===1||o===9||o===11){if(typeof t.textContent==="string"){return t.textContent}else{for(t=t.firstChild;t;t=t.nextSibling){i+=r(t)}}}else if(o===3||o===4){return t.nodeValue}return i};n=se.selectors={cacheLength:50,createPseudo:ue,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){t[1]=t[1].replace(ie,ne);t[3]=(t[3]||t[4]||t[5]||"").replace(ie,ne);if(t[2]==="~="){t[3]=" "+t[3]+" "}return t.slice(0,4)},CHILD:function(t){t[1]=t[1].toLowerCase();if(t[1].slice(0,3)==="nth"){if(!t[3]){se.error(t[0])}t[4]=+(t[4]?t[5]+(t[6]||1):2*(t[3]==="even"||t[3]==="odd"));t[5]=+(t[7]+t[8]||t[3]==="odd")}else if(t[3]){se.error(t[0])}return t},PSEUDO:function(t){var e,i=!t[6]&&t[2];if(J["CHILD"].test(t[0])){return null}if(t[3]){t[2]=t[4]||t[5]||""}else if(i&&G.test(i)&&(e=s(i,true))&&(e=i.indexOf(")",i.length-e)-i.length)){t[0]=t[0].slice(0,e);t[2]=i.slice(0,e)}return t.slice(0,3)}},filter:{TAG:function(t){var e=t.replace(ie,ne).toLowerCase();return t==="*"?function(){return true}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=L[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&L(t,function(t){return e.test(typeof t.className==="string"&&t.className||typeof t.getAttribute!=="undefined"&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(n){var r=se.attr(n,t);if(r==null){return e==="!="}if(!e){return true}r+="";return e==="="?r===i:e==="!="?r!==i:e==="^="?i&&r.indexOf(i)===0:e==="*="?i&&r.indexOf(i)>-1:e==="$="?i&&r.slice(-i.length)===i:e==="~="?(" "+r.replace(F," ")+" ").indexOf(i)>-1:e==="|="?r===i||r.slice(0,i.length+1)===i+"-":false}},CHILD:function(t,e,i,n,r){var o=t.slice(0,3)!=="nth",s=t.slice(-4)!=="last",a=e==="of-type";return n===1&&r===0?function(t){return!!t.parentNode}:function(e,i,u){var l,h,c,f,d,p,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!u&&!a;if(m){if(o){while(g){c=e;while(c=c[g]){if(a?c.nodeName.toLowerCase()===v:c.nodeType===1){return false}}p=g=t==="only"&&!p&&"nextSibling"}return true}p=[s?m.firstChild:m.lastChild];if(s&&_){h=m[b]||(m[b]={});l=h[t]||[];d=l[0]===x&&l[1];f=l[0]===x&&l[2];c=d&&m.childNodes[d];while(c=++d&&c&&c[g]||(f=d=0)||p.pop()){if(c.nodeType===1&&++f&&c===e){h[t]=[x,d,f];break}}}else if(_&&(l=(e[b]||(e[b]={}))[t])&&l[0]===x){f=l[1]}else{while(c=++d&&c&&c[g]||(f=d=0)||p.pop()){if((a?c.nodeName.toLowerCase()===v:c.nodeType===1)&&++f){if(_){(c[b]||(c[b]={}))[t]=[x,f]}if(c===e){break}}}}f-=r;return f===n||f%n===0&&f/n>=0}}},PSEUDO:function(t,e){var i,r=n.pseudos[t]||n.setFilters[t.toLowerCase()]||se.error("unsupported pseudo: "+t);if(r[b]){return r(e)}if(r.length>1){i=[t,t,"",e];return n.setFilters.hasOwnProperty(t.toLowerCase())?ue(function(t,i){var n,o=r(t,e),s=o.length;while(s--){n=R(t,o[s]);t[n]=!(i[n]=o[s])}}):function(t){return r(t,0,i)}}return r}},pseudos:{not:ue(function(t){var e=[],i=[],n=a(t.replace(H,"$1"));return n[b]?ue(function(t,e,i,r){var o,s=n(t,null,r,[]),a=t.length;while(a--){if(o=s[a]){t[a]=!(e[a]=o)}}}):function(t,r,o){e[0]=t;n(e,null,o,i);e[0]=null;return!i.pop()}}),has:ue(function(t){return function(e){return se(t,e).length>0}}),contains:ue(function(t){t=t.replace(ie,ne);return function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}}),lang:ue(function(t){if(!$.test(t||"")){se.error("unsupported lang: "+t)}t=t.replace(ie,ne).toLowerCase();return function(e){var i;do{if(i=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){i=i.toLowerCase();return i===t||i.indexOf(t+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===false},disabled:function(t){return t.disabled===true},checked:function(t){var e=t.nodeName.toLowerCase();return e==="input"&&!!t.checked||e==="option"&&!!t.selected},selected:function(t){if(t.parentNode){t.parentNode.selectedIndex}return t.selected===true},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling){if(t.nodeType<6){return false}}return true},parent:function(t){return!n.pseudos["empty"](t)},header:function(t){return K.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return e==="input"&&t.type==="button"||e==="button"},text:function(t){var e;return t.nodeName.toLowerCase()==="input"&&t.type==="text"&&((e=t.getAttribute("type"))==null||e.toLowerCase()==="text")},first:pe(function(){return[0]}),last:pe(function(t,e){return[e-1]}),eq:pe(function(t,e,i){return[i<0?i+e:i]}),even:pe(function(t,e){var i=0;for(;i<e;i+=2){t.push(i)}return t}),odd:pe(function(t,e){var i=1;for(;i<e;i+=2){t.push(i)}return t}),lt:pe(function(t,e,i){var n=i<0?i+e:i;for(;--n>=0;){t.push(n)}return t}),gt:pe(function(t,e,i){var n=i<0?i+e:i;for(;++n<e;){t.push(n)}return t})}};n.pseudos["nth"]=n.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){n.pseudos[e]=fe(e)}for(e in{submit:true,reset:true}){n.pseudos[e]=de(e)}function me(){}me.prototype=n.filters=n.pseudos;n.setFilters=new me;s=se.tokenize=function(t,e){var i,r,o,s,a,u,l,h=E[t+" "];if(h){return e?0:h.slice(0)}a=t;u=[];l=n.preFilter;while(a){if(!i||(r=q.exec(a))){if(r){a=a.slice(r[0].length)||a}u.push(o=[])}i=false;if(r=Z.exec(a)){i=r.shift();o.push({value:i,type:r[0].replace(H," ")});a=a.slice(i.length)}for(s in n.filter){if((r=J[s].exec(a))&&(!l[s]||(r=l[s](r)))){i=r.shift();o.push({value:i,type:s,matches:r});a=a.slice(i.length)}}if(!i){break}}return e?a.length:a?se.error(t):E(t,u).slice(0)};function ve(t){var e=0,i=t.length,n="";for(;e<i;e++){n+=t[e].value}return n}function _e(t,e,i){var n=e.dir,r=i&&n==="parentNode",o=C++;return e.first?function(e,i,o){while(e=e[n]){if(e.nodeType===1||r){return t(e,i,o)}}}:function(e,i,s){var a,u,l=[x,o];if(s){while(e=e[n]){if(e.nodeType===1||r){if(t(e,i,s)){return true}}}}else{while(e=e[n]){if(e.nodeType===1||r){u=e[b]||(e[b]={});if((a=u[n])&&a[0]===x&&a[1]===o){return l[2]=a[2]}else{u[n]=l;if(l[2]=t(e,i,s)){return true}}}}}}}function ye(t){return t.length>1?function(e,i,n){var r=t.length;while(r--){if(!t[r](e,i,n)){return false}}return true}:t[0]}function be(t,e,i){var n=0,r=e.length;for(;n<r;n++){se(t,e[n],i)}return i}function we(t,e,i,n,r){var o,s=[],a=0,u=t.length,l=e!=null;for(;a<u;a++){if(o=t[a]){if(!i||i(o,n,r)){s.push(o);if(l){e.push(a)}}}}return s}function xe(t,e,i,n,r,o){if(n&&!n[b]){n=xe(n)}if(r&&!r[b]){r=xe(r,o)}return ue(function(o,s,a,u){var l,h,c,f=[],d=[],p=s.length,g=o||be(e||"*",a.nodeType?[a]:a,[]),m=t&&(o||!e)?we(g,f,t,a,u):g,v=i?r||(o?t:p||n)?[]:s:m;if(i){i(m,v,a,u)}if(n){l=we(v,d);n(l,[],a,u);h=l.length;while(h--){if(c=l[h]){v[d[h]]=!(m[d[h]]=c)}}}if(o){if(r||t){if(r){l=[];h=v.length;while(h--){if(c=v[h]){l.push(m[h]=c)}}r(null,v=[],l,u)}h=v.length;while(h--){if((c=v[h])&&(l=r?R(o,c):f[h])>-1){o[l]=!(s[l]=c)}}}}else{v=we(v===s?v.splice(p,v.length):v);if(r){r(null,s,v,u)}else{D.apply(s,v)}}})}function Ce(t){var e,i,r,o=t.length,s=n.relative[t[0].type],a=s||n.relative[" "],u=s?1:0,h=_e(function(t){return t===e},a,true),c=_e(function(t){return R(e,t)>-1},a,true),f=[function(t,i,n){var r=!s&&(n||i!==l)||((e=i).nodeType?h(t,i,n):c(t,i,n));e=null;return r}];for(;u<o;u++){if(i=n.relative[t[u].type]){f=[_e(ye(f),i)]}else{i=n.filter[t[u].type].apply(null,t[u].matches);if(i[b]){r=++u;for(;r<o;r++){if(n.relative[t[r].type]){break}}return xe(u>1&&ye(f),u>1&&ve(t.slice(0,u-1).concat({value:t[u-2].type===" "?"*":""})).replace(H,"$1"),i,u<r&&Ce(t.slice(u,r)),r<o&&Ce(t=t.slice(r)),r<o&&ve(t))}f.push(i)}}return ye(f)}function Le(t,e){var i=e.length>0,r=t.length>0,o=function(o,s,a,u,h){var c,f,p,g=0,m="0",v=o&&[],_=[],y=l,b=o||r&&n.find["TAG"]("*",h),w=x+=y==null?1:Math.random()||.1,C=b.length;if(h){l=s!==d&&s}for(;m!==C&&(c=b[m])!=null;m++){if(r&&c){f=0;while(p=t[f++]){if(p(c,s,a)){u.push(c);break}}if(h){x=w}}if(i){if(c=!p&&c){g--}if(o){v.push(c)}}}g+=m;if(i&&m!==g){f=0;while(p=e[f++]){p(v,_,s,a)}if(o){if(g>0){while(m--){if(!(v[m]||_[m])){_[m]=O.call(u)}}}_=we(_)}D.apply(u,_);if(h&&!o&&_.length>0&&g+e.length>1){se.uniqueSort(u)}}if(h){x=w;l=y}return v};return i?ue(o):o}a=se.compile=function(t,e){var i,n=[],r=[],o=M[t+" "];if(!o){if(!e){e=s(t)}i=e.length;while(i--){o=Ce(e[i]);if(o[b]){n.push(o)}else{r.push(o)}}o=M(t,Le(r,n));o.selector=t}return o};u=se.select=function(t,e,r,o){var u,l,h,c,f,d=typeof t==="function"&&t,p=!o&&s(t=d.selector||t);r=r||[];if(p.length===1){l=p[0]=p[0].slice(0);if(l.length>2&&(h=l[0]).type==="ID"&&i.getById&&e.nodeType===9&&g&&n.relative[l[1].type]){e=(n.find["ID"](h.matches[0].replace(ie,ne),e)||[])[0];if(!e){return r}else if(d){e=e.parentNode}t=t.slice(l.shift().value.length)}u=J["needsContext"].test(t)?0:l.length;while(u--){h=l[u];if(n.relative[c=h.type]){break}if(f=n.find[c]){if(o=f(h.matches[0].replace(ie,ne),te.test(l[0].type)&&ge(e.parentNode)||e)){l.splice(u,1);t=o.length&&ve(l);if(!t){D.apply(r,o);return r}break}}}}(d||a(t,p))(o,e,!g,r,te.test(t)&&ge(e.parentNode)||e);return r};i.sortStable=b.split("").sort(P).join("")===b;i.detectDuplicates=!!c;f();i.sortDetached=le(function(t){return t.compareDocumentPosition(d.createElement("div"))&1});if(!le(function(t){t.innerHTML="<a href='#'></a>";return t.firstChild.getAttribute("href")==="#"})){he("type|href|height|width",function(t,e,i){if(!i){return t.getAttribute(e,e.toLowerCase()==="type"?1:2)}})}if(!i.attributes||!le(function(t){t.innerHTML="<input/>";t.firstChild.setAttribute("value","");return t.firstChild.getAttribute("value")===""})){he("value",function(t,e,i){if(!i&&t.nodeName.toLowerCase()==="input"){return t.defaultValue}})}if(!le(function(t){return t.getAttribute("disabled")==null})){he(B,function(t,e,i){var n;if(!i){return t[e]===true?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}})}return se}(t);d.find=y;d.expr=y.selectors;d.expr[":"]=d.expr.pseudos;d.unique=y.uniqueSort;d.text=y.getText;d.isXMLDoc=y.isXML;d.contains=y.contains;var b=d.expr.match.needsContext;var w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var x=/^.[^:#\[\.,]*$/;function C(t,e,i){if(d.isFunction(e)){return d.grep(t,function(t,n){return!!e.call(t,n,t)!==i})}if(e.nodeType){return d.grep(t,function(t){return t===e!==i})}if(typeof e==="string"){if(x.test(e)){return d.filter(e,t,i)}e=d.filter(e,t)}return d.grep(t,function(t){return s.call(e,t)>=0!==i})}d.filter=function(t,e,i){var n=e[0];if(i){t=":not("+t+")"}return e.length===1&&n.nodeType===1?d.find.matchesSelector(n,t)?[n]:[]:d.find.matches(t,d.grep(e,function(t){return t.nodeType===1}))};d.fn.extend({find:function(t){var e,i=this.length,n=[],r=this;if(typeof t!=="string"){return this.pushStack(d(t).filter(function(){for(e=0;e<i;e++){if(d.contains(r[e],this)){return true}}}))}for(e=0;e<i;e++){d.find(t,r[e],n)}n=this.pushStack(i>1?d.unique(n):n);n.selector=this.selector?this.selector+" "+t:t;return n},filter:function(t){return this.pushStack(C(this,t||[],false))},not:function(t){return this.pushStack(C(this,t||[],true))},is:function(t){return!!C(this,typeof t==="string"&&b.test(t)?d(t):t||[],false).length}});var L,E=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,M=d.fn.init=function(t,e){var i,n;if(!t){return this}if(typeof t==="string"){if(t[0]==="<"&&t[t.length-1]===">"&&t.length>=3){i=[null,t,null]}else{i=E.exec(t)}if(i&&(i[1]||!e)){if(i[1]){e=e instanceof d?e[0]:e;d.merge(this,d.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:c,true));if(w.test(i[1])&&d.isPlainObject(e)){for(i in e){if(d.isFunction(this[i])){this[i](e[i])}else{this.attr(i,e[i])}}}return this}else{n=c.getElementById(i[2]);if(n&&n.parentNode){this.length=1;this[0]=n}this.context=c;this.selector=t;return this}}else if(!e||e.jquery){return(e||L).find(t)}else{return this.constructor(e).find(t)}}else if(t.nodeType){this.context=this[0]=t;this.length=1;return this}else if(d.isFunction(t)){return typeof L.ready!=="undefined"?L.ready(t):t(d)}if(t.selector!==undefined){this.selector=t.selector;this.context=t.context}return d.makeArray(t,this)};M.prototype=d.fn;L=d(c);var P=/^(?:parents|prev(?:Until|All))/,T={children:true,contents:true,next:true,prev:true};d.extend({dir:function(t,e,i){var n=[],r=i!==undefined;while((t=t[e])&&t.nodeType!==9){if(t.nodeType===1){if(r&&d(t).is(i)){break}n.push(t)}}return n},sibling:function(t,e){var i=[];for(;t;t=t.nextSibling){if(t.nodeType===1&&t!==e){i.push(t)}}return i}});d.fn.extend({has:function(t){var e=d(t,this),i=e.length;return this.filter(function(){var t=0;for(;t<i;t++){if(d.contains(this,e[t])){return true}}})},closest:function(t,e){var i,n=0,r=this.length,o=[],s=b.test(t)||typeof t!=="string"?d(t,e||this.context):0;for(;n<r;n++){for(i=this[n];i&&i!==e;i=i.parentNode){if(i.nodeType<11&&(s?s.index(i)>-1:i.nodeType===1&&d.find.matchesSelector(i,t))){o.push(i);break}}}return this.pushStack(o.length>1?d.unique(o):o)},index:function(t){if(!t){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof t==="string"){return s.call(d(t),this[0])}return s.call(this,t.jquery?t[0]:t)},add:function(t,e){return this.pushStack(d.unique(d.merge(this.get(),d(t,e))))},addBack:function(t){return this.add(t==null?this.prevObject:this.prevObject.filter(t))}});function k(t,e){while((t=t[e])&&t.nodeType!==1){}return t}d.each({parent:function(t){var e=t.parentNode;return e&&e.nodeType!==11?e:null},parents:function(t){return d.dir(t,"parentNode")},parentsUntil:function(t,e,i){return d.dir(t,"parentNode",i)},next:function(t){return k(t,"nextSibling")},prev:function(t){return k(t,"previousSibling")},nextAll:function(t){return d.dir(t,"nextSibling")},prevAll:function(t){return d.dir(t,"previousSibling")},nextUntil:function(t,e,i){return d.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return d.dir(t,"previousSibling",i)
},siblings:function(t){return d.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return d.sibling(t.firstChild)},contents:function(t){return t.contentDocument||d.merge([],t.childNodes)}},function(t,e){d.fn[t]=function(i,n){var r=d.map(this,e,i);if(t.slice(-5)!=="Until"){n=i}if(n&&typeof n==="string"){r=d.filter(n,r)}if(this.length>1){if(!T[t]){d.unique(r)}if(P.test(t)){r.reverse()}}return this.pushStack(r)}});var S=/\S+/g;var O={};function A(t){var e=O[t]={};d.each(t.match(S)||[],function(t,i){e[i]=true});return e}d.Callbacks=function(t){t=typeof t==="string"?O[t]||A(t):d.extend({},t);var e,i,n,r,o,s,a=[],u=!t.once&&[],l=function(c){e=t.memory&&c;i=true;s=r||0;r=0;o=a.length;n=true;for(;a&&s<o;s++){if(a[s].apply(c[0],c[1])===false&&t.stopOnFalse){e=false;break}}n=false;if(a){if(u){if(u.length){l(u.shift())}}else if(e){a=[]}else{h.disable()}}},h={add:function(){if(a){var i=a.length;(function s(e){d.each(e,function(e,i){var n=d.type(i);if(n==="function"){if(!t.unique||!h.has(i)){a.push(i)}}else if(i&&i.length&&n!=="string"){s(i)}})})(arguments);if(n){o=a.length}else if(e){r=i;l(e)}}return this},remove:function(){if(a){d.each(arguments,function(t,e){var i;while((i=d.inArray(e,a,i))>-1){a.splice(i,1);if(n){if(i<=o){o--}if(i<=s){s--}}}})}return this},has:function(t){return t?d.inArray(t,a)>-1:!!(a&&a.length)},empty:function(){a=[];o=0;return this},disable:function(){a=u=e=undefined;return this},disabled:function(){return!a},lock:function(){u=undefined;if(!e){h.disable()}return this},locked:function(){return!u},fireWith:function(t,e){if(a&&(!i||u)){e=e||[];e=[t,e.slice?e.slice():e];if(n){u.push(e)}else{l(e)}}return this},fire:function(){h.fireWith(this,arguments);return this},fired:function(){return!!i}};return h};d.extend({Deferred:function(t){var e=[["resolve","done",d.Callbacks("once memory"),"resolved"],["reject","fail",d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){r.done(arguments).fail(arguments);return this},then:function(){var t=arguments;return d.Deferred(function(i){d.each(e,function(e,o){var s=d.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);if(t&&d.isFunction(t.promise)){t.promise().done(i.resolve).fail(i.reject).progress(i.notify)}else{i[o[0]+"With"](this===n?i.promise():this,s?[t]:arguments)}})});t=null}).promise()},promise:function(t){return t!=null?d.extend(t,n):n}},r={};n.pipe=n.then;d.each(e,function(t,o){var s=o[2],a=o[3];n[o[1]]=s.add;if(a){s.add(function(){i=a},e[t^1][2].disable,e[2][2].lock)}r[o[0]]=function(){r[o[0]+"With"](this===r?n:this,arguments);return this};r[o[0]+"With"]=s.fireWith});n.promise(r);if(t){t.call(r,r)}return r},when:function(t){var e=0,i=n.call(arguments),r=i.length,o=r!==1||t&&d.isFunction(t.promise)?r:0,s=o===1?t:d.Deferred(),a=function(t,e,i){return function(r){e[t]=this;i[t]=arguments.length>1?n.call(arguments):r;if(i===u){s.notifyWith(e,i)}else if(!--o){s.resolveWith(e,i)}}},u,l,h;if(r>1){u=new Array(r);l=new Array(r);h=new Array(r);for(;e<r;e++){if(i[e]&&d.isFunction(i[e].promise)){i[e].promise().done(a(e,h,i)).fail(s.reject).progress(a(e,l,u))}else{--o}}}if(!o){s.resolveWith(h,i)}return s.promise()}});var D;d.fn.ready=function(t){d.ready.promise().done(t);return this};d.extend({isReady:false,readyWait:1,holdReady:function(t){if(t){d.readyWait++}else{d.ready(true)}},ready:function(t){if(t===true?--d.readyWait:d.isReady){return}d.isReady=true;if(t!==true&&--d.readyWait>0){return}D.resolveWith(c,[d]);if(d.fn.triggerHandler){d(c).triggerHandler("ready");d(c).off("ready")}}});function I(){c.removeEventListener("DOMContentLoaded",I,false);t.removeEventListener("load",I,false);d.ready()}d.ready.promise=function(e){if(!D){D=d.Deferred();if(c.readyState==="complete"){setTimeout(d.ready)}else{c.addEventListener("DOMContentLoaded",I,false);t.addEventListener("load",I,false)}}return D.promise(e)};d.ready.promise();var R=d.access=function(t,e,i,n,r,o,s){var a=0,u=t.length,l=i==null;if(d.type(i)==="object"){r=true;for(a in i){d.access(t,e,a,i[a],true,o,s)}}else if(n!==undefined){r=true;if(!d.isFunction(n)){s=true}if(l){if(s){e.call(t,n);e=null}else{l=e;e=function(t,e,i){return l.call(d(t),i)}}}if(e){for(;a<u;a++){e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)))}}}return r?t:l?e.call(t):u?e(t[0],i):o};d.acceptData=function(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType};function B(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=d.expando+B.uid++}B.uid=1;B.accepts=d.acceptData;B.prototype={key:function(t){if(!B.accepts(t)){return 0}var e={},i=t[this.expando];if(!i){i=B.uid++;try{e[this.expando]={value:i};Object.defineProperties(t,e)}catch(n){e[this.expando]=i;d.extend(t,e)}}if(!this.cache[i]){this.cache[i]={}}return i},set:function(t,e,i){var n,r=this.key(t),o=this.cache[r];if(typeof e==="string"){o[e]=i}else{if(d.isEmptyObject(o)){d.extend(this.cache[r],e)}else{for(n in e){o[n]=e[n]}}}return o},get:function(t,e){var i=this.cache[this.key(t)];return e===undefined?i:i[e]},access:function(t,e,i){var n;if(e===undefined||e&&typeof e==="string"&&i===undefined){n=this.get(t,e);return n!==undefined?n:this.get(t,d.camelCase(e))}this.set(t,e,i);return i!==undefined?i:e},remove:function(t,e){var i,n,r,o=this.key(t),s=this.cache[o];if(e===undefined){this.cache[o]={}}else{if(d.isArray(e)){n=e.concat(e.map(d.camelCase))}else{r=d.camelCase(e);if(e in s){n=[e,r]}else{n=r;n=n in s?[n]:n.match(S)||[]}}i=n.length;while(i--){delete s[n[i]]}}},hasData:function(t){return!d.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){if(t[this.expando]){delete this.cache[t[this.expando]]}}};var N=new B;var z=new B;var V=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/([A-Z])/g;function U(t,e,i){var n;if(i===undefined&&t.nodeType===1){n="data-"+e.replace(j,"-$1").toLowerCase();i=t.getAttribute(n);if(typeof i==="string"){try{i=i==="true"?true:i==="false"?false:i==="null"?null:+i+""===i?+i:V.test(i)?d.parseJSON(i):i}catch(r){}z.set(t,e,i)}else{i=undefined}}return i}d.extend({hasData:function(t){return z.hasData(t)||N.hasData(t)},data:function(t,e,i){return z.access(t,e,i)},removeData:function(t,e){z.remove(t,e)},_data:function(t,e,i){return N.access(t,e,i)},_removeData:function(t,e){N.remove(t,e)}});d.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(t===undefined){if(this.length){r=z.get(o);if(o.nodeType===1&&!N.get(o,"hasDataAttrs")){i=s.length;while(i--){if(s[i]){n=s[i].name;if(n.indexOf("data-")===0){n=d.camelCase(n.slice(5));U(o,n,r[n])}}}N.set(o,"hasDataAttrs",true)}}return r}if(typeof t==="object"){return this.each(function(){z.set(this,t)})}return R(this,function(e){var i,n=d.camelCase(t);if(o&&e===undefined){i=z.get(o,t);if(i!==undefined){return i}i=z.get(o,n);if(i!==undefined){return i}i=U(o,n,undefined);if(i!==undefined){return i}return}this.each(function(){var i=z.get(this,n);z.set(this,n,e);if(t.indexOf("-")!==-1&&i!==undefined){z.set(this,t,e)}})},null,e,arguments.length>1,null,true)},removeData:function(t){return this.each(function(){z.remove(this,t)})}});d.extend({queue:function(t,e,i){var n;if(t){e=(e||"fx")+"queue";n=N.get(t,e);if(i){if(!n||d.isArray(i)){n=N.access(t,e,d.makeArray(i))}else{n.push(i)}}return n||[]}},dequeue:function(t,e){e=e||"fx";var i=d.queue(t,e),n=i.length,r=i.shift(),o=d._queueHooks(t,e),s=function(){d.dequeue(t,e)};if(r==="inprogress"){r=i.shift();n--}if(r){if(e==="fx"){i.unshift("inprogress")}delete o.stop;r.call(t,s,o)}if(!n&&o){o.empty.fire()}},_queueHooks:function(t,e){var i=e+"queueHooks";return N.get(t,i)||N.access(t,i,{empty:d.Callbacks("once memory").add(function(){N.remove(t,[e+"queue",i])})})}});d.fn.extend({queue:function(t,e){var i=2;if(typeof t!=="string"){e=t;t="fx";i--}if(arguments.length<i){return d.queue(this[0],t)}return e===undefined?this:this.each(function(){var i=d.queue(this,t,e);d._queueHooks(this,t);if(t==="fx"&&i[0]!=="inprogress"){d.dequeue(this,t)}})},dequeue:function(t){return this.each(function(){d.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=d.Deferred(),o=this,s=this.length,a=function(){if(!--n){r.resolveWith(o,[o])}};if(typeof t!=="string"){e=t;t=undefined}t=t||"fx";while(s--){i=N.get(o[s],t+"queueHooks");if(i&&i.empty){n++;i.empty.add(a)}}a();return r.promise(e)}});var F=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var H=["Top","Right","Bottom","Left"];var q=function(t,e){t=e||t;return d.css(t,"display")==="none"||!d.contains(t.ownerDocument,t)};var Z=/^(?:checkbox|radio)$/i;(function(){var t=c.createDocumentFragment(),e=t.appendChild(c.createElement("div")),i=c.createElement("input");i.setAttribute("type","radio");i.setAttribute("checked","checked");i.setAttribute("name","t");e.appendChild(i);h.checkClone=e.cloneNode(true).cloneNode(true).lastChild.checked;e.innerHTML="<textarea>x</textarea>";h.noCloneChecked=!!e.cloneNode(true).lastChild.defaultValue})();var W=typeof undefined;h.focusinBubbles="onfocusin"in t;var G=/^key/,$=/^(?:mouse|pointer|contextmenu)|click/,J=/^(?:focusinfocus|focusoutblur)$/,X=/^([^.]*)(?:\.(.+)|)$/;function K(){return true}function Y(){return false}function Q(){try{return c.activeElement}catch(t){}}d.event={global:{},add:function(t,e,i,n,r){var o,s,a,u,l,h,c,f,p,g,m,v=N.get(t);if(!v){return}if(i.handler){o=i;i=o.handler;r=o.selector}if(!i.guid){i.guid=d.guid++}if(!(u=v.events)){u=v.events={}}if(!(s=v.handle)){s=v.handle=function(e){return typeof d!==W&&d.event.triggered!==e.type?d.event.dispatch.apply(t,arguments):undefined}}e=(e||"").match(S)||[""];l=e.length;while(l--){a=X.exec(e[l])||[];p=m=a[1];g=(a[2]||"").split(".").sort();if(!p){continue}c=d.event.special[p]||{};p=(r?c.delegateType:c.bindType)||p;c=d.event.special[p]||{};h=d.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&d.expr.match.needsContext.test(r),namespace:g.join(".")},o);if(!(f=u[p])){f=u[p]=[];f.delegateCount=0;if(!c.setup||c.setup.call(t,n,g,s)===false){if(t.addEventListener){t.addEventListener(p,s,false)}}}if(c.add){c.add.call(t,h);if(!h.handler.guid){h.handler.guid=i.guid}}if(r){f.splice(f.delegateCount++,0,h)}else{f.push(h)}d.event.global[p]=true}},remove:function(t,e,i,n,r){var o,s,a,u,l,h,c,f,p,g,m,v=N.hasData(t)&&N.get(t);if(!v||!(u=v.events)){return}e=(e||"").match(S)||[""];l=e.length;while(l--){a=X.exec(e[l])||[];p=m=a[1];g=(a[2]||"").split(".").sort();if(!p){for(p in u){d.event.remove(t,p+e[l],i,n,true)}continue}c=d.event.special[p]||{};p=(n?c.delegateType:c.bindType)||p;f=u[p]||[];a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)");s=o=f.length;while(o--){h=f[o];if((r||m===h.origType)&&(!i||i.guid===h.guid)&&(!a||a.test(h.namespace))&&(!n||n===h.selector||n==="**"&&h.selector)){f.splice(o,1);if(h.selector){f.delegateCount--}if(c.remove){c.remove.call(t,h)}}}if(s&&!f.length){if(!c.teardown||c.teardown.call(t,g,v.handle)===false){d.removeEvent(t,p,v.handle)}delete u[p]}}if(d.isEmptyObject(u)){delete v.handle;N.remove(t,"events")}},trigger:function(e,i,n,r){var o,s,a,u,h,f,p,g=[n||c],m=l.call(e,"type")?e.type:e,v=l.call(e,"namespace")?e.namespace.split("."):[];s=a=n=n||c;if(n.nodeType===3||n.nodeType===8){return}if(J.test(m+d.event.triggered)){return}if(m.indexOf(".")>=0){v=m.split(".");m=v.shift();v.sort()}h=m.indexOf(":")<0&&"on"+m;e=e[d.expando]?e:new d.Event(m,typeof e==="object"&&e);e.isTrigger=r?2:3;e.namespace=v.join(".");e.namespace_re=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=n}i=i==null?[e]:d.makeArray(i,[e]);p=d.event.special[m]||{};if(!r&&p.trigger&&p.trigger.apply(n,i)===false){return}if(!r&&!p.noBubble&&!d.isWindow(n)){u=p.delegateType||m;if(!J.test(u+m)){s=s.parentNode}for(;s;s=s.parentNode){g.push(s);a=s}if(a===(n.ownerDocument||c)){g.push(a.defaultView||a.parentWindow||t)}}o=0;while((s=g[o++])&&!e.isPropagationStopped()){e.type=o>1?u:p.bindType||m;f=(N.get(s,"events")||{})[e.type]&&N.get(s,"handle");if(f){f.apply(s,i)}f=h&&s[h];if(f&&f.apply&&d.acceptData(s)){e.result=f.apply(s,i);if(e.result===false){e.preventDefault()}}}e.type=m;if(!r&&!e.isDefaultPrevented()){if((!p._default||p._default.apply(g.pop(),i)===false)&&d.acceptData(n)){if(h&&d.isFunction(n[m])&&!d.isWindow(n)){a=n[h];if(a){n[h]=null}d.event.triggered=m;n[m]();d.event.triggered=undefined;if(a){n[h]=a}}}}return e.result},dispatch:function(t){t=d.event.fix(t);var e,i,r,o,s,a=[],u=n.call(arguments),l=(N.get(this,"events")||{})[t.type]||[],h=d.event.special[t.type]||{};u[0]=t;t.delegateTarget=this;if(h.preDispatch&&h.preDispatch.call(this,t)===false){return}a=d.event.handlers.call(this,t,l);e=0;while((o=a[e++])&&!t.isPropagationStopped()){t.currentTarget=o.elem;i=0;while((s=o.handlers[i++])&&!t.isImmediatePropagationStopped()){if(!t.namespace_re||t.namespace_re.test(s.namespace)){t.handleObj=s;t.data=s.data;r=((d.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,u);if(r!==undefined){if((t.result=r)===false){t.preventDefault();t.stopPropagation()}}}}}if(h.postDispatch){h.postDispatch.call(this,t)}return t.result},handlers:function(t,e){var i,n,r,o,s=[],a=e.delegateCount,u=t.target;if(a&&u.nodeType&&(!t.button||t.type!=="click")){for(;u!==this;u=u.parentNode||this){if(u.disabled!==true||t.type!=="click"){n=[];for(i=0;i<a;i++){o=e[i];r=o.selector+" ";if(n[r]===undefined){n[r]=o.needsContext?d(r,this).index(u)>=0:d.find(r,this,null,[u]).length}if(n[r]){n.push(o)}}if(n.length){s.push({elem:u,handlers:n})}}}}if(a<e.length){s.push({elem:this,handlers:e.slice(a)})}return s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){if(t.which==null){t.which=e.charCode!=null?e.charCode:e.keyCode}return t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button;if(t.pageX==null&&e.clientX!=null){i=t.target.ownerDocument||c;n=i.documentElement;r=i.body;t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0);t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)}if(!t.which&&o!==undefined){t.which=o&1?1:o&2?3:o&4?2:0}return t}},fix:function(t){if(t[d.expando]){return t}var e,i,n,r=t.type,o=t,s=this.fixHooks[r];if(!s){this.fixHooks[r]=s=$.test(r)?this.mouseHooks:G.test(r)?this.keyHooks:{}}n=s.props?this.props.concat(s.props):this.props;t=new d.Event(o);e=n.length;while(e--){i=n[e];t[i]=o[i]}if(!t.target){t.target=c}if(t.target.nodeType===3){t.target=t.target.parentNode}return s.filter?s.filter(t,o):t},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==Q()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===Q()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&d.nodeName(this,"input")){this.click();return false}},_default:function(t){return d.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){if(t.result!==undefined&&t.originalEvent){t.originalEvent.returnValue=t.result}}}},simulate:function(t,e,i,n){var r=d.extend(new d.Event,i,{type:t,isSimulated:true,originalEvent:{}});if(n){d.event.trigger(r,null,e)}else{d.event.dispatch.call(e,r)}if(r.isDefaultPrevented()){i.preventDefault()}}};d.removeEvent=function(t,e,i){if(t.removeEventListener){t.removeEventListener(e,i,false)}};d.Event=function(t,e){if(!(this instanceof d.Event)){return new d.Event(t,e)}if(t&&t.type){this.originalEvent=t;this.type=t.type;this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&t.returnValue===false?K:Y}else{this.type=t}if(e){d.extend(this,e)}this.timeStamp=t&&t.timeStamp||d.now();this[d.expando]=true};d.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=K;if(t&&t.preventDefault){t.preventDefault()}},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=K;if(t&&t.stopPropagation){t.stopPropagation()}},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=K;if(t&&t.stopImmediatePropagation){t.stopImmediatePropagation()}this.stopPropagation()}};d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){d.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;if(!r||r!==n&&!d.contains(n,r)){t.type=o.origType;i=o.handler.apply(this,arguments);t.type=e}return i}}});if(!h.focusinBubbles){d.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){d.event.simulate(e,t.target,d.event.fix(t),true)};d.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=N.access(n,e);if(!r){n.addEventListener(t,i,true)}N.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=N.access(n,e)-1;if(!r){n.removeEventListener(t,i,true);N.remove(n,e)}else{N.access(n,e,r)}}}})}d.fn.extend({on:function(t,e,i,n,r){var o,s;if(typeof t==="object"){if(typeof e!=="string"){i=i||e;e=undefined}for(s in t){this.on(s,e,i,t[s],r)}return this}if(i==null&&n==null){n=e;i=e=undefined}else if(n==null){if(typeof e==="string"){n=i;i=undefined}else{n=i;i=e;e=undefined}}if(n===false){n=Y}else if(!n){return this}if(r===1){o=n;n=function(t){d().off(t);return o.apply(this,arguments)};n.guid=o.guid||(o.guid=d.guid++)}return this.each(function(){d.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj){n=t.handleObj;d(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);return this}if(typeof t==="object"){for(r in t){this.off(r,e,t[r])}return this}if(e===false||typeof e==="function"){i=e;e=undefined}if(i===false){i=Y}return this.each(function(){d.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){d.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i){return d.event.trigger(t,e,i,true)}}});var te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ee=/<([\w:]+)/,ie=/<|&#?\w+;/,ne=/<(?:script|style|link)/i,re=/checked\s*(?:[^=]|=\s*.checked.)/i,oe=/^$|\/(?:java|ecma)script/i,se=/^true\/(.*)/,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ue.optgroup=ue.option;ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead;ue.th=ue.td;function le(t,e){return d.nodeName(t,"table")&&d.nodeName(e.nodeType!==11?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function he(t){t.type=(t.getAttribute("type")!==null)+"/"+t.type;return t}function ce(t){var e=se.exec(t.type);if(e){t.type=e[1]}else{t.removeAttribute("type")}return t}function fe(t,e){var i=0,n=t.length;for(;i<n;i++){N.set(t[i],"globalEval",!e||N.get(e[i],"globalEval"))}}function de(t,e){var i,n,r,o,s,a,u,l;if(e.nodeType!==1){return}if(N.hasData(t)){o=N.access(t);s=N.set(e,o);l=o.events;if(l){delete s.handle;s.events={};for(r in l){for(i=0,n=l[r].length;i<n;i++){d.event.add(e,r,l[r][i])}}}}if(z.hasData(t)){a=z.access(t);u=d.extend({},a);z.set(e,u)}}function pe(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return e===undefined||e&&d.nodeName(t,e)?d.merge([t],i):i}function ge(t,e){var i=e.nodeName.toLowerCase();if(i==="input"&&Z.test(t.type)){e.checked=t.checked}else if(i==="input"||i==="textarea"){e.defaultValue=t.defaultValue}}d.extend({clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(true),u=d.contains(t.ownerDocument,t);if(!h.noCloneChecked&&(t.nodeType===1||t.nodeType===11)&&!d.isXMLDoc(t)){s=pe(a);o=pe(t);for(n=0,r=o.length;n<r;n++){ge(o[n],s[n])}}if(e){if(i){o=o||pe(t);s=s||pe(a);for(n=0,r=o.length;n<r;n++){de(o[n],s[n])}}else{de(t,a)}}s=pe(a,"script");if(s.length>0){fe(s,!u&&pe(t,"script"))}return a},buildFragment:function(t,e,i,n){var r,o,s,a,u,l,h=e.createDocumentFragment(),c=[],f=0,p=t.length;for(;f<p;f++){r=t[f];if(r||r===0){if(d.type(r)==="object"){d.merge(c,r.nodeType?[r]:r)}else if(!ie.test(r)){c.push(e.createTextNode(r))}else{o=o||h.appendChild(e.createElement("div"));s=(ee.exec(r)||["",""])[1].toLowerCase();a=ue[s]||ue._default;o.innerHTML=a[1]+r.replace(te,"<$1></$2>")+a[2];l=a[0];while(l--){o=o.lastChild}d.merge(c,o.childNodes);o=h.firstChild;o.textContent=""}}}h.textContent="";f=0;while(r=c[f++]){if(n&&d.inArray(r,n)!==-1){continue}u=d.contains(r.ownerDocument,r);o=pe(h.appendChild(r),"script");if(u){fe(o)}if(i){l=0;while(r=o[l++]){if(oe.test(r.type||"")){i.push(r)}}}}return h},cleanData:function(t){var e,i,n,r,o=d.event.special,s=0;for(;(i=t[s])!==undefined;s++){if(d.acceptData(i)){r=i[N.expando];if(r&&(e=N.cache[r])){if(e.events){for(n in e.events){if(o[n]){d.event.remove(i,n)}else{d.removeEvent(i,n,e.handle)}}}if(N.cache[r]){delete N.cache[r]}}}delete z.cache[i[z.expando]]}}});d.fn.extend({text:function(t){return R(this,function(t){return t===undefined?d.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=t}})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=le(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=le(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){if(this.parentNode){this.parentNode.insertBefore(t,this)}})},after:function(){return this.domManip(arguments,function(t){if(this.parentNode){this.parentNode.insertBefore(t,this.nextSibling)}})},remove:function(t,e){var i,n=t?d.filter(t,this):this,r=0;for(;(i=n[r])!=null;r++){if(!e&&i.nodeType===1){d.cleanData(pe(i))}if(i.parentNode){if(e&&d.contains(i.ownerDocument,i)){fe(pe(i,"script"))}i.parentNode.removeChild(i)}}return this},empty:function(){var t,e=0;for(;(t=this[e])!=null;e++){if(t.nodeType===1){d.cleanData(pe(t,false));t.textContent=""}}return this},clone:function(t,e){t=t==null?false:t;e=e==null?t:e;return this.map(function(){return d.clone(this,t,e)})},html:function(t){return R(this,function(t){var e=this[0]||{},i=0,n=this.length;if(t===undefined&&e.nodeType===1){return e.innerHTML}if(typeof t==="string"&&!ne.test(t)&&!ue[(ee.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(te,"<$1></$2>");try{for(;i<n;i++){e=this[i]||{};if(e.nodeType===1){d.cleanData(pe(e,false));e.innerHTML=t}}e=0}catch(r){}}if(e){this.empty().append(t)}},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];this.domManip(arguments,function(e){t=this.parentNode;d.cleanData(pe(this));if(t){t.replaceChild(e,this)}});return t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,true)},domManip:function(t,e){t=r.apply([],t);var i,n,o,s,a,u,l=0,c=this.length,f=this,p=c-1,g=t[0],m=d.isFunction(g);if(m||c>1&&typeof g==="string"&&!h.checkClone&&re.test(g)){return this.each(function(i){var n=f.eq(i);if(m){t[0]=g.call(this,i,n.html())}n.domManip(t,e)})}if(c){i=d.buildFragment(t,this[0].ownerDocument,false,this);n=i.firstChild;if(i.childNodes.length===1){i=n}if(n){o=d.map(pe(i,"script"),he);s=o.length;for(;l<c;l++){a=i;if(l!==p){a=d.clone(a,true,true);if(s){d.merge(o,pe(a,"script"))}}e.call(this[l],a,l)}if(s){u=o[o.length-1].ownerDocument;d.map(o,ce);for(l=0;l<s;l++){a=o[l];if(oe.test(a.type||"")&&!N.access(a,"globalEval")&&d.contains(u,a)){if(a.src){if(d._evalUrl){d._evalUrl(a.src)}}else{d.globalEval(a.textContent.replace(ae,""))}}}}}}return this}});d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){d.fn[t]=function(t){var i,n=[],r=d(t),s=r.length-1,a=0;for(;a<=s;a++){i=a===s?this:this.clone(true);d(r[a])[e](i);o.apply(n,i.get())}return this.pushStack(n)}});var me,ve={};function _e(e,i){var n,r=d(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(r[0]))?n.display:d.css(r[0],"display");r.detach();return o}function ye(t){var e=c,i=ve[t];if(!i){i=_e(t,e);if(i==="none"||!i){me=(me||d("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement);e=me[0].contentDocument;e.write();e.close();i=_e(t,e);me.detach()}ve[t]=i}return i}var be=/^margin/;var we=new RegExp("^("+F+")(?!px)[a-z%]+$","i");var xe=function(e){if(e.ownerDocument.defaultView.opener){return e.ownerDocument.defaultView.getComputedStyle(e,null)}return t.getComputedStyle(e,null)};function Ce(t,e,i){var n,r,o,s,a=t.style;i=i||xe(t);if(i){s=i.getPropertyValue(e)||i[e]}if(i){if(s===""&&!d.contains(t.ownerDocument,t)){s=d.style(t,e)}if(we.test(s)&&be.test(e)){n=a.width;r=a.minWidth;o=a.maxWidth;a.minWidth=a.maxWidth=a.width=s;s=i.width;a.width=n;a.minWidth=r;a.maxWidth=o}}return s!==undefined?s+"":s}function Le(t,e){return{get:function(){if(t()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}(function(){var e,i,n=c.documentElement,r=c.createElement("div"),o=c.createElement("div");if(!o.style){return}o.style.backgroundClip="content-box";o.cloneNode(true).style.backgroundClip="";h.clearCloneStyle=o.style.backgroundClip==="content-box";r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;"+"position:absolute";r.appendChild(o);function s(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";o.innerHTML="";n.appendChild(r);var s=t.getComputedStyle(o,null);e=s.top!=="1%";i=s.width==="4px";n.removeChild(r)}if(t.getComputedStyle){d.extend(h,{pixelPosition:function(){s();return e},boxSizingReliable:function(){if(i==null){s()}return i},reliableMarginRight:function(){var e,i=o.appendChild(c.createElement("div"));i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";i.style.marginRight=i.style.width="0";o.style.width="1px";n.appendChild(r);e=!parseFloat(t.getComputedStyle(i,null).marginRight);n.removeChild(r);o.removeChild(i);return e}})}})();d.swap=function(t,e,i,n){var r,o,s={};for(o in e){s[o]=t.style[o];t.style[o]=e[o]}r=i.apply(t,n||[]);for(o in e){t.style[o]=s[o]}return r};var Ee=/^(none|table(?!-c[ea]).+)/,Me=new RegExp("^("+F+")(.*)$","i"),Pe=new RegExp("^([+-])=("+F+")","i"),Te={position:"absolute",visibility:"hidden",display:"block"},ke={letterSpacing:"0",fontWeight:"400"},Se=["Webkit","O","Moz","ms"];function Oe(t,e){if(e in t){return e}var i=e[0].toUpperCase()+e.slice(1),n=e,r=Se.length;while(r--){e=Se[r]+i;if(e in t){return e}}return n}function Ae(t,e,i){var n=Me.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function De(t,e,i,n,r){var o=i===(n?"border":"content")?4:e==="width"?1:0,s=0;for(;o<4;o+=2){if(i==="margin"){s+=d.css(t,i+H[o],true,r)}if(n){if(i==="content"){s-=d.css(t,"padding"+H[o],true,r)}if(i!=="margin"){s-=d.css(t,"border"+H[o]+"Width",true,r)}}else{s+=d.css(t,"padding"+H[o],true,r);if(i!=="padding"){s+=d.css(t,"border"+H[o]+"Width",true,r)}}}return s}function Ie(t,e,i){var n=true,r=e==="width"?t.offsetWidth:t.offsetHeight,o=xe(t),s=d.css(t,"boxSizing",false,o)==="border-box";if(r<=0||r==null){r=Ce(t,e,o);if(r<0||r==null){r=t.style[e]}if(we.test(r)){return r}n=s&&(h.boxSizingReliable()||r===t.style[e]);r=parseFloat(r)||0}return r+De(t,e,i||(s?"border":"content"),n,o)+"px"}function Re(t,e){var i,n,r,o=[],s=0,a=t.length;for(;s<a;s++){n=t[s];if(!n.style){continue}o[s]=N.get(n,"olddisplay");i=n.style.display;if(e){if(!o[s]&&i==="none"){n.style.display=""}if(n.style.display===""&&q(n)){o[s]=N.access(n,"olddisplay",ye(n.nodeName))}}else{r=q(n);if(i!=="none"||!r){N.set(n,"olddisplay",r?i:d.css(n,"display"))}}}for(s=0;s<a;s++){n=t[s];if(!n.style){continue}if(!e||n.style.display==="none"||n.style.display===""){n.style.display=e?o[s]||"":"none"}}return t}d.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Ce(t,"opacity");return i===""?"1":i}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(!t||t.nodeType===3||t.nodeType===8||!t.style){return}var r,o,s,a=d.camelCase(e),u=t.style;e=d.cssProps[a]||(d.cssProps[a]=Oe(u,a));s=d.cssHooks[e]||d.cssHooks[a];if(i!==undefined){o=typeof i;if(o==="string"&&(r=Pe.exec(i))){i=(r[1]+1)*r[2]+parseFloat(d.css(t,e));o="number"}if(i==null||i!==i){return}if(o==="number"&&!d.cssNumber[a]){i+="px"}if(!h.clearCloneStyle&&i===""&&e.indexOf("background")===0){u[e]="inherit"}if(!s||!("set"in s)||(i=s.set(t,i,n))!==undefined){u[e]=i}}else{if(s&&"get"in s&&(r=s.get(t,false,n))!==undefined){return r}return u[e]}},css:function(t,e,i,n){var r,o,s,a=d.camelCase(e);e=d.cssProps[a]||(d.cssProps[a]=Oe(t.style,a));s=d.cssHooks[e]||d.cssHooks[a];if(s&&"get"in s){r=s.get(t,true,i)}if(r===undefined){r=Ce(t,e,n)}if(r==="normal"&&e in ke){r=ke[e]}if(i===""||i){o=parseFloat(r);return i===true||d.isNumeric(o)?o||0:r}return r}});d.each(["height","width"],function(t,e){d.cssHooks[e]={get:function(t,i,n){if(i){return Ee.test(d.css(t,"display"))&&t.offsetWidth===0?d.swap(t,Te,function(){return Ie(t,e,n)}):Ie(t,e,n)}},set:function(t,i,n){var r=n&&xe(t);return Ae(t,i,n?De(t,e,n,d.css(t,"boxSizing",false,r)==="border-box",r):0)}}});d.cssHooks.marginRight=Le(h.reliableMarginRight,function(t,e){if(e){return d.swap(t,{display:"inline-block"},Ce,[t,"marginRight"])}});d.each({margin:"",padding:"",border:"Width"},function(t,e){d.cssHooks[t+e]={expand:function(i){var n=0,r={},o=typeof i==="string"?i.split(" "):[i];for(;n<4;n++){r[t+H[n]+e]=o[n]||o[n-2]||o[0]}return r}};if(!be.test(t)){d.cssHooks[t+e].set=Ae}});d.fn.extend({css:function(t,e){return R(this,function(t,e,i){var n,r,o={},s=0;if(d.isArray(e)){n=xe(t);r=e.length;for(;s<r;s++){o[e[s]]=d.css(t,e[s],false,n)}return o}return i!==undefined?d.style(t,e,i):d.css(t,e)},t,e,arguments.length>1)},show:function(){return Re(this,true)},hide:function(){return Re(this)},toggle:function(t){if(typeof t==="boolean"){return t?this.show():this.hide()}return this.each(function(){if(q(this)){d(this).show()}else{d(this).hide()}})}});function Be(t,e,i,n,r){return new Be.prototype.init(t,e,i,n,r)}d.Tween=Be;Be.prototype={constructor:Be,init:function(t,e,i,n,r,o){this.elem=t;this.prop=i;this.easing=r||"swing";this.options=e;this.start=this.now=this.cur();this.end=n;this.unit=o||(d.cssNumber[i]?"":"px")},cur:function(){var t=Be.propHooks[this.prop];return t&&t.get?t.get(this):Be.propHooks._default.get(this)},run:function(t){var e,i=Be.propHooks[this.prop];if(this.options.duration){this.pos=e=d.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration)}else{this.pos=e=t}this.now=(this.end-this.start)*e+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(i&&i.set){i.set(this)}else{Be.propHooks._default.set(this)}return this}};Be.prototype.init.prototype=Be.prototype;Be.propHooks={_default:{get:function(t){var e;if(t.elem[t.prop]!=null&&(!t.elem.style||t.elem.style[t.prop]==null)){return t.elem[t.prop]}e=d.css(t.elem,t.prop,"");return!e||e==="auto"?0:e},set:function(t){if(d.fx.step[t.prop]){d.fx.step[t.prop](t)}else if(t.elem.style&&(t.elem.style[d.cssProps[t.prop]]!=null||d.cssHooks[t.prop])){d.style(t.elem,t.prop,t.now+t.unit)}else{t.elem[t.prop]=t.now
}}}};Be.propHooks.scrollTop=Be.propHooks.scrollLeft={set:function(t){if(t.elem.nodeType&&t.elem.parentNode){t.elem[t.prop]=t.now}}};d.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}};d.fx=Be.prototype.init;d.fx.step={};var Ne,ze,Ve=/^(?:toggle|show|hide)$/,je=new RegExp("^(?:([+-])=|)("+F+")([a-z%]*)$","i"),Ue=/queueHooks$/,Fe=[Ge],He={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=je.exec(e),o=r&&r[3]||(d.cssNumber[t]?"":"px"),s=(d.cssNumber[t]||o!=="px"&&+n)&&je.exec(d.css(i.elem,t)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3];r=r||[];s=+n||1;do{a=a||".5";s=s/a;d.style(i.elem,t,s+o)}while(a!==(a=i.cur()/n)&&a!==1&&--u)}if(r){s=i.start=+s||+n||0;i.unit=o;i.end=r[1]?s+(r[1]+1)*r[2]:+r[2]}return i}]};function qe(){setTimeout(function(){Ne=undefined});return Ne=d.now()}function Ze(t,e){var i,n=0,r={height:t};e=e?1:0;for(;n<4;n+=2-e){i=H[n];r["margin"+i]=r["padding"+i]=t}if(e){r.opacity=r.width=t}return r}function We(t,e,i){var n,r=(He[e]||[]).concat(He["*"]),o=0,s=r.length;for(;o<s;o++){if(n=r[o].call(i,e,t)){return n}}}function Ge(t,e,i){var n,r,o,s,a,u,l,h,c=this,f={},p=t.style,g=t.nodeType&&q(t),m=N.get(t,"fxshow");if(!i.queue){a=d._queueHooks(t,"fx");if(a.unqueued==null){a.unqueued=0;u=a.empty.fire;a.empty.fire=function(){if(!a.unqueued){u()}}}a.unqueued++;c.always(function(){c.always(function(){a.unqueued--;if(!d.queue(t,"fx").length){a.empty.fire()}})})}if(t.nodeType===1&&("height"in e||"width"in e)){i.overflow=[p.overflow,p.overflowX,p.overflowY];l=d.css(t,"display");h=l==="none"?N.get(t,"olddisplay")||ye(t.nodeName):l;if(h==="inline"&&d.css(t,"float")==="none"){p.display="inline-block"}}if(i.overflow){p.overflow="hidden";c.always(function(){p.overflow=i.overflow[0];p.overflowX=i.overflow[1];p.overflowY=i.overflow[2]})}for(n in e){r=e[n];if(Ve.exec(r)){delete e[n];o=o||r==="toggle";if(r===(g?"hide":"show")){if(r==="show"&&m&&m[n]!==undefined){g=true}else{continue}}f[n]=m&&m[n]||d.style(t,n)}else{l=undefined}}if(!d.isEmptyObject(f)){if(m){if("hidden"in m){g=m.hidden}}else{m=N.access(t,"fxshow",{})}if(o){m.hidden=!g}if(g){d(t).show()}else{c.done(function(){d(t).hide()})}c.done(function(){var e;N.remove(t,"fxshow");for(e in f){d.style(t,e,f[e])}});for(n in f){s=We(g?m[n]:0,n,c);if(!(n in m)){m[n]=s.start;if(g){s.end=s.start;s.start=n==="width"||n==="height"?1:0}}}}else if((l==="none"?ye(t.nodeName):l)==="inline"){p.display=l}}function $e(t,e){var i,n,r,o,s;for(i in t){n=d.camelCase(i);r=e[n];o=t[i];if(d.isArray(o)){r=o[1];o=t[i]=o[0]}if(i!==n){t[n]=o;delete t[i]}s=d.cssHooks[n];if(s&&"expand"in s){o=s.expand(o);delete t[n];for(i in o){if(!(i in t)){t[i]=o[i];e[i]=r}}}else{e[n]=r}}}function Je(t,e,i){var n,r,o=0,s=Fe.length,a=d.Deferred().always(function(){delete u.elem}),u=function(){if(r){return false}var e=Ne||qe(),i=Math.max(0,l.startTime+l.duration-e),n=i/l.duration||0,o=1-n,s=0,u=l.tweens.length;for(;s<u;s++){l.tweens[s].run(o)}a.notifyWith(t,[l,o,i]);if(o<1&&u){return i}else{a.resolveWith(t,[l]);return false}},l=a.promise({elem:t,props:d.extend({},e),opts:d.extend(true,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Ne||qe(),duration:i.duration,tweens:[],createTween:function(e,i){var n=d.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);l.tweens.push(n);return n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(r){return this}r=true;for(;i<n;i++){l.tweens[i].run(1)}if(e){a.resolveWith(t,[l,e])}else{a.rejectWith(t,[l,e])}return this}}),h=l.props;$e(h,l.opts.specialEasing);for(;o<s;o++){n=Fe[o].call(l,t,h,l.opts);if(n){return n}}d.map(h,We,l);if(d.isFunction(l.opts.start)){l.opts.start.call(t,l)}d.fx.timer(d.extend(u,{elem:t,anim:l,queue:l.opts.queue}));return l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}d.Animation=d.extend(Je,{tweener:function(t,e){if(d.isFunction(t)){e=t;t=["*"]}else{t=t.split(" ")}var i,n=0,r=t.length;for(;n<r;n++){i=t[n];He[i]=He[i]||[];He[i].unshift(e)}},prefilter:function(t,e){if(e){Fe.unshift(t)}else{Fe.push(t)}}});d.speed=function(t,e,i){var n=t&&typeof t==="object"?d.extend({},t):{complete:i||!i&&e||d.isFunction(t)&&t,duration:t,easing:i&&e||e&&!d.isFunction(e)&&e};n.duration=d.fx.off?0:typeof n.duration==="number"?n.duration:n.duration in d.fx.speeds?d.fx.speeds[n.duration]:d.fx.speeds._default;if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(d.isFunction(n.old)){n.old.call(this)}if(n.queue){d.dequeue(this,n.queue)}};return n};d.fn.extend({fadeTo:function(t,e,i,n){return this.filter(q).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=d.isEmptyObject(t),o=d.speed(e,i,n),s=function(){var e=Je(this,d.extend({},t),o);if(r||N.get(this,"finish")){e.stop(true)}};s.finish=s;return r||o.queue===false?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop;e(i)};if(typeof t!=="string"){i=e;e=t;t=undefined}if(e&&t!==false){this.queue(t||"fx",[])}return this.each(function(){var e=true,r=t!=null&&t+"queueHooks",o=d.timers,s=N.get(this);if(r){if(s[r]&&s[r].stop){n(s[r])}}else{for(r in s){if(s[r]&&s[r].stop&&Ue.test(r)){n(s[r])}}}for(r=o.length;r--;){if(o[r].elem===this&&(t==null||o[r].queue===t)){o[r].anim.stop(i);e=false;o.splice(r,1)}}if(e||!i){d.dequeue(this,t)}})},finish:function(t){if(t!==false){t=t||"fx"}return this.each(function(){var e,i=N.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=d.timers,s=n?n.length:0;i.finish=true;d.queue(this,t,[]);if(r&&r.stop){r.stop.call(this,true)}for(e=o.length;e--;){if(o[e].elem===this&&o[e].queue===t){o[e].anim.stop(true);o.splice(e,1)}}for(e=0;e<s;e++){if(n[e]&&n[e].finish){n[e].finish.call(this)}}delete i.finish})}});d.each(["toggle","show","hide"],function(t,e){var i=d.fn[e];d.fn[e]=function(t,n,r){return t==null||typeof t==="boolean"?i.apply(this,arguments):this.animate(Ze(e,true),t,n,r)}});d.each({slideDown:Ze("show"),slideUp:Ze("hide"),slideToggle:Ze("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){d.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}});d.timers=[];d.fx.tick=function(){var t,e=0,i=d.timers;Ne=d.now();for(;e<i.length;e++){t=i[e];if(!t()&&i[e]===t){i.splice(e--,1)}}if(!i.length){d.fx.stop()}Ne=undefined};d.fx.timer=function(t){d.timers.push(t);if(t()){d.fx.start()}else{d.timers.pop()}};d.fx.interval=13;d.fx.start=function(){if(!ze){ze=setInterval(d.fx.tick,d.fx.interval)}};d.fx.stop=function(){clearInterval(ze);ze=null};d.fx.speeds={slow:600,fast:200,_default:400};d.fn.delay=function(t,e){t=d.fx?d.fx.speeds[t]||t:t;e=e||"fx";return this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})};(function(){var t=c.createElement("input"),e=c.createElement("select"),i=e.appendChild(c.createElement("option"));t.type="checkbox";h.checkOn=t.value!=="";h.optSelected=i.selected;e.disabled=true;h.optDisabled=!i.disabled;t=c.createElement("input");t.value="t";t.type="radio";h.radioValue=t.value==="t"})();var Xe,Ke,Ye=d.expr.attrHandle;d.fn.extend({attr:function(t,e){return R(this,d.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){d.removeAttr(this,t)})}});d.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(!t||o===3||o===8||o===2){return}if(typeof t.getAttribute===W){return d.prop(t,e,i)}if(o!==1||!d.isXMLDoc(t)){e=e.toLowerCase();n=d.attrHooks[e]||(d.expr.match.bool.test(e)?Ke:Xe)}if(i!==undefined){if(i===null){d.removeAttr(t,e)}else if(n&&"set"in n&&(r=n.set(t,i,e))!==undefined){return r}else{t.setAttribute(e,i+"");return i}}else if(n&&"get"in n&&(r=n.get(t,e))!==null){return r}else{r=d.find.attr(t,e);return r==null?undefined:r}},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(S);if(o&&t.nodeType===1){while(i=o[r++]){n=d.propFix[i]||i;if(d.expr.match.bool.test(i)){t[n]=false}t.removeAttribute(i)}}},attrHooks:{type:{set:function(t,e){if(!h.radioValue&&e==="radio"&&d.nodeName(t,"input")){var i=t.value;t.setAttribute("type",e);if(i){t.value=i}return e}}}}});Ke={set:function(t,e,i){if(e===false){d.removeAttr(t,i)}else{t.setAttribute(i,i)}return i}};d.each(d.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Ye[e]||d.find.attr;Ye[e]=function(t,e,n){var r,o;if(!n){o=Ye[e];Ye[e]=r;r=i(t,e,n)!=null?e.toLowerCase():null;Ye[e]=o}return r}});var Qe=/^(?:input|select|textarea|button)$/i;d.fn.extend({prop:function(t,e){return R(this,d.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[d.propFix[t]||t]})}});d.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,r,o,s=t.nodeType;if(!t||s===3||s===8||s===2){return}o=s!==1||!d.isXMLDoc(t);if(o){e=d.propFix[e]||e;r=d.propHooks[e]}if(i!==undefined){return r&&"set"in r&&(n=r.set(t,i,e))!==undefined?n:t[e]=i}else{return r&&"get"in r&&(n=r.get(t,e))!==null?n:t[e]}},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Qe.test(t.nodeName)||t.href?t.tabIndex:-1}}}});if(!h.optSelected){d.propHooks.selected={get:function(t){var e=t.parentNode;if(e&&e.parentNode){e.parentNode.selectedIndex}return null}}}d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});var ti=/[\t\r\n\f]/g;d.fn.extend({addClass:function(t){var e,i,n,r,o,s,a=typeof t==="string"&&t,u=0,l=this.length;if(d.isFunction(t)){return this.each(function(e){d(this).addClass(t.call(this,e,this.className))})}if(a){e=(t||"").match(S)||[];for(;u<l;u++){i=this[u];n=i.nodeType===1&&(i.className?(" "+i.className+" ").replace(ti," "):" ");if(n){o=0;while(r=e[o++]){if(n.indexOf(" "+r+" ")<0){n+=r+" "}}s=d.trim(n);if(i.className!==s){i.className=s}}}}return this},removeClass:function(t){var e,i,n,r,o,s,a=arguments.length===0||typeof t==="string"&&t,u=0,l=this.length;if(d.isFunction(t)){return this.each(function(e){d(this).removeClass(t.call(this,e,this.className))})}if(a){e=(t||"").match(S)||[];for(;u<l;u++){i=this[u];n=i.nodeType===1&&(i.className?(" "+i.className+" ").replace(ti," "):"");if(n){o=0;while(r=e[o++]){while(n.indexOf(" "+r+" ")>=0){n=n.replace(" "+r+" "," ")}}s=t?d.trim(n):"";if(i.className!==s){i.className=s}}}}return this},toggleClass:function(t,e){var i=typeof t;if(typeof e==="boolean"&&i==="string"){return e?this.addClass(t):this.removeClass(t)}if(d.isFunction(t)){return this.each(function(i){d(this).toggleClass(t.call(this,i,this.className,e),e)})}return this.each(function(){if(i==="string"){var e,n=0,r=d(this),o=t.match(S)||[];while(e=o[n++]){if(r.hasClass(e)){r.removeClass(e)}else{r.addClass(e)}}}else if(i===W||i==="boolean"){if(this.className){N.set(this,"__className__",this.className)}this.className=this.className||t===false?"":N.get(this,"__className__")||""}})},hasClass:function(t){var e=" "+t+" ",i=0,n=this.length;for(;i<n;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(ti," ").indexOf(e)>=0){return true}}return false}});var ei=/\r/g;d.fn.extend({val:function(t){var e,i,n,r=this[0];if(!arguments.length){if(r){e=d.valHooks[r.type]||d.valHooks[r.nodeName.toLowerCase()];if(e&&"get"in e&&(i=e.get(r,"value"))!==undefined){return i}i=r.value;return typeof i==="string"?i.replace(ei,""):i==null?"":i}return}n=d.isFunction(t);return this.each(function(i){var r;if(this.nodeType!==1){return}if(n){r=t.call(this,i,d(this).val())}else{r=t}if(r==null){r=""}else if(typeof r==="number"){r+=""}else if(d.isArray(r)){r=d.map(r,function(t){return t==null?"":t+""})}e=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()];if(!e||!("set"in e)||e.set(this,r,"value")===undefined){this.value=r}})}});d.extend({valHooks:{option:{get:function(t){var e=d.find.attr(t,"value");return e!=null?e:d.trim(d.text(t))}},select:{get:function(t){var e,i,n=t.options,r=t.selectedIndex,o=t.type==="select-one"||r<0,s=o?null:[],a=o?r+1:n.length,u=r<0?a:o?r:0;for(;u<a;u++){i=n[u];if((i.selected||u===r)&&(h.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!d.nodeName(i.parentNode,"optgroup"))){e=d(i).val();if(o){return e}s.push(e)}}return s},set:function(t,e){var i,n,r=t.options,o=d.makeArray(e),s=r.length;while(s--){n=r[s];if(n.selected=d.inArray(n.value,o)>=0){i=true}}if(!i){t.selectedIndex=-1}return o}}}});d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(t,e){if(d.isArray(e)){return t.checked=d.inArray(d(t).val(),e)>=0}}};if(!h.checkOn){d.valHooks[this].get=function(t){return t.getAttribute("value")===null?"on":t.value}}});d.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(t,e){d.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}});d.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return arguments.length===1?this.off(t,"**"):this.off(e,t||"**",i)}});var ii=d.now();var ni=/\?/;d.parseJSON=function(t){return JSON.parse(t+"")};d.parseXML=function(t){var e,i;if(!t||typeof t!=="string"){return null}try{i=new DOMParser;e=i.parseFromString(t,"text/xml")}catch(n){e=undefined}if(!e||e.getElementsByTagName("parsererror").length){d.error("Invalid XML: "+t)}return e};var ri=/#.*$/,oi=/([?&])_=[^&]*/,si=/^(.*?):[ \t]*([^\r\n]*)$/gm,ai=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ui=/^(?:GET|HEAD)$/,li=/^\/\//,hi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ci={},fi={},di="*/".concat("*"),pi=t.location.href,gi=hi.exec(pi.toLowerCase())||[];function mi(t){return function(e,i){if(typeof e!=="string"){i=e;e="*"}var n,r=0,o=e.toLowerCase().match(S)||[];if(d.isFunction(i)){while(n=o[r++]){if(n[0]==="+"){n=n.slice(1)||"*";(t[n]=t[n]||[]).unshift(i)}else{(t[n]=t[n]||[]).push(i)}}}}}function vi(t,e,i,n){var r={},o=t===fi;function s(a){var u;r[a]=true;d.each(t[a]||[],function(t,a){var l=a(e,i,n);if(typeof l==="string"&&!o&&!r[l]){e.dataTypes.unshift(l);s(l);return false}else if(o){return!(u=l)}});return u}return s(e.dataTypes[0])||!r["*"]&&s("*")}function _i(t,e){var i,n,r=d.ajaxSettings.flatOptions||{};for(i in e){if(e[i]!==undefined){(r[i]?t:n||(n={}))[i]=e[i]}}if(n){d.extend(true,t,n)}return t}function yi(t,e,i){var n,r,o,s,a=t.contents,u=t.dataTypes;while(u[0]==="*"){u.shift();if(n===undefined){n=t.mimeType||e.getResponseHeader("Content-Type")}}if(n){for(r in a){if(a[r]&&a[r].test(n)){u.unshift(r);break}}}if(u[0]in i){o=u[0]}else{for(r in i){if(!u[0]||t.converters[r+" "+u[0]]){o=r;break}if(!s){s=r}}o=o||s}if(o){if(o!==u[0]){u.unshift(o)}return i[o]}}function bi(t,e,i,n){var r,o,s,a,u,l={},h=t.dataTypes.slice();if(h[1]){for(s in t.converters){l[s.toLowerCase()]=t.converters[s]}}o=h.shift();while(o){if(t.responseFields[o]){i[t.responseFields[o]]=e}if(!u&&n&&t.dataFilter){e=t.dataFilter(e,t.dataType)}u=o;o=h.shift();if(o){if(o==="*"){o=u}else if(u!=="*"&&u!==o){s=l[u+" "+o]||l["* "+o];if(!s){for(r in l){a=r.split(" ");if(a[1]===o){s=l[u+" "+a[0]]||l["* "+a[0]];if(s){if(s===true){s=l[r]}else if(l[r]!==true){o=a[0];h.unshift(a[1])}break}}}}if(s!==true){if(s&&t["throws"]){e=s(e)}else{try{e=s(e)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+u+" to "+o}}}}}}}return{state:"success",data:e}}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pi,type:"GET",isLocal:ai.test(gi[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":di,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":d.parseJSON,"text xml":d.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(t,e){return e?_i(_i(t,d.ajaxSettings),e):_i(d.ajaxSettings,t)},ajaxPrefilter:mi(ci),ajaxTransport:mi(fi),ajax:function(t,e){if(typeof t==="object"){e=t;t=undefined}e=e||{};var i,n,r,o,s,a,u,l,h=d.ajaxSetup({},e),c=h.context||h,f=h.context&&(c.nodeType||c.jquery)?d(c):d.event,p=d.Deferred(),g=d.Callbacks("once memory"),m=h.statusCode||{},v={},_={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(y===2){if(!o){o={};while(e=si.exec(r)){o[e[1].toLowerCase()]=e[2]}}e=o[t.toLowerCase()]}return e==null?null:e},getAllResponseHeaders:function(){return y===2?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();if(!y){t=_[i]=_[i]||t;v[t]=e}return this},overrideMimeType:function(t){if(!y){h.mimeType=t}return this},statusCode:function(t){var e;if(t){if(y<2){for(e in t){m[e]=[m[e],t[e]]}}else{w.always(t[w.status])}}return this},abort:function(t){var e=t||b;if(i){i.abort(e)}C(0,e);return this}};p.promise(w).complete=g.add;w.success=w.done;w.error=w.fail;h.url=((t||h.url||pi)+"").replace(ri,"").replace(li,gi[1]+"//");h.type=e.method||e.type||h.method||h.type;h.dataTypes=d.trim(h.dataType||"*").toLowerCase().match(S)||[""];if(h.crossDomain==null){a=hi.exec(h.url.toLowerCase());h.crossDomain=!!(a&&(a[1]!==gi[1]||a[2]!==gi[2]||(a[3]||(a[1]==="http:"?"80":"443"))!==(gi[3]||(gi[1]==="http:"?"80":"443"))))}if(h.data&&h.processData&&typeof h.data!=="string"){h.data=d.param(h.data,h.traditional)}vi(ci,h,e,w);if(y===2){return w}u=d.event&&h.global;if(u&&d.active++===0){d.event.trigger("ajaxStart")}h.type=h.type.toUpperCase();h.hasContent=!ui.test(h.type);n=h.url;if(!h.hasContent){if(h.data){n=h.url+=(ni.test(n)?"&":"?")+h.data;delete h.data}if(h.cache===false){h.url=oi.test(n)?n.replace(oi,"$1_="+ii++):n+(ni.test(n)?"&":"?")+"_="+ii++}}if(h.ifModified){if(d.lastModified[n]){w.setRequestHeader("If-Modified-Since",d.lastModified[n])}if(d.etag[n]){w.setRequestHeader("If-None-Match",d.etag[n])}}if(h.data&&h.hasContent&&h.contentType!==false||e.contentType){w.setRequestHeader("Content-Type",h.contentType)}w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+di+"; q=0.01":""):h.accepts["*"]);for(l in h.headers){w.setRequestHeader(l,h.headers[l])}if(h.beforeSend&&(h.beforeSend.call(c,w,h)===false||y===2)){return w.abort()}b="abort";for(l in{success:1,error:1,complete:1}){w[l](h[l])}i=vi(fi,h,e,w);if(!i){C(-1,"No Transport")}else{w.readyState=1;if(u){f.trigger("ajaxSend",[w,h])}if(h.async&&h.timeout>0){s=setTimeout(function(){w.abort("timeout")},h.timeout)}try{y=1;i.send(v,C)}catch(x){if(y<2){C(-1,x)}else{throw x}}}function C(t,e,o,a){var l,v,_,b,x,C=e;if(y===2){return}y=2;if(s){clearTimeout(s)}i=undefined;r=a||"";w.readyState=t>0?4:0;l=t>=200&&t<300||t===304;if(o){b=yi(h,w,o)}b=bi(h,b,w,l);if(l){if(h.ifModified){x=w.getResponseHeader("Last-Modified");if(x){d.lastModified[n]=x}x=w.getResponseHeader("etag");if(x){d.etag[n]=x}}if(t===204||h.type==="HEAD"){C="nocontent"}else if(t===304){C="notmodified"}else{C=b.state;v=b.data;_=b.error;l=!_}}else{_=C;if(t||!C){C="error";if(t<0){t=0}}}w.status=t;w.statusText=(e||C)+"";if(l){p.resolveWith(c,[v,C,w])}else{p.rejectWith(c,[w,C,_])}w.statusCode(m);m=undefined;if(u){f.trigger(l?"ajaxSuccess":"ajaxError",[w,h,l?v:_])}g.fireWith(c,[w,C]);if(u){f.trigger("ajaxComplete",[w,h]);if(!--d.active){d.event.trigger("ajaxStop")}}}return w},getJSON:function(t,e,i){return d.get(t,e,i,"json")},getScript:function(t,e){return d.get(t,undefined,e,"script")}});d.each(["get","post"],function(t,e){d[e]=function(t,i,n,r){if(d.isFunction(i)){r=r||n;n=i;i=undefined}return d.ajax({url:t,type:e,dataType:r,data:i,success:n})}});d._evalUrl=function(t){return d.ajax({url:t,type:"GET",dataType:"script",async:false,global:false,"throws":true})};d.fn.extend({wrapAll:function(t){var e;if(d.isFunction(t)){return this.each(function(e){d(this).wrapAll(t.call(this,e))})}if(this[0]){e=d(t,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){e.insertBefore(this[0])}e.map(function(){var t=this;while(t.firstElementChild){t=t.firstElementChild}return t}).append(this)}return this},wrapInner:function(t){if(d.isFunction(t)){return this.each(function(e){d(this).wrapInner(t.call(this,e))})}return this.each(function(){var e=d(this),i=e.contents();if(i.length){i.wrapAll(t)}else{e.append(t)}})},wrap:function(t){var e=d.isFunction(t);return this.each(function(i){d(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){if(!d.nodeName(this,"body")){d(this).replaceWith(this.childNodes)}}).end()}});d.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0};d.expr.filters.visible=function(t){return!d.expr.filters.hidden(t)};var wi=/%20/g,xi=/\[\]$/,Ci=/\r?\n/g,Li=/^(?:submit|button|image|reset|file)$/i,Ei=/^(?:input|select|textarea|keygen)/i;function Mi(t,e,i,n){var r;if(d.isArray(e)){d.each(e,function(e,r){if(i||xi.test(t)){n(t,r)}else{Mi(t+"["+(typeof r==="object"?e:"")+"]",r,i,n)}})}else if(!i&&d.type(e)==="object"){for(r in e){Mi(t+"["+r+"]",e[r],i,n)}}else{n(t,e)}}d.param=function(t,e){var i,n=[],r=function(t,e){e=d.isFunction(e)?e():e==null?"":e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===undefined){e=d.ajaxSettings&&d.ajaxSettings.traditional}if(d.isArray(t)||t.jquery&&!d.isPlainObject(t)){d.each(t,function(){r(this.name,this.value)})}else{for(i in t){Mi(i,t[i],e,r)}}return n.join("&").replace(wi,"+")};d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=d.prop(this,"elements");return t?d.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!d(this).is(":disabled")&&Ei.test(this.nodeName)&&!Li.test(t)&&(this.checked||!Z.test(t))}).map(function(t,e){var i=d(this).val();return i==null?null:d.isArray(i)?d.map(i,function(t){return{name:e.name,value:t.replace(Ci,"\r\n")}}):{name:e.name,value:i.replace(Ci,"\r\n")}}).get()}});d.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Pi=0,Ti={},ki={0:200,1223:204},Si=d.ajaxSettings.xhr();if(t.attachEvent){t.attachEvent("onunload",function(){for(var t in Ti){Ti[t]()}})}h.cors=!!Si&&"withCredentials"in Si;h.ajax=Si=!!Si;d.ajaxTransport(function(t){var e;if(h.cors||Si&&!t.crossDomain){return{send:function(i,n){var r,o=t.xhr(),s=++Pi;o.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields){for(r in t.xhrFields){o[r]=t.xhrFields[r]}}if(t.mimeType&&o.overrideMimeType){o.overrideMimeType(t.mimeType)}if(!t.crossDomain&&!i["X-Requested-With"]){i["X-Requested-With"]="XMLHttpRequest"}for(r in i){o.setRequestHeader(r,i[r])}e=function(t){return function(){if(e){delete Ti[s];e=o.onload=o.onerror=null;if(t==="abort"){o.abort()}else if(t==="error"){n(o.status,o.statusText)}else{n(ki[o.status]||o.status,o.statusText,typeof o.responseText==="string"?{text:o.responseText}:undefined,o.getAllResponseHeaders())}}}};o.onload=e();o.onerror=e("error");e=Ti[s]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e){throw a}}},abort:function(){if(e){e()}}}}});d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){d.globalEval(t);return t}}});d.ajaxPrefilter("script",function(t){if(t.cache===undefined){t.cache=false}if(t.crossDomain){t.type="GET"}});d.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,r){e=d("<script>").prop({async:true,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove();i=null;if(t){r(t.type==="error"?404:200,t.type)}});c.head.appendChild(e[0])},abort:function(){if(i){i()}}}}});var Oi=[],Ai=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Oi.pop()||d.expando+"_"+ii++;this[t]=true;return t}});d.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=e.jsonp!==false&&(Ai.test(e.url)?"url":typeof e.data==="string"&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ai.test(e.data)&&"data");if(a||e.dataTypes[0]==="jsonp"){r=e.jsonpCallback=d.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(a){e[a]=e[a].replace(Ai,"$1"+r)}else if(e.jsonp!==false){e.url+=(ni.test(e.url)?"&":"?")+e.jsonp+"="+r}e.converters["script json"]=function(){if(!s){d.error(r+" was not called")}return s[0]};e.dataTypes[0]="json";o=t[r];t[r]=function(){s=arguments};n.always(function(){t[r]=o;if(e[r]){e.jsonpCallback=i.jsonpCallback;Oi.push(r)}if(s&&d.isFunction(o)){o(s[0])}s=o=undefined});return"script"}});d.parseHTML=function(t,e,i){if(!t||typeof t!=="string"){return null}if(typeof e==="boolean"){i=e;e=false}e=e||c;var n=w.exec(t),r=!i&&[];if(n){return[e.createElement(n[1])]}n=d.buildFragment([t],e,r);if(r&&r.length){d(r).remove()}return d.merge([],n.childNodes)};var Di=d.fn.load;d.fn.load=function(t,e,i){if(typeof t!=="string"&&Di){return Di.apply(this,arguments)}var n,r,o,s=this,a=t.indexOf(" ");if(a>=0){n=d.trim(t.slice(a));t=t.slice(0,a)}if(d.isFunction(e)){i=e;e=undefined}else if(e&&typeof e==="object"){r="POST"}if(s.length>0){d.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments;s.html(n?d("<div>").append(d.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){s.each(i,o||[t.responseText,e,t])})}return this};d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){d.fn[e]=function(t){return this.on(e,t)}});d.expr.filters.animated=function(t){return d.grep(d.timers,function(e){return t===e.elem}).length};var Ii=t.document.documentElement;function Ri(t){return d.isWindow(t)?t:t.nodeType===9&&t.defaultView}d.offset={setOffset:function(t,e,i){var n,r,o,s,a,u,l,h=d.css(t,"position"),c=d(t),f={};if(h==="static"){t.style.position="relative"}a=c.offset();o=d.css(t,"top");u=d.css(t,"left");l=(h==="absolute"||h==="fixed")&&(o+u).indexOf("auto")>-1;if(l){n=c.position();s=n.top;r=n.left}else{s=parseFloat(o)||0;r=parseFloat(u)||0}if(d.isFunction(e)){e=e.call(t,i,a)}if(e.top!=null){f.top=e.top-a.top+s}if(e.left!=null){f.left=e.left-a.left+r}if("using"in e){e.using.call(t,f)}else{c.css(f)}}};d.fn.extend({offset:function(t){if(arguments.length){return t===undefined?this:this.each(function(e){d.offset.setOffset(this,t,e)})}var e,i,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;if(!o){return}e=o.documentElement;if(!d.contains(e,n)){return r}if(typeof n.getBoundingClientRect!==W){r=n.getBoundingClientRect()}i=Ri(o);return{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}},position:function(){if(!this[0]){return}var t,e,i=this[0],n={top:0,left:0};if(d.css(i,"position")==="fixed"){e=i.getBoundingClientRect()}else{t=this.offsetParent();e=this.offset();if(!d.nodeName(t[0],"html")){n=t.offset()}n.top+=d.css(t[0],"borderTopWidth",true);n.left+=d.css(t[0],"borderLeftWidth",true)}return{top:e.top-n.top-d.css(i,"marginTop",true),left:e.left-n.left-d.css(i,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var t=this.offsetParent||Ii;while(t&&(!d.nodeName(t,"html")&&d.css(t,"position")==="static")){t=t.offsetParent}return t||Ii})}});d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;d.fn[e]=function(r){return R(this,function(e,r,o){var s=Ri(e);if(o===undefined){return s?s[i]:e[r]}if(s){s.scrollTo(!n?o:t.pageXOffset,n?o:t.pageYOffset)}else{e[r]=o}},e,r,arguments.length,null)}});d.each(["top","left"],function(t,e){d.cssHooks[e]=Le(h.pixelPosition,function(t,i){if(i){i=Ce(t,e);return we.test(i)?d(t).position()[e]+"px":i}})});d.each({Height:"height",Width:"width"},function(t,e){d.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){d.fn[n]=function(n,r){var o=arguments.length&&(i||typeof n!=="boolean"),s=i||(n===true||r===true?"margin":"border");return R(this,function(e,i,n){var r;if(d.isWindow(e)){return e.document.documentElement["client"+t]}if(e.nodeType===9){r=e.documentElement;return Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])}return n===undefined?d.css(e,i,s):d.style(e,i,n,s)},e,o?n:undefined,o,null)}})});d.fn.size=function(){return this.length};d.fn.andSelf=d.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return d})}var Bi=t.jQuery,Ni=t.$;d.noConflict=function(e){if(t.$===d){t.$=Ni}if(e&&t.jQuery===d){t.jQuery=Bi}return d};if(typeof e===W){t.jQuery=t.$=d}return d})},{}],29:[function(t,e,i){!function(t,e){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[]},addLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var i in t._layers)e.push(t._layers[i]);return this.addLayers(e)}if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this;if(!this._map)return this._needsClustering.push(t),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom);var n=t,r=this._map.getZoom();if(t.__parent)for(;n.__parent._zoom>=r;)n=n.__parent;return this._currentShownBounds.contains(n.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,n):this._animationAddLayerNonAnimated(t,n)),this},removeLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var i in t._layers)e.push(t._layers[i]);return this.removeLayers(e)}return t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.setOpacity&&t.setOpacity(1)),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push(t),this):(this._nonPointGroup.removeLayer(t),this)},addLayers:function(t){var e,i,n,r=this._map,o=this._featureGroup,s=this._nonPointGroup;for(e=0,i=t.length;i>e;e++)if(n=t[e],n.getLatLng){if(!this.hasLayer(n))if(r){if(this._addLayer(n,this._maxZoom),n.__parent&&2===n.__parent.getChildCount()){var a=n.__parent.getAllChildMarkers(),u=a[0]===n?a[1]:a[0];o.removeLayer(u)}}else this._needsClustering.push(n)}else s.addLayer(n);return r&&(o.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)),this},removeLayers:function(t){var e,i,n,r=this._featureGroup,o=this._nonPointGroup;if(!this._map){for(e=0,i=t.length;i>e;e++)n=t[e],this._arraySplice(this._needsClustering,n),o.removeLayer(n);return this}for(e=0,i=t.length;i>e;e++)n=t[e],n.__parent?(this._removeLayer(n,!0,!0),r.hasLayer(n)&&(r.removeLayer(n),n.setOpacity&&n.setOpacity(1))):o.removeLayer(n);return this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),r.eachLayer(function(t){t instanceof L.MarkerCluster&&t._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){delete t.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;
if(this._topClusterLevel)t.extend(this._topClusterLevel._bounds);else for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(n),i=n.length-1;i>=0;i--)t.call(e,n[i]);this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return this.eachLayer(function(i){L.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(i=this._needsRemoving,e=i.length-1;e>=0;e--)if(i[e]===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=function(){if((t._icon||t.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",i,this),this.off("animationend",i,this),t._icon)e();else if(t.__parent._icon){var n=function(){this.off("spiderfied",n,this),e()};this.on("spiderfied",n,this),t.__parent.spiderfy()}};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<this._map.getZoom()?(this._map.on("moveend",i,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),this._map.setView(t.getLatLng(),t.__parent._zoom+1),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var e,i,n;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.onAdd(t),this._nonPointGroup.onAdd(t),this._gridClusters||this._generateInitialClusters(),e=0,i=this._needsRemoving.length;i>e;e++)n=this._needsRemoving[e],this._removeLayer(n,!0);for(this._needsRemoving=[],e=0,i=this._needsClustering.length;i>e;e++)n=this._needsClustering[e],n.getLatLng?n.__parent||this._addLayer(n,this._maxZoom):this._featureGroup.addLayer(n);this._needsClustering=[],this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),this._hideCoverage(),this._featureGroup.onRemove(t),this._nonPointGroup.onRemove(t),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeLayer:function(t,e,i){var n=this._gridClusters,r=this._gridUnclustered,o=this._featureGroup,s=this._map;if(e)for(var a=this._maxZoom;a>=0&&r[a].removeObject(t,s.project(t.getLatLng(),a));a--);var u,l=t.__parent,h=l._markers;for(this._arraySplice(h,t);l&&(l._childCount--,!(l._zoom<0));)e&&l._childCount<=1?(u=l._markers[0]===t?l._markers[1]:l._markers[0],n[l._zoom].removeObject(l,s.project(l._cLatLng,l._zoom)),r[l._zoom].addObject(u,s.project(u.getLatLng(),l._zoom)),this._arraySplice(l.__parent._childClusters,l),l.__parent._markers.push(u),u.__parent=l.__parent,l._icon&&(o.removeLayer(l),i||o.addLayer(u))):(l._recalculateBounds(),i&&l._icon||l._updateIcon()),l=l.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},_propagateEvent:function(t){if(t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;t.type="cluster"+t.type}this.fire(t.type,t)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=10>e?"small":100>e?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=this._map;e.getMaxZoom()===e.getZoom()?this.options.spiderfyOnMaxZoom&&t.layer.spiderfy():this.options.zoomToBoundsOnClick&&t.layer.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&e._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._map._zoom,t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=this._map.getMaxZoom(),e=this.options.maxClusterRadius;this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var i=t;i>=0;i--)this._gridClusters[i]=new L.DistanceGrid(e),this._gridUnclustered[i]=new L.DistanceGrid(e);this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(t,e){var i,n,r=this._gridClusters,o=this._gridUnclustered;for(this.options.singleMarkerMode&&(t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}}));e>=0;e--){i=this._map.project(t.getLatLng(),e);var s=r[e].getNearObject(i);if(s)return s._addChild(t),t.__parent=s,void 0;if(s=o[e].getNearObject(i)){var a=s.__parent;a&&this._removeLayer(s,!1);var u=new L.MarkerCluster(this,e,s,t);r[e].addObject(u,this._map.project(u._cLatLng,e)),s.__parent=u,t.__parent=u;var l=u;for(n=e-1;n>a._zoom;n--)l=new L.MarkerCluster(this,n,l),r[n].addObject(l,this._map.project(s.getLatLng(),n));for(a._addChild(l),n=e;n>=0&&o[n].removeObject(s,this._map.project(s.getLatLng(),n));n--);return}o[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){this._processQueue(),this._zoom<this._map._zoom&&this._currentShownBounds.contains(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds)return this.getBounds();var t=this._map,e=t.getBounds(),i=e._southWest,n=e._northEast,r=L.Browser.mobile?0:Math.abs(i.lat-n.lat),o=L.Browser.mobile?0:Math.abs(i.lng-n.lng);return new L.LatLngBounds(new L.LatLng(i.lat-r,i.lng-o,!0),new L.LatLng(n.lat+r,n.lng+o,!0))},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()}}),L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_animationZoomIn:function(t,e){var i,n=this._getExpandedVisibleBounds(),r=this._featureGroup;this._topClusterLevel._recursively(n,t,0,function(o){var s,a=o._latlng,u=o._markers;for(n.contains(a)||(a=null),o._isSingleParent()&&t+1===e?(r.removeLayer(o),o._recursivelyAddChildrenToMap(null,e,n)):(o.setOpacity(0),o._recursivelyAddChildrenToMap(a,e,n)),i=u.length-1;i>=0;i--)s=u[i],n.contains(s._latlng)||r.removeLayer(s)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,e),r.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.setOpacity(1)}),this._topClusterLevel._recursively(n,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),this._enqueue(function(){this._topClusterLevel._recursively(n,t,0,function(t){r.removeLayer(t),t.setOpacity(1)}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds();t._recursivelyAnimateChildrenInAndAddSelfToMap(n,e+1,i);var r=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue(function(){if(1===t._childCount){var o=t._markers[0];o.setLatLng(o.getLatLng()),o.setOpacity(1)}else t._recursively(n,i,0,function(t){t._recursivelyRemoveChildrenFromMap(n,e+1)});r._animationEnd()})},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.setOpacity(0),this._enqueue(function(){n.removeLayer(t),t.setOpacity(1),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(e.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds())},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)},L.MarkerCluster=L.Marker.extend({initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e].getAllChildMarkers(t);for(var i=this._markers.length-1;i>=0;i--)t.push(this._markers[i]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var t,e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),r=this._zoom+1,o=i.getZoom();e.length>0&&n>r;){r++;var s=[];for(t=0;t<e.length;t++)s=s.concat(e[t]._childClusters);e=s}n>r?this._group._map.setView(this._latlng,r):o>=n?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._expandBounds(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_expandBounds:function(t){var e,i=t._wLatLng||t._latlng;t instanceof L.MarkerCluster?(this._bounds.extend(t._bounds),e=t._childCount):(this._bounds.extend(i),e=1),this._cLatLng||(this._cLatLng=t._cLatLng||i);var n=this._childCount+e;this._wLatLng?(this._wLatLng.lat=(i.lat*e+this._wLatLng.lat*this._childCount)/n,this._wLatLng.lng=(i.lng*e+this._wLatLng.lng*this._childCount)/n):this._latlng=this._wLatLng=new L.LatLng(i.lat,i.lng)},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,0,i-1,function(t){var i,n,r=t._markers;for(i=r.length-1;i>=0;i--)n=r[i],n._icon&&(n._setPos(e),n.setOpacity(0))},function(t){var i,n,r=t._childClusters;for(i=r.length-1;i>=0;i--)n=r[i],n._icon&&(n._setPos(e),n.setOpacity(0))})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i){this._recursively(t,i,0,function(n){n._recursivelyAnimateChildrenIn(t,n._group._map.latLngToLayerPoint(n.getLatLng()).round(),e),n._isSingleParent()&&e-1===i?(n.setOpacity(1),n._recursivelyRemoveChildrenFromMap(t,e)):n.setOpacity(0),n._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,0,e,null,function(t){t.setOpacity(1)})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,-1,e,function(n){if(e!==n._zoom)for(var r=n._markers.length-1;r>=0;r--){var o=n._markers[r];i.contains(o._latlng)&&(t&&(o._backupLatlng=o.getLatLng(),o.setLatLng(t),o.setOpacity&&o.setOpacity(0)),n._group._featureGroup.addLayer(o))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i){var n,r;this._recursively(t,-1,e-1,function(t){for(r=t._markers.length-1;r>=0;r--)n=t._markers[r],i&&i.contains(n._latlng)||(t._group._featureGroup.removeLayer(n),n.setOpacity&&n.setOpacity(1))},function(t){for(r=t._childClusters.length-1;r>=0;r--)n=t._childClusters[r],i&&i.contains(n._latlng)||(t._group._featureGroup.removeLayer(n),n.setOpacity&&n.setOpacity(1))})},_recursively:function(t,e,i,n,r){var o,s,a=this._childClusters,u=this._zoom;if(e>u)for(o=a.length-1;o>=0;o--)s=a[o],t.intersects(s._bounds)&&s._recursively(t,e,i,n,r);else if(n&&n(this),r&&this._zoom===i&&r(this),i>u)for(o=a.length-1;o>=0;o--)s=a[o],t.intersects(s._bounds)&&s._recursively(t,e,i,n,r)},_recalculateBounds:function(){var t,e=this._markers,i=this._childClusters;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,t=e.length-1;t>=0;t--)this._expandBounds(e[t]);for(t=i.length-1;t>=0;t--)this._expandBounds(i[t])},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),r=this._grid,o=r[n]=r[n]||{},s=o[i]=o[i]||[],a=L.Util.stamp(t);this._objectPoint[a]=e,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,r=this._getCoord(e.x),o=this._getCoord(e.y),s=this._grid,a=s[o]=s[o]||{},u=a[r]=a[r]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=u.length;n>i;i++)if(u[i]===t)return u.splice(i,1),1===n&&delete a[r],!0},eachObject:function(t,e){var i,n,r,o,s,a,u,l=this._grid;for(i in l){s=l[i];for(n in s)for(a=s[n],r=0,o=a.length;o>r;r++)u=t.call(e,a[r]),u&&(r--,o--)}},getNearObject:function(t){var e,i,n,r,o,s,a,u,l=this._getCoord(t.x),h=this._getCoord(t.y),c=this._objectPoint,f=this._sqCellSize,d=null;for(e=h-1;h+1>=e;e++)if(r=this._grid[e])for(i=l-1;l+1>=i;i++)if(o=r[i])for(n=0,s=o.length;s>n;n++)a=o[n],u=this._sqDist(c[L.Util.stamp(a)],t),f>u&&(f=u,d=a);return d},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat,n=e[0].lng-e[1].lng;return n*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,r,o=0,s=null,a=[];for(i=e.length-1;i>=0;i--)n=e[i],r=this.getDistant(n,t),r>0&&(a.push(n),r>o&&(o=r,s=n));return{maxPoint:s,newPoints:a}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints)),i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints))):[t[0]]},getConvexHull:function(t){var e,i=!1,n=!1,r=null,o=null;for(e=t.length-1;e>=0;e--){var s=t[e];(i===!1||s.lat>i)&&(r=s,i=s.lat),(n===!1||s.lat<n)&&(o=s,n=s.lat)}var a=[].concat(this.buildConvexHull([o,r],t),this.buildConvexHull([r,o],t));return a}}}(),L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),n=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),n.push(t);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),i=this._group,n=i._map,r=n.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,r):(r.y+=10,t=this._generatePointsCircle(e.length,r)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),o=r/this._2PI,s=this._2PI/t,a=[];for(a.length=t,i=t-1;i>=0;i--)n=this._circleStartAngle+i*s,a[i]=new L.Point(e.x+o*Math.cos(n),e.y+o*Math.sin(n))._round();return a},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,r=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,o=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,s=0,a=[];for(a.length=t,i=t-1;i>=0;i--)s+=r/n+5e-4*i,a[i]=new L.Point(e.x+n*Math.cos(s),e.y+n*Math.sin(s))._round(),n+=this._2PI*o/s;return a},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,r=i._featureGroup,o=this.getAllChildMarkers();for(this.setOpacity(1),e=o.length-1;e>=0;e--)t=o[e],r.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i._spiderfied=null}}),L.MarkerCluster.include(L.DomUtil.TRANSITION?{SVG_ANIMATION:function(){return e.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate")>-1}(),_animationSpiderfy:function(t,i){var n,r,o,s,a=this,u=this._group,l=u._map,h=u._featureGroup,c=l.latLngToLayerPoint(this._latlng);for(n=t.length-1;n>=0;n--)r=t[n],r.setOpacity?(r.setZIndexOffset(1e6),r.setOpacity(0),h.addLayer(r),r._setPos(c)):h.addLayer(r);u._forceLayout(),u._animationStart();var f=L.Path.SVG?0:.3,d=L.Path.SVG_NS;for(n=t.length-1;n>=0;n--)if(s=l.layerPointToLatLng(i[n]),r=t[n],r._preSpiderfyLatlng=r._latlng,r.setLatLng(s),r.setOpacity&&r.setOpacity(1),o=new L.Polyline([a._latlng,s],{weight:1.5,color:"#222",opacity:f}),l.addLayer(o),r._spiderLeg=o,L.Path.SVG&&this.SVG_ANIMATION){var p=o._path.getTotalLength();o._path.setAttribute("stroke-dasharray",p+","+p);var g=e.createElementNS(d,"animate");g.setAttribute("attributeName","stroke-dashoffset"),g.setAttribute("begin","indefinite"),g.setAttribute("from",p),g.setAttribute("to",0),g.setAttribute("dur",.25),o._path.appendChild(g),g.beginElement(),g=e.createElementNS(d,"animate"),g.setAttribute("attributeName","stroke-opacity"),g.setAttribute("attributeName","stroke-opacity"),g.setAttribute("begin","indefinite"),g.setAttribute("from",0),g.setAttribute("to",.5),g.setAttribute("dur",.25),o._path.appendChild(g),g.beginElement()}if(a.setOpacity(.3),L.Path.SVG)for(this._group._forceLayout(),n=t.length-1;n>=0;n--)r=t[n]._spiderLeg,r.options.opacity=.5,r._path.setAttribute("stroke-opacity",.5);setTimeout(function(){u._animationEnd(),u.fire("spiderfied")},200)},_animationUnspiderfy:function(t){var e,i,n,r=this._group,o=r._map,s=r._featureGroup,a=t?o._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):o.latLngToLayerPoint(this._latlng),u=this.getAllChildMarkers(),l=L.Path.SVG&&this.SVG_ANIMATION;for(r._animationStart(),this.setOpacity(1),i=u.length-1;i>=0;i--)e=u[i],e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,e.setOpacity?(e._setPos(a),e.setOpacity(0)):s.removeLayer(e),l&&(n=e._spiderLeg._path.childNodes[0],n.setAttribute("to",n.getAttribute("from")),n.setAttribute("from",0),n.beginElement(),n=e._spiderLeg._path.childNodes[1],n.setAttribute("from",.5),n.setAttribute("to",0),n.setAttribute("stroke-opacity",0),n.beginElement(),e._spiderLeg._path.setAttribute("stroke-opacity",0)));setTimeout(function(){var t=0;for(i=u.length-1;i>=0;i--)e=u[i],e._spiderLeg&&t++;for(i=u.length-1;i>=0;i--)e=u[i],e._spiderLeg&&(e.setOpacity&&(e.setOpacity(1),e.setZIndexOffset(0)),t>1&&s.removeLayer(e),o.removeLayer(e._spiderLeg),delete e._spiderLeg);r._animationEnd()},200)}}:{_animationSpiderfy:function(t,e){var i,n,r,o,s=this._group,a=s._map,u=s._featureGroup;for(i=t.length-1;i>=0;i--)o=a.layerPointToLatLng(e[i]),n=t[i],n._preSpiderfyLatlng=n._latlng,n.setLatLng(o),n.setZIndexOffset&&n.setZIndexOffset(1e6),u.addLayer(n),r=new L.Polyline([this._latlng,o],{weight:1.5,color:"#222"}),a.addLayer(r),n._spiderLeg=r;this.setOpacity(.3),s.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.setOpacity(1),t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}})}(window,document)},{}],30:[function(t,e,i){(function(t,i,n){var r=t.L,o={};o.version="0.7.2";if(typeof e==="object"&&typeof e.exports==="object"){e.exports=o}else if(typeof define==="function"&&define.amd){define(o)}o.noConflict=function(){t.L=r;return this};t.L=o;o.Util={extend:function(t){var e=Array.prototype.slice.call(arguments,1),i,n,r,o;for(n=0,r=e.length;n<r;n++){o=e[n]||{};for(i in o){if(o.hasOwnProperty(i)){t[i]=o[i]}}}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){i[e]=i[e]||++t;return i[e]}}(),invokeEach:function(t,e,i){var n,r;if(typeof t==="object"){r=Array.prototype.slice.call(arguments,3);for(n in t){e.apply(i,[n,t[n]].concat(r))}return true}return false},limitExecByInterval:function(t,e,i){var n,r;return function o(){var s=arguments;if(n){r=true;return}n=true;setTimeout(function(){n=false;if(r){o.apply(i,s);r=false}},e);t.apply(i,s)}},falseFn:function(){return false},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.options=o.extend({},t.options,e);return t.options},getParamString:function(t,e,i){var n=[];for(var r in t){n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(t[r]))}return(!e||e.indexOf("?")===-1?"?":"&")+n.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var r=e[i];if(r===n){throw new Error("No value provided for variable "+t)}else if(typeof r==="function"){r=r(e)}return r})},isArray:Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function e(e){var i,n,r=["webkit","moz","o","ms"];for(i=0;i<r.length&&!n;i++){n=t[r[i]+e]}return n}var i=0;function n(e){var n=+new Date,r=Math.max(0,16-(n-i));i=n+r;return t.setTimeout(e,r)}var r=t.requestAnimationFrame||e("RequestAnimationFrame")||n;var s=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,i,s,a){e=o.bind(e,i);if(s&&r===n){e()}else{return r.call(t,e,a)}};o.Util.cancelAnimFrame=function(e){if(e){s.call(t,e)}}})();o.extend=o.Util.extend;o.bind=o.Util.bind;o.stamp=o.Util.stamp;o.setOptions=o.Util.setOptions;o.Class=function(){};o.Class.extend=function(t){var e=function(){if(this.initialize){this.initialize.apply(this,arguments)}if(this._initHooks){this.callInitHooks()}};var i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e;e.prototype=n;for(var r in this){if(this.hasOwnProperty(r)&&r!=="prototype"){e[r]=this[r]}}if(t.statics){o.extend(e,t.statics);delete t.statics}if(t.includes){o.Util.extend.apply(null,[n].concat(t.includes));delete t.includes}if(t.options&&n.options){t.options=o.extend({},n.options,t.options)}o.extend(n,t);n._initHooks=[];var s=this;e.__super__=s.prototype;n.callInitHooks=function(){if(this._initHooksCalled){return}if(s.prototype.callInitHooks){s.prototype.callInitHooks.call(this)}this._initHooksCalled=true;for(var t=0,e=n._initHooks.length;t<e;t++){n._initHooks[t].call(this)}};return e};o.Class.include=function(t){o.extend(this.prototype,t)};o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)};o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1);var i=typeof t==="function"?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(i)};var s="_leaflet_events";o.Mixin={};o.Mixin.Events={addEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addEventListener,this,e,i)){return this}var n=this[s]=this[s]||{},r=i&&i!==this&&o.stamp(i),a,u,l,h,c,f,d;t=o.Util.splitWords(t);for(a=0,u=t.length;a<u;a++){l={action:e,context:i||this};h=t[a];if(r){c=h+"_idx";f=c+"_len";d=n[c]=n[c]||{};if(!d[r]){d[r]=[];n[f]=(n[f]||0)+1}d[r].push(l)}else{n[h]=n[h]||[];n[h].push(l)}}return this},hasEventListeners:function(t){var e=this[s];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,i){if(!this[s]){return this}if(!t){return this.clearAllEventListeners()}if(o.Util.invokeEach(t,this.removeEventListener,this,e,i)){return this}var n=this[s],r=i&&i!==this&&o.stamp(i),a,u,l,h,c,f,d,p,g;t=o.Util.splitWords(t);for(a=0,u=t.length;a<u;a++){l=t[a];f=l+"_idx";d=f+"_len";p=n[f];if(!e){delete n[l];delete n[f];delete n[d]}else{h=r&&p?p[r]:n[l];if(h){for(c=h.length-1;c>=0;c--){if(h[c].action===e&&(!i||h[c].context===i)){g=h.splice(c,1);g[0].action=o.Util.falseFn}}if(i&&p&&h.length===0){delete p[r];n[d]--}}}}return this},clearAllEventListeners:function(){delete this[s];return this},fireEvent:function(t,e){if(!this.hasEventListeners(t)){return this}var i=o.Util.extend({},e,{type:t,target:this});var n=this[s],r,a,u,l,h;if(n[t]){r=n[t].slice();for(a=0,u=r.length;a<u;a++){r[a].action.call(r[a].context,i)}}l=n[t+"_idx"];for(h in l){r=l[h].slice();if(r){for(a=0,u=r.length;a<u;a++){r[a].action.call(r[a].context,i)}}}return this},addOneTimeEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i)){return this}var n=o.bind(function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)},this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}};o.Mixin.Events.on=o.Mixin.Events.addEventListener;o.Mixin.Events.off=o.Mixin.Events.removeEventListener;o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener;o.Mixin.Events.fire=o.Mixin.Events.fireEvent;(function(){var e="ActiveXObject"in t,r=e&&!i.addEventListener,s=navigator.userAgent.toLowerCase(),a=s.indexOf("webkit")!==-1,u=s.indexOf("chrome")!==-1,l=s.indexOf("phantom")!==-1,h=s.indexOf("android")!==-1,c=s.search("android [23]")!==-1,f=s.indexOf("gecko")!==-1,d=typeof orientation!==n+"",p=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints&&!t.PointerEvent,g=t.PointerEvent&&t.navigator.pointerEnabled&&t.navigator.maxTouchPoints||p,m="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,v=i.documentElement,_=e&&"transition"in v.style,y="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!c,b="MozPerspective"in v.style,w="OTransition"in v.style,x=!t.L_DISABLE_3D&&(_||y||b||w)&&!l;var C=!t.L_NO_TOUCH&&!l&&function(){var t="ontouchstart";if(g||t in v){return true}var e=i.createElement("div"),n=false;if(!e.setAttribute){return false}e.setAttribute(t,"return;");if(typeof e[t]==="function"){n=true}e.removeAttribute(t);e=null;return n}();o.Browser={ie:e,ielt9:r,webkit:a,gecko:f&&!a&&!t.opera&&!e,android:h,android23:c,chrome:u,ie3d:_,webkit3d:y,gecko3d:b,opera3d:w,any3d:x,mobile:d,mobileWebkit:d&&a,mobileWebkit3d:d&&y,mobileOpera:d&&t.opera,touch:C,msPointer:p,pointer:g,retina:m}})();o.Point=function(t,e,i){this.x=i?Math.round(t):t;this.y=i?Math.round(e):e};o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){this.x+=t.x;this.y+=t.y;return this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){this.x-=t.x;
this.y-=t.y;return this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){this.x/=t;this.y/=t;return this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){this.x*=t;this.y*=t;return this},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){t=o.point(t);return t.x===this.x&&t.y===this.y},contains:function(t){t=o.point(t);return Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}};o.point=function(t,e,i){if(t instanceof o.Point){return t}if(o.Util.isArray(t)){return new o.Point(t[0],t[1])}if(t===n||t===null){return t}return new o.Point(t,e,i)};o.Bounds=function(t,e){if(!t){return}var i=e?[t,e]:t;for(var n=0,r=i.length;n<r;n++){this.extend(i[n])}};o.Bounds.prototype={extend:function(t){t=o.point(t);if(!this.min&&!this.max){this.min=t.clone();this.max=t.clone()}else{this.min.x=Math.min(t.x,this.min.x);this.max.x=Math.max(t.x,this.max.x);this.min.y=Math.min(t.y,this.min.y);this.max.y=Math.max(t.y,this.max.y)}return this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;if(typeof t[0]==="number"||t instanceof o.Point){t=o.point(t)}else{t=o.bounds(t)}if(t instanceof o.Bounds){e=t.min;i=t.max}else{e=i=t}return e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,r=t.max,s=r.x>=e.x&&n.x<=i.x,a=r.y>=e.y&&n.y<=i.y;return s&&a},isValid:function(){return!!(this.min&&this.max)}};o.bounds=function(t,e){if(!t||t instanceof o.Bounds){return t}return new o.Bounds(t,e)};o.Transformation=function(t,e,i,n){this._a=t;this._b=e;this._c=i;this._d=n};o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){e=e||1;t.x=e*(this._a*t.x+this._b);t.y=e*(this._c*t.y+this._d);return t},untransform:function(t,e){e=e||1;return new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};o.DomUtil={get:function(t){return typeof t==="string"?i.getElementById(t):t},getStyle:function(t,e){var n=t.style[e];if(!n&&t.currentStyle){n=t.currentStyle[e]}if((!n||n==="auto")&&i.defaultView){var r=i.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return n==="auto"?null:n},getViewportOffset:function(t){var e=0,n=0,r=t,s=i.body,a=i.documentElement,u;do{e+=r.offsetTop||0;n+=r.offsetLeft||0;e+=parseInt(o.DomUtil.getStyle(r,"borderTopWidth"),10)||0;n+=parseInt(o.DomUtil.getStyle(r,"borderLeftWidth"),10)||0;u=o.DomUtil.getStyle(r,"position");if(r.offsetParent===s&&u==="absolute"){break}if(u==="fixed"){e+=s.scrollTop||a.scrollTop||0;n+=s.scrollLeft||a.scrollLeft||0;break}if(u==="relative"&&!r.offsetLeft){var l=o.DomUtil.getStyle(r,"width"),h=o.DomUtil.getStyle(r,"max-width"),c=r.getBoundingClientRect();if(l!=="none"||h!=="none"){n+=c.left+r.clientLeft}e+=c.top+(s.scrollTop||a.scrollTop||0);break}r=r.offsetParent}while(r);r=t;do{if(r===s){break}e-=r.scrollTop||0;n-=r.scrollLeft||0;r=r.parentNode}while(r);return new o.Point(n,e)},documentIsLtr:function(){if(!o.DomUtil._docIsLtrCached){o.DomUtil._docIsLtrCached=true;o.DomUtil._docIsLtr=o.DomUtil.getStyle(i.body,"direction")==="ltr"}return o.DomUtil._docIsLtr},create:function(t,e,n){var r=i.createElement(t);r.className=e;if(n){n.appendChild(r)}return r},hasClass:function(t,e){if(t.classList!==n){return t.classList.contains(e)}var i=o.DomUtil._getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(t.classList!==n){var i=o.Util.splitWords(e);for(var r=0,s=i.length;r<s;r++){t.classList.add(i[r])}}else if(!o.DomUtil.hasClass(t,e)){var a=o.DomUtil._getClass(t);o.DomUtil._setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){if(t.classList!==n){t.classList.remove(e)}else{o.DomUtil._setClass(t,o.Util.trim((" "+o.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))}},_setClass:function(t,e){if(t.className.baseVal===n){t.className=e}else{t.className.baseVal=e}},_getClass:function(t){return t.className.baseVal===n?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style){t.style.opacity=e}else if("filter"in t.style){var i=false,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(r){if(e===1){return}}e=Math.round(e*100);if(i){i.Enabled=e!==100;i.Opacity=e}else{t.style.filter+=" progid:"+n+"(opacity="+e+")"}}},testProp:function(t){var e=i.documentElement.style;for(var n=0;n<t.length;n++){if(t[n]in e){return t[n]}}return false},getTranslateString:function(t){var e=o.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){var i=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),n=" scale("+t+") ";return i+n},setPosition:function(t,e,i){t._leaflet_pos=e;if(!i&&o.Browser.any3d){t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e)}else{t.style.left=e.x+"px";t.style.top=e.y+"px"}},getPosition:function(t){return t._leaflet_pos}};o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);o.DomUtil.TRANSITION_END=o.DomUtil.TRANSITION==="webkitTransition"||o.DomUtil.TRANSITION==="OTransition"?o.DomUtil.TRANSITION+"End":"transitionend";(function(){if("onselectstart"in i){o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)}})}else{var e=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(e){var t=i.documentElement.style;this._userSelect=t[e];t[e]="none"}},enableTextSelection:function(){if(e){i.documentElement.style[e]=this._userSelect;delete this._userSelect}}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)}})})();o.LatLng=function(t,e,i){t=parseFloat(t);e=parseFloat(e);if(isNaN(t)||isNaN(e)){throw new Error("Invalid LatLng object: ("+t+", "+e+")")}this.lat=t;this.lng=e;if(i!==n){this.alt=parseFloat(i)}};o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9});o.LatLng.prototype={equals:function(t){if(!t){return false}t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,i=o.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*i,r=(t.lng-this.lng)*i,s=this.lat*i,a=t.lat*i,u=Math.sin(n/2),l=Math.sin(r/2);var h=u*u+l*l*Math.cos(s)*Math.cos(a);return e*2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))},wrap:function(t,e){var i=this.lng;t=t||-180;e=e||180;i=(i+e)%(e-t)+(i<t||i===e?e:t);return new o.LatLng(this.lat,i)}};o.latLng=function(t,e){if(t instanceof o.LatLng){return t}if(o.Util.isArray(t)){if(typeof t[0]==="number"||typeof t[0]==="string"){return new o.LatLng(t[0],t[1],t[2])}else{return null}}if(t===n||t===null){return t}if(typeof t==="object"&&"lat"in t){return new o.LatLng(t.lat,"lng"in t?t.lng:t.lon)}if(e===n){return null}return new o.LatLng(t,e)};o.LatLngBounds=function(t,e){if(!t){return}var i=e?[t,e]:t;for(var n=0,r=i.length;n<r;n++){this.extend(i[n])}};o.LatLngBounds.prototype={extend:function(t){if(!t){return this}var e=o.latLng(t);if(e!==null){t=e}else{t=o.latLngBounds(t)}if(t instanceof o.LatLng){if(!this._southWest&&!this._northEast){this._southWest=new o.LatLng(t.lat,t.lng);this._northEast=new o.LatLng(t.lat,t.lng)}else{this._southWest.lat=Math.min(t.lat,this._southWest.lat);this._southWest.lng=Math.min(t.lng,this._southWest.lng);this._northEast.lat=Math.max(t.lat,this._northEast.lat);this._northEast.lng=Math.max(t.lng,this._northEast.lng)}}else if(t instanceof o.LatLngBounds){this.extend(t._southWest);this.extend(t._northEast)}return this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,r=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-r),new o.LatLng(i.lat+n,i.lng+r))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){if(typeof t[0]==="number"||t instanceof o.LatLng){t=o.latLng(t)}else{t=o.latLngBounds(t)}var e=this._southWest,i=this._northEast,n,r;if(t instanceof o.LatLngBounds){n=t.getSouthWest();r=t.getNorthEast()}else{n=r=t}return n.lat>=e.lat&&r.lat<=i.lat&&n.lng>=e.lng&&r.lng<=i.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),s=r.lat>=e.lat&&n.lat<=i.lat,a=r.lng>=e.lng&&n.lng<=i.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){if(!t){return false}t=o.latLngBounds(t);return this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())},isValid:function(){return!!(this._southWest&&this._northEast)}};o.latLngBounds=function(t,e){if(!t||t instanceof o.LatLngBounds){return t}return new o.LatLngBounds(t,e)};o.Projection={};o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=t.lng*e,s=n*e;s=Math.log(Math.tan(Math.PI/4+s/2));return new o.Point(r,s)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,i=t.x*e,n=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(n,i)}};o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}};o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return o.point(e,e)}};o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}});o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}});o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"});o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)});o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:true,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e);this._initContainer(t);this._initLayout();this._onResize=o.bind(this._onResize,this);this._initEvents();if(e.maxBounds){this.setMaxBounds(e.maxBounds)}if(e.center&&e.zoom!==n){this.setView(o.latLng(e.center),e.zoom,{reset:true})}this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(e.layers)},setView:function(t,e){e=e===n?this.getZoom():e;this._resetView(o.latLng(t),this._limitZoom(e));return this},setZoom:function(t,e){if(!this._loaded){this._zoom=this._limitZoom(t);return this}return this.setView(this.getCenter(),t,{zoom:e})},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),s=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=s.subtract(r).multiplyBy(1-1/n),u=this.containerPointToLatLng(r.add(a));return this.setView(u,e,{zoom:i})},fitBounds:function(t,e){e=e||{};t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,false,i.add(n)),s=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),r),u=this.project(t.getNorthEast(),r),l=this.unproject(a.add(u).divideBy(2).add(s),r);r=e&&e.maxZoom?Math.min(e.maxZoom,r):r;return this.setView(l,r,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){this.fire("movestart");this._rawPanBy(o.point(t));this.fire("move");return this.fire("moveend")},setMaxBounds:function(t){t=o.latLngBounds(t);this.options.maxBounds=t;if(!t){return this.off("moveend",this._panInsideMaxBounds,this)}if(this._loaded){this._panInsideMaxBounds()}return this.on("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var i=this.getCenter(),n=this._limitCenter(i,this._zoom,t);if(i.equals(n)){return this}return this.panTo(n,e)},addLayer:function(t){var e=o.stamp(t);if(this._layers[e]){return this}this._layers[e]=t;if(t.options&&(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))){this._zoomBoundLayers[e]=t;this._updateZoomLevels()}if(this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer){this._tileLayersNum++;this._tileLayersToLoad++;t.on("load",this._onTileLayerLoad,this)}if(this._loaded){this._layerAdd(t)}return this},removeLayer:function(t){var e=o.stamp(t);if(!this._layers[e]){return this}if(this._loaded){t.onRemove(this)}delete this._layers[e];if(this._loaded){this.fire("layerremove",{layer:t})}if(this._zoomBoundLayers[e]){delete this._zoomBoundLayers[e];this._updateZoomLevels()}if(this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer){this._tileLayersNum--;this._tileLayersToLoad--;t.off("load",this._onTileLayerLoad,this)}return this},hasLayer:function(t){if(!t){return false}return o.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers){t.call(e,this._layers[i])}return this},invalidateSize:function(t){if(!this._loaded){return this}t=o.extend({animate:false,pan:true},t===true?{animate:true}:t);var e=this.getSize();this._sizeChanged=true;this._initialCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),r=i.divideBy(2).round(),s=n.subtract(r);if(!s.x&&!s.y){return this}if(t.animate&&t.pan){this.panBy(s)}else{if(t.pan){this._rawPanBy(s)}this.fire("move");if(t.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)}else{this.fire("moveend")}}return this.fire("resize",{oldSize:e,newSize:i})},addHandler:function(t,e){if(!e){return this}var i=this[t]=new e(this);this._handlers.push(i);if(this.options[t]){i.enable()}return this},remove:function(){if(this._loaded){this.fire("unload")}this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=n}this._clearPanes();if(this._clearControlPos){this._clearControlPos()}this._clearHandlers();return this},getCenter:function(){this._checkIfLoaded();if(this._initialCenter&&!this._moved()){return this._initialCenter}return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===n?this._layersMinZoom===n?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===n?this._layersMaxZoom===n?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t);var n=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),s=this.getSize(),a=t.getNorthWest(),u=t.getSouthEast(),l=true,h;i=o.point(i||[0,0]);do{n++;h=this.project(u,n).subtract(this.project(a,n)).add(i);l=!e?s.contains(h):h.x<s.x||h.y<s.y}while(l&&n<=r);if(l&&e){return null}return e?n:n-1},getSize:function(){if(!this._size||this._sizeChanged){this._size=new o.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=false}return this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){e=e===n?this._zoom:e;return this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){e=e===n?this._zoom:e;return this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e){throw new Error("Map container not found.")}else if(e._leaflet){throw new Error("Map container is already initialized.")}e._leaflet=true},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");if(e!=="absolute"&&e!=="relative"&&e!=="fixed"){t.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);t.shadowPane=this._createPane("leaflet-shadow-pane");t.overlayPane=this._createPane("leaflet-overlay-pane");t.markerPane=this._createPane("leaflet-marker-pane");t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";if(!this.options.markerZoomAnimation){o.DomUtil.addClass(t.markerPane,e);o.DomUtil.addClass(t.shadowPane,e);o.DomUtil.addClass(t.popupPane,e)}},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++){this.addLayer(t[e])}},_resetView:function(t,e,i,n){var r=this._zoom!==e;if(!n){this.fire("movestart");if(r){this.fire("zoomstart")}}this._zoom=e;this._initialCenter=t;this._initialTopLeftPoint=this._getNewTopLeftPoint(t);if(!i){o.DomUtil.setPosition(this._mapPane,new o.Point(0,0))}else{this._initialTopLeftPoint._add(this._getMapPanePos())}this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=true;this.fire("viewreset",{hard:!i});if(s){this.fire("load");this.eachLayer(this._layerAdd,this)}this.fire("move");if(r||n){this.fire("zoomend")}this.fire("moveend",{hard:!i})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=Infinity,i=-Infinity,r=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];if(!isNaN(o.options.minZoom)){e=Math.min(e,o.options.minZoom)}if(!isNaN(o.options.maxZoom)){i=Math.max(i,o.options.maxZoom)}}if(t===n){this._layersMaxZoom=this._layersMinZoom=n}else{this._layersMaxZoom=i;this._layersMinZoom=e}if(r!==this._getZoomSpan()){this.fire("zoomlevelschange")}},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(e){if(!o.DomEvent){return}e=e||"on";o.DomEvent[e](this._container,"click",this._onMouseClick,this);var i=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"],n,r;for(n=0,r=i.length;n<r;n++){o.DomEvent[e](this._container,i[n],this._fireMouseEvent,this)}if(this.options.trackResize){o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:true})},this,false,this._container)},_onMouseClick:function(t){if(!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(t)){return}this.fire("preclick");this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(!this._loaded||o.DomEvent._skipped(t)){return}var e=t.type;e=e==="mouseenter"?"mouseover":e==="mouseleave"?"mouseout":e;if(!this.hasEventListeners(e)){return}if(e==="contextmenu"){o.DomEvent.preventDefault(t)}var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),r=this.layerPointToLatLng(n);this.fire(e,{latlng:r,layerPoint:n,containerPoint:i,originalEvent:t})},_onTileLayerLoad:function(){this._tileLayersToLoad--;if(this._tileLayersNum&&!this._tileLayersToLoad){this.fire("tilelayersload")}},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++){this._handlers[t].disable()}},whenReady:function(t,e){if(this._loaded){t.call(e||this,this)}else{this.on("load",t,e)}return this},_layerAdd:function(t){t.onAdd(this);this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i){return t}var n=this.project(t,e),r=this.getSize().divideBy(2),s=new o.Bounds(n.subtract(r),n.add(r)),a=this._getBoundsOffset(s,i,e);return this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e){return t}var i=this.getPixelBounds(),n=new o.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=this.project(e.getNorthWest(),i).subtract(t.min),r=this.project(e.getSouthEast(),i).subtract(t.max),s=this._rebound(n.x,-r.x),a=this._rebound(n.y,-r.y);return new o.Point(s,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}});o.map=function(t,e){return new o.Map(t,e)};o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=this.R_MAJOR,s=this.R_MINOR,a=t.lng*e*r,u=n*e,l=s/r,h=Math.sqrt(1-l*l),c=h*Math.sin(u);c=Math.pow((1-c)/(1+c),h*.5);var f=Math.tan(.5*(Math.PI*.5-u))/c;u=-r*Math.log(f);return new o.Point(a,u)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,i=this.R_MAJOR,n=this.R_MINOR,r=t.x*e/i,s=n/i,a=Math.sqrt(1-s*s),u=Math.exp(-t.y/i),l=Math.PI/2-2*Math.atan(u),h=15,c=1e-7,f=h,d=.1,p;while(Math.abs(d)>c&&--f>0){p=a*Math.sin(l);d=Math.PI/2-2*Math.atan(u*Math.pow((1-p)/(1+p),.5*a))-l;l+=d}return new o.LatLng(l*e,r)}};o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,i=.5/(Math.PI*e);return new o.Transformation(i,.5,-i,.5)}()});o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e);if(e.detectRetina&&o.Browser.retina&&e.maxZoom>0){e.tileSize=Math.floor(e.tileSize/2);e.zoomOffset++;if(e.minZoom>0){e.minZoom--}this.options.maxZoom--}if(e.bounds){e.bounds=o.latLngBounds(e.bounds)}this._url=t;var i=this.options.subdomains;if(typeof i==="string"){this.options.subdomains=i.split("")}},onAdd:function(t){this._map=t;this._animated=t._zoomAnimated;this._initContainer();t.on({viewreset:this._reset,moveend:this._update},this);if(this._animated){t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this)}if(!this.options.updateWhenIdle){this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this);t.on("move",this._limitedUpdate,this)}this._reset();this._update()},addTo:function(t){t.addLayer(this);return this},onRemove:function(t){this._container.parentNode.removeChild(this._container);t.off({viewreset:this._reset,moveend:this._update},this);if(this._animated){t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this)}if(!this.options.updateWhenIdle){t.off("move",this._limitedUpdate,this)}this._container=null;this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;if(this._container){t.appendChild(this._container);this._setAutoZIndex(t,Math.max)}return this},bringToBack:function(){var t=this._map._panes.tilePane;if(this._container){t.insertBefore(this._container,t.firstChild);this._setAutoZIndex(t,Math.min)}return this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){this.options.opacity=t;if(this._map){this._updateOpacity()}return this},setZIndex:function(t){this.options.zIndex=t;this._updateZIndex();return this},setUrl:function(t,e){this._url=t;if(!e){this.redraw()}return this},redraw:function(){if(this._map){this._reset({hard:true});this._update()}return this},_updateZIndex:function(){if(this._container&&this.options.zIndex!==n){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(t,e){var i=t.children,n=-e(Infinity,-Infinity),r,o,s;for(o=0,s=i.length;o<s;o++){if(i[o]!==this._container){r=parseInt(i[o].style.zIndex,10);if(!isNaN(r)){n=e(n,r)}}}this.options.zIndex=this._container.style.zIndex=(isFinite(n)?n:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9){for(t in e){o.DomUtil.setOpacity(e[t],this.options.opacity)}}else{o.DomUtil.setOpacity(this._container,this.options.opacity)}},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){this._container=o.DomUtil.create("div","leaflet-layer");this._updateZIndex();if(this._animated){var e="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",e,this._container);this._tileContainer=o.DomUtil.create("div",e,this._container)}else{this._tileContainer=this._container}t.appendChild(this._container);if(this.options.opacity<1){this._updateOpacity()}}},_reset:function(t){for(var e in this._tiles){this.fire("tileunload",{tile:this._tiles[e]})}this._tiles={};this._tilesToLoad=0;if(this.options.reuseTiles){this._unusedTiles=[]}this._tileContainer.innerHTML="";if(this._animated&&t&&t.hard){this._clearBgBuffer()}this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,n=this.options.tileSize;if(i&&e>i){n=Math.round(t.getZoomScale(e)/t.getZoomScale(i)*n)}return n},_update:function(){if(!this._map){return}var t=this._map,e=t.getPixelBounds(),i=t.getZoom(),n=this._getTileSize();if(i>this.options.maxZoom||i<this.options.minZoom){return}var r=o.bounds(e.min.divideBy(n)._floor(),e.max.divideBy(n)._floor());this._addTilesFromCenterOut(r);if(this.options.unloadInvisibleTiles||this.options.reuseTiles){this._removeOtherTiles(r)}},_addTilesFromCenterOut:function(t){var e=[],n=t.getCenter();var r,s,a;for(r=t.min.y;r<=t.max.y;r++){for(s=t.min.x;s<=t.max.x;s++){a=new o.Point(s,r);if(this._tileShouldBeLoaded(a)){e.push(a)}}}var u=e.length;if(u===0){return}e.sort(function(t,e){return t.distanceTo(n)-e.distanceTo(n)});var l=i.createDocumentFragment();if(!this._tilesToLoad){this.fire("loading")}this._tilesToLoad+=u;for(s=0;s<u;s++){this._addTile(e[s],l)}this._tileContainer.appendChild(l)},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles){return false}var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=i.x)||t.y<0||t.y>=i.y){return false}}if(e.bounds){var n=e.tileSize,r=t.multiplyBy(n),o=r.add([n,n]),s=this._map.unproject(r),a=this._map.unproject(o);if(!e.continuousWorld&&!e.noWrap){s=s.wrap();a=a.wrap()}if(!e.bounds.intersects([s,a])){return false}}return true},_removeOtherTiles:function(t){var e,i,n,r;for(r in this._tiles){e=r.split(":");i=parseInt(e[0],10);n=parseInt(e[1],10);if(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y){this._removeTile(r)}}},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src});if(this.options.reuseTiles){o.DomUtil.removeClass(e,"leaflet-tile-loaded");this._unusedTiles.push(e)}else if(e.parentNode===this._tileContainer){this._tileContainer.removeChild(e)}if(!o.Browser.android){e.onload=null;e.src=o.Util.emptyImageUrl}delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t);var n=this._getTile();o.DomUtil.setPosition(n,i,o.Browser.chrome);this._tiles[t.x+":"+t.y]=n;this._loadTile(n,t);if(n.parentNode!==this._tileContainer){e.appendChild(n)}},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();if(t.zoomReverse){e=t.maxZoom-e}e+=t.zoomOffset;return t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this._getTileSize();return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()
},_adjustTilePoint:function(t){var e=this._getWrapTileNum();if(!this.options.continuousWorld&&!this.options.noWrap){t.x=(t.x%e.x+e.x)%e.x}if(this.options.tms){t.y=e.y-t.y-1}t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();this._resetTile(t);return t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=o.DomUtil.create("img","leaflet-tile");t.style.width=t.style.height=this._getTileSize()+"px";t.galleryimg="no";t.onselectstart=t.onmousemove=o.Util.falseFn;if(o.Browser.ielt9&&this.options.opacity!==n){o.DomUtil.setOpacity(t,this.options.opacity)}if(o.Browser.mobileWebkit3d){t.style.WebkitBackfaceVisibility="hidden"}return t},_loadTile:function(t,e){t._layer=this;t.onload=this._tileOnLoad;t.onerror=this._tileOnError;this._adjustTilePoint(e);t.src=this.getTileUrl(e);this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--;if(this._animated){o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated")}if(!this._tilesToLoad){this.fire("load");if(this._animated){clearTimeout(this._clearBgBufferTimer);this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)}}},_tileOnLoad:function(){var t=this._layer;if(this.src!==o.Util.emptyImageUrl){o.DomUtil.addClass(this,"leaflet-tile-loaded");t.fire("tileload",{tile:this,url:this.src})}t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;if(e){this.src=e}t._tileLoaded()}});o.tileLayer=function(t,e){return new o.TileLayer(t,e)};o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:false},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams),n=e.tileSize||this.options.tileSize;if(e.detectRetina&&o.Browser.retina){i.width=i.height=n*2}else{i.width=i.height=n}for(var r in e){if(!this.options.hasOwnProperty(r)&&r!=="crs"){i[r]=e[r]}}this.wmsParams=i;o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code;o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,i=this.options.tileSize,n=t.multiplyBy(i),r=n.add([i,i]),s=this._crs.project(e.unproject(n,t.z)),a=this._crs.project(e.unproject(r,t.z)),u=this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[a.y,s.x,s.y,a.x].join(","):[s.x,a.y,a.x,s.y].join(","),l=o.Util.template(this._url,{s:this._getSubdomain(t)});return l+o.Util.getParamString(this.wmsParams,l,true)+"&BBOX="+u},setParams:function(t,e){o.extend(this.wmsParams,t);if(!e){this.redraw()}return this}});o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)};o.TileLayer.Canvas=o.TileLayer.extend({options:{async:false},initialize:function(t){o.setOptions(this,t)},redraw:function(){if(this._map){this._reset({hard:true});this._update()}for(var t in this._tiles){this._redrawTile(this._tiles[t])}return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=o.DomUtil.create("canvas","leaflet-tile");t.width=t.height=this.options.tileSize;t.onselectstart=t.onmousemove=o.Util.falseFn;return t},_loadTile:function(t,e){t._layer=this;t._tilePoint=e;this._redrawTile(t);if(!this.options.async){this.tileDrawn(t)}},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}});o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)};o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t;this._bounds=o.latLngBounds(e);o.setOptions(this,i)},onAdd:function(t){this._map=t;if(!this._image){this._initImage()}t._panes.overlayPane.appendChild(this._image);t.on("viewreset",this._reset,this);if(t.options.zoomAnimation&&o.Browser.any3d){t.on("zoomanim",this._animateZoom,this)}this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image);t.off("viewreset",this._reset,this);if(t.options.zoomAnimation){t.off("zoomanim",this._animateZoom,this)}},addTo:function(t){t.addLayer(this);return this},setOpacity:function(t){this.options.opacity=t;this._updateOpacity();return this},bringToFront:function(){if(this._image){this._map._panes.overlayPane.appendChild(this._image)}return this},bringToBack:function(){var t=this._map._panes.overlayPane;if(this._image){t.insertBefore(this._image,t.firstChild)}return this},setUrl:function(t){this._url=t;this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer");if(this._map.options.zoomAnimation&&o.Browser.any3d){o.DomUtil.addClass(this._image,"leaflet-zoom-animated")}else{o.DomUtil.addClass(this._image,"leaflet-zoom-hide")}this._updateOpacity();o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),r=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(r,t.zoom,t.center),u=e._latLngToNewLayerPoint(s,t.zoom,t.center)._subtract(a),l=a._add(u._multiplyBy(1/2*(1-1/n)));i.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(l)+" scale("+n+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e);t.style.width=i.x+"px";t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}});o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)};o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var n;if(!e||e.tagName!=="IMG"){n=this._createImg(i)}else{n=this._createImg(i,e)}this._setIconStyles(n,t);return n},_setIconStyles:function(t,e){var i=this.options,n=o.point(i[e+"Size"]),r;if(e==="shadow"){r=o.point(i.shadowAnchor||i.iconAnchor)}else{r=o.point(i.iconAnchor)}if(!r&&n){r=n.divideBy(2,true)}t.className="leaflet-marker-"+e+" "+i.className;if(r){t.style.marginLeft=-r.x+"px";t.style.marginTop=-r.y+"px"}if(n){t.style.width=n.x+"px";t.style.height=n.y+"px"}},_createImg:function(t,e){e=e||i.createElement("img");e.src=t;return e},_getIconUrl:function(t){if(o.Browser.retina&&this.options[t+"RetinaUrl"]){return this.options[t+"RetinaUrl"]}return this.options[t+"Url"]}});o.icon=function(t){return new o.Icon(t)};o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e]){return this.options[e]}if(o.Browser.retina&&t==="icon"){t+="-2x"}var i=o.Icon.Default.imagePath;if(!i){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")}return i+"/marker-"+t+".png"}});o.Icon.Default.imagePath=function(){var t=i.getElementsByTagName("script"),e=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;var n,r,o,s,a;for(n=0,r=t.length;n<r;n++){o=t[n].src;s=o.match(e);if(s){a=o.split(e)[0];return(a?a+"/":"")+"images"}}}();o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:true,draggable:false,keyboard:true,zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250},initialize:function(t,e){o.setOptions(this,e);this._latlng=o.latLng(t)},onAdd:function(t){this._map=t;t.on("viewreset",this.update,this);this._initIcon();this.update();this.fire("add");if(t.options.zoomAnimation&&t.options.markerZoomAnimation){t.on("zoomanim",this._animateZoom,this)}},addTo:function(t){t.addLayer(this);return this},onRemove:function(t){if(this.dragging){this.dragging.disable()}this._removeIcon();this._removeShadow();this.fire("remove");t.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=o.latLng(t);this.update();return this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){this.options.zIndexOffset=t;this.update();return this},setIcon:function(t){this.options.icon=t;if(this._map){this._initIcon();this.update()}if(this._popup){this.bindPopup(this._popup)}return this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,n=i?"leaflet-zoom-animated":"leaflet-zoom-hide";var r=t.icon.createIcon(this._icon),s=false;if(r!==this._icon){if(this._icon){this._removeIcon()}s=true;if(t.title){r.title=t.title}if(t.alt){r.alt=t.alt}}o.DomUtil.addClass(r,n);if(t.keyboard){r.tabIndex="0"}this._icon=r;this._initInteraction();if(t.riseOnHover){o.DomEvent.on(r,"mouseover",this._bringToFront,this).on(r,"mouseout",this._resetZIndex,this)}var a=t.icon.createShadow(this._shadow),u=false;if(a!==this._shadow){this._removeShadow();u=true}if(a){o.DomUtil.addClass(a,n)}this._shadow=a;if(t.opacity<1){this._updateOpacity()}var l=this._map._panes;if(s){l.markerPane.appendChild(this._icon)}if(a&&u){l.shadowPane.appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex)}this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){this._map._panes.shadowPane.removeChild(this._shadow)}this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t);if(this._shadow){o.DomUtil.setPosition(this._shadow,t)}this._zIndex=t.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(!this.options.clickable){return}var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable");o.DomEvent.on(t,"click",this._onMouseClick,this);o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++){o.DomEvent.on(t,e[i],this._fireMouseEvent,this)}if(o.Handler.MarkerDrag){this.dragging=new o.Handler.MarkerDrag(this);if(this.options.draggable){this.dragging.enable()}}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();if(this.hasEventListeners(t.type)||e){o.DomEvent.stopPropagation(t)}if(e){return}if((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved()){return}this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){if(t.keyCode===13){this.fire("click",{originalEvent:t,latlng:this._latlng})}},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng});if(t.type==="contextmenu"&&this.hasEventListeners(t.type)){o.DomEvent.preventDefault(t)}if(t.type!=="mousedown"){o.DomEvent.stopPropagation(t)}else{o.DomEvent.preventDefault(t)}},setOpacity:function(t){this.options.opacity=t;if(this._map){this._updateOpacity()}return this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity);if(this._shadow){o.DomUtil.setOpacity(this._shadow,this.options.opacity)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});o.marker=function(t,e){return new o.Marker(t,e)};o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:false},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:i.createElement("div"),n=this.options;if(n.html!==false){e.innerHTML=n.html}else{e.innerHTML=""}if(n.bgPos){e.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"}this._setIconStyles(e,"icon");return e},createShadow:function(){return null}});o.divIcon=function(t){return new o.DivIcon(t)};o.Map.mergeOptions({closePopupOnClick:true});o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:true,closeButton:true,offset:[0,7],autoPanPadding:[5,5],keepInView:false,className:"",zoomAnimation:true},initialize:function(t,e){o.setOptions(this,t);this._source=e;this._animated=o.Browser.any3d&&this.options.zoomAnimation;this._isOpen=false},onAdd:function(t){this._map=t;if(!this._container){this._initLayout()}var e=t.options.fadeAnimation;if(e){o.DomUtil.setOpacity(this._container,0)}t._panes.popupPane.appendChild(this._container);t.on(this._getEvents(),this);this.update();if(e){o.DomUtil.setOpacity(this._container,1)}this.fire("open");t.fire("popupopen",{popup:this});if(this._source){this._source.fire("popupopen",{popup:this})}},addTo:function(t){t.addLayer(this);return this},openOn:function(t){t.openPopup(this);return this},onRemove:function(t){t._panes.popupPane.removeChild(this._container);o.Util.falseFn(this._container.offsetWidth);t.off(this._getEvents(),this);if(t.options.fadeAnimation){o.DomUtil.setOpacity(this._container,0)}this._map=null;this.fire("close");t.fire("popupclose",{popup:this});if(this._source){this._source.fire("popupclose",{popup:this})}},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=o.latLng(t);if(this._map){this._updatePosition();this._adjustPan()}return this},getContent:function(){return this._content},setContent:function(t){this._content=t;this.update();return this},update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},_getEvents:function(){var t={viewreset:this._updatePosition};if(this._animated){t.zoomanim=this._zoomAnimation}if("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick){t.preclick=this._close}if(this.options.keepInView){t.moveend=this._adjustPan}return t},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var t="leaflet-popup",e=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=o.DomUtil.create("div",e),n;if(this.options.closeButton){n=this._closeButton=o.DomUtil.create("a",t+"-close-button",i);n.href="#close";n.innerHTML="&#215;";o.DomEvent.disableClickPropagation(n);o.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var r=this._wrapper=o.DomUtil.create("div",t+"-content-wrapper",i);o.DomEvent.disableClickPropagation(r);this._contentNode=o.DomUtil.create("div",t+"-content",r);o.DomEvent.disableScrollPropagation(this._contentNode);o.DomEvent.on(r,"contextmenu",o.DomEvent.stopPropagation);this._tipContainer=o.DomUtil.create("div",t+"-tip-container",i);this._tip=o.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(!this._content){return}if(typeof this._content==="string"){this._contentNode.innerHTML=this._content}else{while(this._contentNode.hasChildNodes()){this._contentNode.removeChild(this._contentNode.firstChild)}this._contentNode.appendChild(this._content)}this.fire("contentupdate")},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="";e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth);i=Math.max(i,this.options.minWidth);e.width=i+1+"px";e.whiteSpace="";e.height="";var n=t.offsetHeight,r=this.options.maxHeight,s="leaflet-popup-scrolled";if(r&&n>r){e.height=r+"px";o.DomUtil.addClass(t,s)}else{o.DomUtil.removeClass(t,s)}this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(!this._map){return}var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=o.point(this.options.offset);if(e){o.DomUtil.setPosition(this._container,t)}this._containerBottom=-i.y-(e?0:t.y);this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x);this._container.style.bottom=this._containerBottom+"px";this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(!this.options.autoPan){return}var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new o.Point(this._containerLeft,-e-this._containerBottom);if(this._animated){n._add(o.DomUtil.getPosition(this._container))}var r=t.layerPointToContainerPoint(n),s=o.point(this.options.autoPanPadding),a=o.point(this.options.autoPanPaddingTopLeft||s),u=o.point(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),h=0,c=0;if(r.x+i+u.x>l.x){h=r.x+i-l.x+u.x}if(r.x-h-a.x<0){h=r.x-a.x}if(r.y+e+u.y>l.y){c=r.y+e-l.y+u.y}if(r.y-c-a.y<0){c=r.y-a.y}if(h||c){t.fire("autopanstart").panBy([h,c])}},_onCloseButtonClick:function(t){this._close();o.DomEvent.stop(t)}});o.popup=function(t,e){return new o.Popup(t,e)};o.Map.include({openPopup:function(t,e,i){this.closePopup();if(!(t instanceof o.Popup)){var n=t;t=new o.Popup(i).setLatLng(e).setContent(n)}t._isOpen=true;this._popup=t;return this.addLayer(t)},closePopup:function(t){if(!t||t===this._popup){t=this._popup;this._popup=null}if(t){this.removeLayer(t);t._isOpen=false}return this}});o.Marker.include({openPopup:function(){if(this._popup&&this._map&&!this._map.hasLayer(this._popup)){this._popup.setLatLng(this._latlng);this._map.openPopup(this._popup)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},togglePopup:function(){if(this._popup){if(this._popup._isOpen){this.closePopup()}else{this.openPopup()}}return this},bindPopup:function(t,e){var i=o.point(this.options.icon.options.popupAnchor||[0,0]);i=i.add(o.Popup.prototype.options.offset);if(e&&e.offset){i=i.add(e.offset)}e=o.extend({offset:i},e);if(!this._popupHandlersAdded){this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this);this._popupHandlersAdded=true}if(t instanceof o.Popup){o.setOptions(t,e);this._popup=t}else{this._popup=new o.Popup(e,this).setContent(t)}return this},setPopupContent:function(t){if(this._popup){this._popup.setContent(t)}return this},unbindPopup:function(){if(this._popup){this._popup=null;this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this);this._popupHandlersAdded=false}return this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}});o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,i;if(t){for(e=0,i=t.length;e<i;e++){this.addLayer(t[e])}}},addLayer:function(t){var e=this.getLayerId(t);this._layers[e]=t;if(this._map){this._map.addLayer(t)}return this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);if(this._map&&this._layers[e]){this._map.removeLayer(this._layers[e])}delete this._layers[e];return this},hasLayer:function(t){if(!t){return false}return t in this._layers||this.getLayerId(t)in this._layers},clearLayers:function(){this.eachLayer(this.removeLayer,this);return this},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,n;for(i in this._layers){n=this._layers[i];if(n[t]){n[t].apply(n,e)}}return this},onAdd:function(t){this._map=t;this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t);this._map=null},addTo:function(t){t.addLayer(this);return this},eachLayer:function(t,e){for(var i in this._layers){t.call(e,this._layers[i])}return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers){t.push(this._layers[e])}return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}});o.layerGroup=function(t){return new o.LayerGroup(t)};o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){if(this.hasLayer(t)){return this}if("on"in t){t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this)}o.LayerGroup.prototype.addLayer.call(this,t);if(this._popupContent&&t.bindPopup){t.bindPopup(this._popupContent,this._popupOptions)}return this.fire("layeradd",{layer:t})},removeLayer:function(t){if(!this.hasLayer(t)){return this}if(t in this._layers){t=this._layers[t]}t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this);o.LayerGroup.prototype.removeLayer.call(this,t);if(this._popupContent){this.invoke("unbindPopup")}return this.fire("layerremove",{layer:t})},bindPopup:function(t,e){this._popupContent=t;this._popupOptions=e;return this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())});return t},_propagateEvent:function(t){t=o.extend({layer:t.target,target:this},t);this.fire(t.type,t)}});o.featureGroup=function(t){return new o.FeatureGroup(t)};o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var e=o.Browser.mobile?1280:2e3,i=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,i))}()},options:{stroke:true,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:false,fillColor:null,fillOpacity:.2,clickable:true},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t;if(!this._container){this._initElements();this._initEvents()}this.projectLatlngs();this._updatePath();if(this._container){this._map._pathRoot.appendChild(this._container)}this.fire("add");t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){t.addLayer(this);return this},onRemove:function(t){t._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;if(o.Browser.vml){this._container=null;this._stroke=null;this._fill=null}t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){o.setOptions(this,t);if(this._container){this._updateStyle()}return this},redraw:function(){if(this._map){this.projectLatlngs();this._updatePath()}return this}});o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),i=o.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),r=n.add(e.multiplyBy(1+t*2)._round());this._pathViewport=new o.Bounds(n,r)}});o.Path.SVG_NS="http://www.w3.org/2000/svg";o.Browser.svg=!!(i.createElementNS&&i.createElementNS(o.Path.SVG_NS,"svg").createSVGRect);o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;if(e&&t.lastChild!==e){t.appendChild(e)}return this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;if(e&&i!==e){t.insertBefore(e,i)}return this},getPathString:function(){},_createElement:function(t){return i.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement("g");this._path=this._createElement("path");if(this.options.className){o.DomUtil.addClass(this._path,this.options.className)}this._container.appendChild(this._path)},_initStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke-linejoin","round");this._path.setAttribute("stroke-linecap","round")}if(this.options.fill){this._path.setAttribute("fill-rule","evenodd")}if(this.options.pointerEvents){this._path.setAttribute("pointer-events",this.options.pointerEvents)}if(!this.options.clickable&&!this.options.pointerEvents){this._path.setAttribute("pointer-events","none")}this._updateStyle()},_updateStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke",this.options.color);this._path.setAttribute("stroke-opacity",this.options.opacity);this._path.setAttribute("stroke-width",this.options.weight);if(this.options.dashArray){this._path.setAttribute("stroke-dasharray",this.options.dashArray)}else{this._path.removeAttribute("stroke-dasharray")}if(this.options.lineCap){this._path.setAttribute("stroke-linecap",this.options.lineCap)}if(this.options.lineJoin){this._path.setAttribute("stroke-linejoin",this.options.lineJoin)}}else{this._path.setAttribute("stroke","none")}if(this.options.fill){this._path.setAttribute("fill",this.options.fillColor||this.options.color);this._path.setAttribute("fill-opacity",this.options.fillOpacity)}else{this._path.setAttribute("fill","none")}},_updatePath:function(){var t=this.getPathString();if(!t){t="M0 0"}this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){if(o.Browser.svg||!o.Browser.vml){o.DomUtil.addClass(this._path,"leaflet-clickable")}o.DomEvent.on(this._container,"click",this._onMouseClick,this);var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"];for(var e=0;e<t.length;e++){o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}}},_onMouseClick:function(t){if(this._map.dragging&&this._map.dragging.moved()){return}this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(!this.hasEventListeners(t.type)){return}var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),r=e.layerPointToLatLng(n);this.fire(t.type,{latlng:r,layerPoint:n,containerPoint:i,originalEvent:t});if(t.type==="contextmenu"){o.DomEvent.preventDefault(t)}if(t.type!=="mousemove"){o.DomEvent.stopPropagation(t)}}});o.Map.include({_initPathRoot:function(){if(!this._pathRoot){this._pathRoot=o.Path.prototype._createElement("svg");this._panes.overlayPane.appendChild(this._pathRoot);if(this.options.zoomAnimation&&o.Browser.any3d){o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated");this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})}else{o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide")}this.on("moveend",this._updateSvgViewport);this._updateSvgViewport()}},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(i)+" scale("+e+") ";this._pathZooming=true},_endPathZoom:function(){this._pathZooming=false},_updateSvgViewport:function(){if(this._pathZooming){return}this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,r=i.y-e.y,s=this._pathRoot,a=this._panes.overlayPane;if(o.Browser.mobileWebkit){a.removeChild(s)}o.DomUtil.setPosition(s,e);s.setAttribute("width",n);s.setAttribute("height",r);s.setAttribute("viewBox",[e.x,e.y,n,r].join(" "));if(o.Browser.mobileWebkit){a.appendChild(s)}}});o.Path.include({bindPopup:function(t,e){if(t instanceof o.Popup){this._popup=t}else{if(!this._popup||e){this._popup=new o.Popup(e,this)}this._popup.setContent(t)}if(!this._popupHandlersAdded){this.on("click",this._openPopup,this).on("remove",this.closePopup,this);this._popupHandlersAdded=true}return this},unbindPopup:function(){if(this._popup){this._popup=null;this.off("click",this._openPopup).off("remove",this.closePopup);this._popupHandlersAdded=false}return this},openPopup:function(t){if(this._popup){t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)];this._openPopup({latlng:t})}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},_openPopup:function(t){this._popup.setLatLng(t.latlng);this._map.openPopup(this._popup)}});o.Browser.vml=!o.Browser.svg&&function(){try{var t=i.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;e.style.behavior="url(#default#VML)";return e&&typeof e.adj==="object"}catch(n){return false}}();o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:true,CLIP_PADDING:.02},_createElement:function(){try{i.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(t){return i.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return i.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:""));if(this.options.clickable){o.DomUtil.addClass(t,"leaflet-clickable")}t.coordsize="1 1";this._path=this._createElement("path");t.appendChild(this._path);this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke;n.filled=i.fill;if(i.stroke){if(!t){t=this._stroke=this._createElement("stroke");t.endcap="round";n.appendChild(t)}t.weight=i.weight+"px";t.color=i.color;t.opacity=i.opacity;if(i.dashArray){t.dashStyle=o.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," ")}else{t.dashStyle=""}if(i.lineCap){t.endcap=i.lineCap.replace("butt","flat")}if(i.lineJoin){t.joinstyle=i.lineJoin}}else if(t){n.removeChild(t);this._stroke=null}if(i.fill){if(!e){e=this._fill=this._createElement("fill");n.appendChild(e)}e.color=i.fillColor||i.color;e.opacity=i.fillOpacity}else if(e){n.removeChild(e);this._fill=null}},_updatePath:function(){var t=this._container.style;t.display="none";this._path.v=this.getPathString()+" ";t.display=""}});o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(this._pathRoot){return}var t=this._pathRoot=i.createElement("div");t.className="leaflet-vml-container";this._panes.overlayPane.appendChild(t);this.on("moveend",this._updatePathViewport);this._updatePathViewport()}});o.Browser.canvas=function(){return!!i.createElement("canvas").getContext}();o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:true,SVG:false},redraw:function(){if(this._map){this.projectLatlngs();this._requestUpdate()}return this},setStyle:function(t){o.setOptions(this,t);if(this._map){this._updateStyle();this._requestUpdate()}return this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);if(this.options.clickable){this._map.off("click",this._onClick,this);this._map.off("mousemove",this._onMouseMove,this)}this._requestUpdate();this.fire("remove");this._map=null},_requestUpdate:function(){if(this._map&&!o.Path._updateRequest){o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map)}},_fireMapMoveEnd:function(){o.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;if(t.stroke){this._ctx.lineWidth=t.weight;this._ctx.strokeStyle=t.color}if(t.fill){this._ctx.fillStyle=t.fillColor||t.color}},_drawPath:function(){var t,e,i,n,r,s;this._ctx.beginPath();for(t=0,i=this._parts.length;t<i;t++){for(e=0,n=this._parts[t].length;e<n;e++){r=this._parts[t][e];s=(e===0?"move":"line")+"To";this._ctx[s](r.x,r.y)}if(this instanceof o.Polygon){this._ctx.closePath()}}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(this._checkIfEmpty()){return}var t=this._ctx,e=this.options;this._drawPath();t.save();this._updateStyle();if(e.fill){t.globalAlpha=e.fillOpacity;t.fill()}if(e.stroke){t.globalAlpha=e.opacity;t.stroke()}t.restore()},_initEvents:function(){if(this.options.clickable){this._map.on("mousemove",this._onMouseMove,this);
this._map.on("click",this._onClick,this)}},_onClick:function(t){if(this._containsPoint(t.layerPoint)){this.fire("click",t)}},_onMouseMove:function(t){if(!this._map||this._map._animatingZoom){return}if(this._containsPoint(t.layerPoint)){this._ctx.canvas.style.cursor="pointer";this._mouseInside=true;this.fire("mouseover",t)}else if(this._mouseInside){this._ctx.canvas.style.cursor="";this._mouseInside=false;this.fire("mouseout",t)}}});o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t=this._pathRoot,e;if(!t){t=this._pathRoot=i.createElement("canvas");t.style.position="absolute";e=this._canvasCtx=t.getContext("2d");e.lineCap="round";e.lineJoin="round";this._panes.overlayPane.appendChild(t);if(this.options.zoomAnimation){this._pathRoot.className="leaflet-zoom-animated";this.on("zoomanim",this._animatePathZoom);this.on("zoomend",this._endPathZoom)}this.on("moveend",this._updateCanvasViewport);this._updateCanvasViewport()}},_updateCanvasViewport:function(){if(this._pathZooming){return}this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;o.DomUtil.setPosition(n,e);n.width=i.x;n.height=i.y;n.getContext("2d").translate(-e.x,-e.y)}});o.LineUtil={simplify:function(t,e){if(!e||!t.length){return t.slice()}var i=e*e;t=this._reducePoints(t,i);t=this._simplifyDP(t,i);return t},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,true))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var i=t.length,r=typeof Uint8Array!==n+""?Uint8Array:Array,o=new r(i);o[0]=o[i-1]=1;this._simplifyDPStep(t,o,e,0,i-1);var s,a=[];for(s=0;s<i;s++){if(o[s]){a.push(t[s])}}return a},_simplifyDPStep:function(t,e,i,n,r){var o=0,s,a,u;for(a=n+1;a<=r-1;a++){u=this._sqClosestPointOnSegment(t[a],t[n],t[r],true);if(u>o){s=a;o=u}}if(o>i){e[s]=1;this._simplifyDPStep(t,e,i,n,s);this._simplifyDPStep(t,e,i,s,r)}},_reducePoints:function(t,e){var i=[t[0]];for(var n=1,r=0,o=t.length;n<o;n++){if(this._sqDist(t[n],t[r])>e){i.push(t[n]);r=n}}if(r<o-1){i.push(t[o-1])}return i},clipSegment:function(t,e,i,n){var r=n?this._lastCode:this._getBitCode(t,i),o=this._getBitCode(e,i),s,a,u;this._lastCode=o;while(true){if(!(r|o)){return[t,e]}else if(r&o){return false}else{s=r||o;a=this._getEdgeIntersection(t,e,s,i);u=this._getBitCode(a,i);if(s===r){t=a;r=u}else{e=a;o=u}}}},_getEdgeIntersection:function(t,e,i,n){var r=e.x-t.x,s=e.y-t.y,a=n.min,u=n.max;if(i&8){return new o.Point(t.x+r*(u.y-t.y)/s,u.y)}else if(i&4){return new o.Point(t.x+r*(a.y-t.y)/s,a.y)}else if(i&2){return new o.Point(u.x,t.y+s*(u.x-t.x)/r)}else if(i&1){return new o.Point(a.x,t.y+s*(a.x-t.x)/r)}},_getBitCode:function(t,e){var i=0;if(t.x<e.min.x){i|=1}else if(t.x>e.max.x){i|=2}if(t.y<e.min.y){i|=4}else if(t.y>e.max.y){i|=8}return i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var r=e.x,s=e.y,a=i.x-r,u=i.y-s,l=a*a+u*u,h;if(l>0){h=((t.x-r)*a+(t.y-s)*u)/l;if(h>1){r=i.x;s=i.y}else if(h>0){r+=a*h;s+=u*h}}a=t.x-r;u=t.y-s;return n?a*a+u*u:new o.Point(r,s)}};o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e);this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:false},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++){this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])}},getPathString:function(){for(var t=0,e=this._parts.length,i="";t<e;t++){i+=this._getPathPartStr(this._parts[t])}return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){this._latlngs=this._convertLatLngs(t);return this.redraw()},addLatLng:function(t){this._latlngs.push(o.latLng(t));return this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);this._convertLatLngs(this._latlngs,true);this.redraw();return t},closestLayerPoint:function(t){var e=Infinity,i=this._parts,n,r,s=null;for(var a=0,u=i.length;a<u;a++){var l=i[a];for(var h=1,c=l.length;h<c;h++){n=l[h-1];r=l[h];var f=o.LineUtil._sqClosestPointOnSegment(t,n,r,true);if(f<e){e=f;s=o.LineUtil._sqClosestPointOnSegment(t,n,r)}}}if(s){s.distance=Math.sqrt(e)}return s},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var i,n,r=e?t:[];for(i=0,n=t.length;i<n;i++){if(o.Util.isArray(t[i])&&typeof t[i][0]!=="number"){return}r[i]=o.latLng(t[i])}return r},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){var e=o.Path.VML;for(var i=0,n=t.length,r="",s;i<n;i++){s=t[i];if(e){s._round()}r+=(i?"L":"M")+s.x+" "+s.y}return r},_clipPoints:function(){var t=this._originalPoints,e=t.length,i,n,r;if(this.options.noClip){this._parts=[t];return}this._parts=[];var s=this._parts,a=this._map._pathViewport,u=o.LineUtil;for(i=0,n=0;i<e-1;i++){r=u.clipSegment(t[i],t[i+1],a,i);if(!r){continue}s[n]=s[n]||[];s[n].push(r[0]);if(r[1]!==t[i+1]||i===e-2){s[n].push(r[1]);n++}}},_simplifyPoints:function(){var t=this._parts,e=o.LineUtil;for(var i=0,n=t.length;i<n;i++){t[i]=e.simplify(t[i],this.options.smoothFactor)}},_updatePath:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();o.Path.prototype._updatePath.call(this)}});o.polyline=function(t,e){return new o.Polyline(t,e)};o.PolyUtil={};o.PolyUtil.clipPolygon=function(t,e){var i,n=[1,4,2,8],r,s,a,u,l,h,c,f,d=o.LineUtil;for(r=0,h=t.length;r<h;r++){t[r]._code=d._getBitCode(t[r],e)}for(a=0;a<4;a++){c=n[a];i=[];for(r=0,h=t.length,s=h-1;r<h;s=r++){u=t[r];l=t[s];if(!(u._code&c)){if(l._code&c){f=d._getEdgeIntersection(l,u,c,e);f._code=d._getBitCode(f,e);i.push(f)}i.push(u)}else if(!(l._code&c)){f=d._getEdgeIntersection(l,u,c,e);f._code=d._getBitCode(f,e);i.push(f)}}t=i}return t};o.Polygon=o.Polyline.extend({options:{fill:true},initialize:function(t,e){o.Polyline.prototype.initialize.call(this,t,e);this._initWithHoles(t)},_initWithHoles:function(t){var e,i,n;if(t&&o.Util.isArray(t[0])&&typeof t[0][0]!=="number"){this._latlngs=this._convertLatLngs(t[0]);this._holes=t.slice(1);for(e=0,i=this._holes.length;e<i;e++){n=this._holes[e]=this._convertLatLngs(this._holes[e]);if(n[0].equals(n[n.length-1])){n.pop()}}}t=this._latlngs;if(t.length>=2&&t[0].equals(t[t.length-1])){t.pop()}},projectLatlngs:function(){o.Polyline.prototype.projectLatlngs.call(this);this._holePoints=[];if(!this._holes){return}var t,e,i,n;for(t=0,i=this._holes.length;t<i;t++){this._holePoints[t]=[];for(e=0,n=this._holes[t].length;e<n;e++){this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}}},setLatLngs:function(t){if(t&&o.Util.isArray(t[0])&&typeof t[0][0]!=="number"){this._initWithHoles(t);return this.redraw()}else{return o.Polyline.prototype.setLatLngs.call(this,t)}},_clipPoints:function(){var t=this._originalPoints,e=[];this._parts=[t].concat(this._holePoints);if(this.options.noClip){return}for(var i=0,n=this._parts.length;i<n;i++){var r=o.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);if(r.length){e.push(r)}}this._parts=e},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}});o.polygon=function(t,e){return new o.Polygon(t,e)};(function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={};this._options=e;this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;this.eachLayer(function(t){if(i<n){t.setLatLngs(e[i++])}else{this.removeLayer(t)}},this);while(i<n){this.addLayer(new t(e[i++],this._options))}return this},getLatLngs:function(){var t=[];this.eachLayer(function(e){t.push(e.getLatLngs())});return t}})}o.MultiPolyline=t(o.Polyline);o.MultiPolygon=t(o.Polygon);o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)};o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}})();o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){t=o.latLngBounds(t);return[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});o.rectangle=function(t,e){return new o.Rectangle(t,e)};o.Circle=o.Path.extend({initialize:function(t,e,i){o.Path.prototype.initialize.call(this,i);this._latlng=o.latLng(t);this._mRadius=e},options:{fill:true},setLatLng:function(t){this._latlng=o.latLng(t);return this.redraw()},setRadius:function(t){this._mRadius=t;return this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e);this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,i=this._latlng;return new o.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;if(this._checkIfEmpty()){return""}if(o.Browser.svg){return"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z"}else{t._round();e=Math.round(e);return"AL "+t.x+","+t.y+" "+e+","+e+" 0,"+65535*360}},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map){return false}var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}});o.circle=function(t,e,i){return new o.Circle(t,e,i)};o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e);this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setLatLng:function(t){o.Circle.prototype.setLatLng.call(this,t);if(this._popup&&this._popup._isOpen){this._popup.setLatLng(t)}return this},setRadius:function(t){this.options.radius=this._radius=t;return this.redraw()},getRadius:function(){return this._radius}});o.circleMarker=function(t,e){return new o.CircleMarker(t,e)};o.Polyline.include(!o.Path.CANVAS?{}:{_containsPoint:function(t,e){var i,n,r,s,a,u,l,h=this.options.weight/2;if(o.Browser.touch){h+=10}for(i=0,s=this._parts.length;i<s;i++){l=this._parts[i];for(n=0,a=l.length,r=a-1;n<a;r=n++){if(!e&&n===0){continue}u=o.LineUtil.pointToSegmentDistance(t,l[r],l[n]);if(u<=h){return true}}}return false}});o.Polygon.include(!o.Path.CANVAS?{}:{_containsPoint:function(t){var e=false,i,n,r,s,a,u,l,h;if(o.Polyline.prototype._containsPoint.call(this,t,true)){return true}for(s=0,l=this._parts.length;s<l;s++){i=this._parts[s];for(a=0,h=i.length,u=h-1;a<h;u=a++){n=i[a];r=i[u];if(n.y>t.y!==r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x){e=!e}}}return e}});o.Circle.include(!o.Path.CANVAS?{}:{_drawPath:function(){var t=this._point;this._ctx.beginPath();this._ctx.arc(t.x,t.y,this._radius,0,Math.PI*2,false)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}});o.CircleMarker.include(!o.Path.CANVAS?{}:{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}});o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e);this._layers={};if(t){this.addData(t)}},addData:function(t){var e=o.Util.isArray(t)?t:t.features,i,n,r;if(e){for(i=0,n=e.length;i<n;i++){r=e[i];if(r.geometries||r.geometry||r.features||r.coordinates){this.addData(e[i])}}return this}var s=this.options;if(s.filter&&!s.filter(t)){return}var a=o.GeoJSON.geometryToLayer(t,s.pointToLayer,s.coordsToLatLng,s);a.feature=o.GeoJSON.asFeature(t);a.defaultOptions=a.options;this.resetStyle(a);if(s.onEachFeature){s.onEachFeature(t,a)}return this.addLayer(a)},resetStyle:function(t){var e=this.options.style;if(e){o.Util.extend(t.options,t.defaultOptions);this._setLayerStyle(t,e)}},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){if(typeof e==="function"){e=e(t.feature)}if(t.setStyle){t.setStyle(e)}}});o.extend(o.GeoJSON,{geometryToLayer:function(t,e,i,n){var r=t.type==="Feature"?t.geometry:t,s=r.coordinates,a=[],u,l,h,c;i=i||this.coordsToLatLng;switch(r.type){case"Point":u=i(s);return e?e(t,u):new o.Marker(u);case"MultiPoint":for(h=0,c=s.length;h<c;h++){u=i(s[h]);a.push(e?e(t,u):new o.Marker(u))}return new o.FeatureGroup(a);case"LineString":l=this.coordsToLatLngs(s,0,i);return new o.Polyline(l,n);case"Polygon":if(s.length===2&&!s[1].length){throw new Error("Invalid GeoJSON object.")}l=this.coordsToLatLngs(s,1,i);return new o.Polygon(l,n);case"MultiLineString":l=this.coordsToLatLngs(s,1,i);return new o.MultiPolyline(l,n);case"MultiPolygon":l=this.coordsToLatLngs(s,2,i);return new o.MultiPolygon(l,n);case"GeometryCollection":for(h=0,c=r.geometries.length;h<c;h++){a.push(this.geometryToLayer({geometry:r.geometries[h],type:"Feature",properties:t.properties},e,i,n))}return new o.FeatureGroup(a);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){var n,r,o,s=[];for(r=0,o=t.length;r<o;r++){n=e?this.coordsToLatLngs(t[r],e-1,i):(i||this.coordsToLatLng)(t[r]);s.push(n)}return s},latLngToCoords:function(t){var e=[t.lng,t.lat];if(t.alt!==n){e.push(t.alt)}return e},latLngsToCoords:function(t){var e=[];for(var i=0,n=t.length;i<n;i++){e.push(o.GeoJSON.latLngToCoords(t[i]))}return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){if(t.type==="Feature"){return t}return{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a);o.Circle.include(a);o.CircleMarker.include(a);o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}});o.Polygon.include({toGeoJSON:function(){var t=[o.GeoJSON.latLngsToCoords(this.getLatLngs())],e,i,n;t[0].push(t[0][0]);if(this._holes){for(e=0,i=this._holes.length;e<i;e++){n=o.GeoJSON.latLngsToCoords(this._holes[e]);n.push(n[0]);t.push(n)}}return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:t})}});(function(){function t(t){return function(){var e=[];this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)});return o.GeoJSON.getFeature(this,{type:t,coordinates:e})}}o.MultiPolyline.include({toGeoJSON:t("MultiLineString")});o.MultiPolygon.include({toGeoJSON:t("MultiPolygon")});o.LayerGroup.include({toGeoJSON:function(){var e=this.feature&&this.feature.geometry,i=[],n;if(e&&e.type==="MultiPoint"){return t("MultiPoint").call(this)}var r=e&&e.type==="GeometryCollection";this.eachLayer(function(t){if(t.toGeoJSON){n=t.toGeoJSON();i.push(r?n.geometry:o.GeoJSON.asFeature(n))}});if(r){return o.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"})}return{type:"FeatureCollection",features:i}}})})();o.geoJson=function(t,e){return new o.GeoJSON(t,e)};o.DomEvent={addListener:function(t,e,i,n){var r=o.stamp(i),s="_leaflet_"+e+r,a,u,l;if(t[s]){return this}a=function(e){return i.call(n||t,e||o.DomEvent._getEvent())};if(o.Browser.pointer&&e.indexOf("touch")===0){return this.addPointerListener(t,e,a,r)}if(o.Browser.touch&&e==="dblclick"&&this.addDoubleTapListener){this.addDoubleTapListener(t,a,r)}if("addEventListener"in t){if(e==="mousewheel"){t.addEventListener("DOMMouseScroll",a,false);t.addEventListener(e,a,false)}else if(e==="mouseenter"||e==="mouseleave"){u=a;l=e==="mouseenter"?"mouseover":"mouseout";a=function(e){if(!o.DomEvent._checkMouse(t,e)){return}return u(e)};t.addEventListener(l,a,false)}else if(e==="click"&&o.Browser.android){u=a;a=function(t){return o.DomEvent._filterClick(t,u)};t.addEventListener(e,a,false)}else{t.addEventListener(e,a,false)}}else if("attachEvent"in t){t.attachEvent("on"+e,a)}t[s]=a;return this},removeListener:function(t,e,i){var n=o.stamp(i),r="_leaflet_"+e+n,s=t[r];if(!s){return this}if(o.Browser.pointer&&e.indexOf("touch")===0){this.removePointerListener(t,e,n)}else if(o.Browser.touch&&e==="dblclick"&&this.removeDoubleTapListener){this.removeDoubleTapListener(t,n)}else if("removeEventListener"in t){if(e==="mousewheel"){t.removeEventListener("DOMMouseScroll",s,false);t.removeEventListener(e,s,false)}else if(e==="mouseenter"||e==="mouseleave"){t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",s,false)}else{t.removeEventListener(e,s,false)}}else if("detachEvent"in t){t.detachEvent("on"+e,s)}t[r]=null;return this},stopPropagation:function(t){if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=true}o.DomEvent._skipped(t);return this},disableScrollPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){var e=o.DomEvent.stopPropagation;for(var i=o.Draggable.START.length-1;i>=0;i--){o.DomEvent.on(t,o.Draggable.START[i],e)}return o.DomEvent.on(t,"click",o.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}return this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e){return new o.Point(t.clientX,t.clientY)}var i=e.getBoundingClientRect();return new o.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},getWheelDelta:function(t){var e=0;if(t.wheelDelta){e=t.wheelDelta/120}if(t.detail){e=-t.detail/3}return e},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=true},_skipped:function(t){var e=this._skipEvents[t.type];this._skipEvents[t.type]=false;return e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i){return true}try{while(i&&i!==t){i=i.parentNode}}catch(n){return false}return i!==t},_getEvent:function(){var e=t.event;if(!e){var i=arguments.callee.caller;while(i){e=i["arguments"][0];if(e&&t.Event===e.constructor){break}i=i.caller}}return e},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;if(n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated){o.DomEvent.stop(t);return}o.DomEvent._lastClick=i;return e(t)}};o.DomEvent.on=o.DomEvent.addListener;o.DomEvent.off=o.DomEvent.removeListener;o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t;this._dragStartTarget=e||t},enable:function(){if(this._enabled){return}for(var t=o.Draggable.START.length-1;t>=0;t--){o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this)}this._enabled=true},disable:function(){if(!this._enabled){return}for(var t=o.Draggable.START.length-1;t>=0;t--){o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this)}this._enabled=false;this._moved=false},_onDown:function(t){this._moved=false;if(t.shiftKey||t.which!==1&&t.button!==1&&!t.touches){return}o.DomEvent.stopPropagation(t);if(o.Draggable._disabled){return}o.DomUtil.disableImageDrag();o.DomUtil.disableTextSelection();if(this._moving){return}var e=t.touches?t.touches[0]:t;this._startPoint=new o.Point(e.clientX,e.clientY);this._startPos=this._newPos=o.DomUtil.getPosition(this._element);o.DomEvent.on(i,o.Draggable.MOVE[t.type],this._onMove,this).on(i,o.Draggable.END[t.type],this._onUp,this)},_onMove:function(t){if(t.touches&&t.touches.length>1){this._moved=true;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,n=new o.Point(e.clientX,e.clientY),r=n.subtract(this._startPoint);if(!r.x&&!r.y){return}if(o.Browser.touch&&Math.abs(r.x)+Math.abs(r.y)<3){return}o.DomEvent.preventDefault(t);if(!this._moved){this.fire("dragstart");this._moved=true;this._startPos=o.DomUtil.getPosition(this._element).subtract(r);o.DomUtil.addClass(i.body,"leaflet-dragging");this._lastTarget=t.target||t.srcElement;o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")}this._newPos=this._startPos.add(r);this._moving=true;o.Util.cancelAnimFrame(this._animRequest);this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,true,this._dragStartTarget)},_updatePosition:function(){this.fire("predrag");o.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(){o.DomUtil.removeClass(i.body,"leaflet-dragging");if(this._lastTarget){o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target");this._lastTarget=null}for(var t in o.Draggable.MOVE){o.DomEvent.off(i,o.Draggable.MOVE[t],this._onMove).off(i,o.Draggable.END[t],this._onUp)}o.DomUtil.enableImageDrag();o.DomUtil.enableTextSelection();if(this._moved&&this._moving){o.Util.cancelAnimFrame(this._animRequest);this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})}this._moving=false}});o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){if(this._enabled){return}this._enabled=true;this.addHooks()},disable:function(){if(!this._enabled){return}this._enabled=false;this.removeHooks()},enabled:function(){return!!this._enabled}});o.Map.mergeOptions({dragging:true,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:false});o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);if(t.options.worldCopyJump){this._draggable.on("predrag",this._onPreDrag,this);t.on("viewreset",this._onViewReset,this);t.whenReady(this._onViewReset,this)}}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;if(t._panAnim){t._panAnim.stop()}t.fire("movestart").fire("dragstart");if(t.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e);this._times.push(t);if(t-this._times[0]>200){this._positions.shift();this._times.shift()}}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,s=Math.abs(r+i)<Math.abs(o+i)?r:o;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,i=e.options,n=+new Date-this._lastTime,r=!i.inertia||n>i.inertiaThreshold||!this._positions[0];e.fire("dragend",t);if(r){e.fire("moveend")}else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+n-this._times[0])/1e3,u=i.easeLinearity,l=s.multiplyBy(u/a),h=l.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,h),f=l.multiplyBy(c/h),d=c/(i.inertiaDeceleration*u),p=f.multiplyBy(-d/2).round();if(!p.x||!p.y){e.fire("moveend")}else{p=e._limitOffset(p,e.options.maxBounds);o.Util.requestAnimFrame(function(){e.panBy(p,{duration:d,easeLinearity:u,noMoveStart:true})})}}}});o.Map.addInitHook("addHandler","dragging",o.Map.Drag);o.Map.mergeOptions({doubleClickZoom:true});o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom()+(t.originalEvent.shiftKey?-1:1);if(e.options.doubleClickZoom==="center"){e.setZoom(i)}else{e.setZoomAround(t.containerPoint,i)}}});o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom);o.Map.mergeOptions({scrollWheelZoom:true});o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault);this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll);o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e;this._lastMousePos=this._map.mouseEventToContainerPoint(t);if(!this._startTime){this._startTime=+new Date}var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(o.bind(this._performZoom,this),i);o.DomEvent.preventDefault(t);o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e);e=Math.max(Math.min(e,4),-4);e=t._limitZoom(i+e)-i;this._delta=0;this._startTime=null;if(!e){return}if(t.options.scrollWheelZoom==="center"){t.setZoom(i+e)}else{t.setZoomAround(this._lastMousePos,i+e)}}});o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom);o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){var r,s=false,a=250,u,l="_leaflet_",h=this._touchstart,c=this._touchend,f=[];function d(t){var e;if(o.Browser.pointer){f.push(t.pointerId);e=f.length}else{e=t.touches.length}if(e>1){return}var i=Date.now(),n=i-(r||i);u=t.touches?t.touches[0]:t;s=n>0&&n<=a;r=i}function p(t){if(o.Browser.pointer){var i=f.indexOf(t.pointerId);if(i===-1){return}f.splice(i,1)}if(s){if(o.Browser.pointer){var n={},a;for(var l in u){a=u[l];if(typeof a==="function"){n[l]=a.bind(u)}else{n[l]=a}}u=n}u.type="dblclick";e(u);r=null}}t[l+h+n]=d;t[l+c+n]=p;var g=o.Browser.pointer?i.documentElement:t;t.addEventListener(h,d,false);g.addEventListener(c,p,false);if(o.Browser.pointer){g.addEventListener(o.DomEvent.POINTER_CANCEL,p,false)}return this},removeDoubleTapListener:function(t,e){var n="_leaflet_";t.removeEventListener(this._touchstart,t[n+this._touchstart+e],false);(o.Browser.pointer?i.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+e],false);if(o.Browser.pointer){i.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,t[n+this._touchend+e],false)}return this}});o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:false,addPointerListener:function(t,e,i,n){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,i,n);case"touchend":return this.addPointerListenerEnd(t,e,i,n);case"touchmove":return this.addPointerListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,n,r){var s="_leaflet_",a=this._pointers;var u=function(t){o.DomEvent.preventDefault(t);var e=false;for(var i=0;i<a.length;i++){if(a[i].pointerId===t.pointerId){e=true;break}}if(!e){a.push(t)}t.touches=a.slice();t.changedTouches=[t];n(t)};t[s+"touchstart"+r]=u;t.addEventListener(this.POINTER_DOWN,u,false);if(!this._pointerDocumentListener){var l=function(t){for(var e=0;e<a.length;e++){if(a[e].pointerId===t.pointerId){a.splice(e,1);break}}};i.documentElement.addEventListener(this.POINTER_UP,l,false);i.documentElement.addEventListener(this.POINTER_CANCEL,l,false);this._pointerDocumentListener=true}return this},addPointerListenerMove:function(t,e,i,n){var r="_leaflet_",o=this._pointers;function s(t){if((t.pointerType===t.MSPOINTER_TYPE_MOUSE||t.pointerType==="mouse")&&t.buttons===0){return}for(var e=0;e<o.length;e++){if(o[e].pointerId===t.pointerId){o[e]=t;break}}t.touches=o.slice();t.changedTouches=[t];i(t)}t[r+"touchmove"+n]=s;t.addEventListener(this.POINTER_MOVE,s,false);return this},addPointerListenerEnd:function(t,e,i,n){var r="_leaflet_",o=this._pointers;var s=function(t){for(var e=0;e<o.length;e++){if(o[e].pointerId===t.pointerId){o.splice(e,1);break}}t.touches=o.slice();t.changedTouches=[t];i(t)};t[r+"touchend"+n]=s;t.addEventListener(this.POINTER_UP,s,false);t.addEventListener(this.POINTER_CANCEL,s,false);return this},removePointerListener:function(t,e,i){var n="_leaflet_",r=t[n+e+i];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,r,false);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,r,false);break;case"touchend":t.removeEventListener(this.POINTER_UP,r,false);t.removeEventListener(this.POINTER_CANCEL,r,false);break}return this}});o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:true});o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming){return}var n=e.mouseEventToLayerPoint(t.touches[0]),r=e.mouseEventToLayerPoint(t.touches[1]),s=e._getCenterLayerPoint();this._startCenter=n.add(r)._divideBy(2);this._startDist=n.distanceTo(r);this._moved=false;this._zooming=true;this._centerOffset=s.subtract(this._startCenter);if(e._panAnim){e._panAnim.stop()}o.DomEvent.on(i,"touchmove",this._onTouchMove,this).on(i,"touchend",this._onTouchEnd,this);o.DomEvent.preventDefault(t)},_onTouchMove:function(t){var e=this._map;if(!t.touches||t.touches.length!==2||!this._zooming){return}var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)/this._startDist;this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter);if(this._scale===1){return}if(!e.options.bounceAtZoomLimits){if(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1){return}}if(!this._moved){o.DomUtil.addClass(e._mapPane,"leaflet-touching");e.fire("movestart").fire("zoomstart");this._moved=true}o.Util.cancelAnimFrame(this._animRequest);this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,true,this._map._container);o.DomEvent.preventDefault(t)},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta,false,true)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return}var t=this._map;this._zooming=false;o.DomUtil.removeClass(t._mapPane,"leaflet-touching");o.Util.cancelAnimFrame(this._animRequest);o.DomEvent.off(i,"touchmove",this._onTouchMove).off(i,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),r=t.getZoom(),s=t.getScaleZoom(this._scale)-r,a=s>0?Math.ceil(s):Math.floor(s),u=t._limitZoom(r+a),l=t.getZoomScale(u)/this._scale;t._animateZoom(n,u,e,l)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}});o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom);o.Map.mergeOptions({tap:true,tapTolerance:15});o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(!t.touches){return}o.DomEvent.preventDefault(t);this._fireClick=true;
if(t.touches.length>1){this._fireClick=false;clearTimeout(this._holdTimeout);return}var e=t.touches[0],n=e.target;this._startPos=this._newPos=new o.Point(e.clientX,e.clientY);if(n.tagName&&n.tagName.toLowerCase()==="a"){o.DomUtil.addClass(n,"leaflet-active")}this._holdTimeout=setTimeout(o.bind(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent("contextmenu",e)}},this),1e3);o.DomEvent.on(i,"touchmove",this._onMove,this).on(i,"touchend",this._onUp,this)},_onUp:function(t){clearTimeout(this._holdTimeout);o.DomEvent.off(i,"touchmove",this._onMove,this).off(i,"touchend",this._onUp,this);if(this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;if(n&&n.tagName&&n.tagName.toLowerCase()==="a"){o.DomUtil.removeClass(n,"leaflet-active")}if(this._isTapValid()){this._simulateEvent("click",e)}}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(e,n){var r=i.createEvent("MouseEvents");r._simulated=true;n.target._simulatedClick=true;r.initMouseEvent(e,true,true,t,1,n.screenX,n.screenY,n.clientX,n.clientY,false,false,false,false,0,null);n.target.dispatchEvent(r)}});if(o.Browser.touch&&!o.Browser.pointer){o.Map.addInitHook("addHandler","tap",o.Map.Tap)}o.Map.mergeOptions({boxZoom:true});o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t;this._container=t._container;this._pane=t._panes.overlayPane;this._moved=false},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown);this._moved=false},moved:function(){return this._moved},_onMouseDown:function(t){this._moved=false;if(!t.shiftKey||t.which!==1&&t.button!==1){return false}o.DomUtil.disableTextSelection();o.DomUtil.disableImageDrag();this._startLayerPoint=this._map.mouseEventToLayerPoint(t);o.DomEvent.on(i,"mousemove",this._onMouseMove,this).on(i,"mouseup",this._onMouseUp,this).on(i,"keydown",this._onKeyDown,this)},_onMouseMove:function(t){if(!this._moved){this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane);o.DomUtil.setPosition(this._box,this._startLayerPoint);this._container.style.cursor="crosshair";this._map.fire("boxzoomstart")}var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),r=n.subtract(e),s=new o.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));o.DomUtil.setPosition(i,s);this._moved=true;i.style.width=Math.max(0,Math.abs(r.x)-4)+"px";i.style.height=Math.max(0,Math.abs(r.y)-4)+"px"},_finish:function(){if(this._moved){this._pane.removeChild(this._box);this._container.style.cursor=""}o.DomUtil.enableTextSelection();o.DomUtil.enableImageDrag();o.DomEvent.off(i,"mousemove",this._onMouseMove).off(i,"mouseup",this._onMouseUp).off(i,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(this._startLayerPoint.equals(i)){return}var n=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n);e.fire("boxzoomend",{boxZoomBounds:n})},_onKeyDown:function(t){if(t.keyCode===27){this._finish()}}});o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom);o.Map.mergeOptions({keyboard:true,keyboardPanOffset:80,keyboardZoomOffset:1});o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t;this._setPanOffset(t.options.keyboardPanOffset);this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;if(t.tabIndex===-1){t.tabIndex="0"}o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(this._focused){return}var e=i.body,n=i.documentElement,r=e.scrollTop||n.scrollTop,o=e.scrollLeft||n.scrollLeft;this._map._container.focus();t.scrollTo(o,r)},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanOffset:function(t){var e=this._panKeys={},i=this.keyCodes,n,r;for(n=0,r=i.left.length;n<r;n++){e[i.left[n]]=[-1*t,0]}for(n=0,r=i.right.length;n<r;n++){e[i.right[n]]=[t,0]}for(n=0,r=i.down.length;n<r;n++){e[i.down[n]]=[0,t]}for(n=0,r=i.up.length;n<r;n++){e[i.up[n]]=[0,-1*t]}},_setZoomOffset:function(t){var e=this._zoomKeys={},i=this.keyCodes,n,r;for(n=0,r=i.zoomIn.length;n<r;n++){e[i.zoomIn[n]]=t}for(n=0,r=i.zoomOut.length;n<r;n++){e[i.zoomOut[n]]=-t}},_addHooks:function(){o.DomEvent.on(i,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(i,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress){return}i.panBy(this._panKeys[e]);if(i.options.maxBounds){i.panInsideBounds(i.options.maxBounds)}}else if(e in this._zoomKeys){i.setZoom(i.getZoom()+this._zoomKeys[e])}else{return}o.DomEvent.stop(t)}});o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard);o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;if(!this._draggable){this._draggable=new o.Draggable(t,t)}this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);this._draggable.enable();o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);this._draggable.disable();o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=o.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);if(e){o.DomUtil.setPosition(e,i)}t._latlng=n;t.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}});o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;if(e){e.removeControl(this)}this.options.position=t;if(e){e.addControl(this)}return this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];o.DomUtil.addClass(e,"leaflet-control");if(i.indexOf("bottom")!==-1){n.insertBefore(e,n.firstChild)}else{n.appendChild(e)}return this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];i.removeChild(this._container);this._map=null;if(this.onRemove){this.onRemove(t)}return this},_refocusOnMap:function(){if(this._map){this._map.getContainer().focus()}}});o.control=function(t){return new o.Control(t)};o.Map.include({addControl:function(t){t.addTo(this);return this},removeControl:function(t){t.removeFrom(this);return this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=o.DomUtil.create("div",e+"control-container",this._container);function n(n,r){var s=e+n+" "+e+r;t[n+r]=o.DomUtil.create("div",s,i)}n("top","left");n("top","right");n("bottom","left");n("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar");this._map=t;this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",i,this._zoomIn,this);this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",i,this._zoomOut,this);this._updateDisabled();t.on("zoomend zoomlevelschange",this._updateDisabled,this);return i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,n,r,s){var a=o.DomUtil.create("a",i,n);a.innerHTML=t;a.href="#";a.title=e;var u=o.DomEvent.stopPropagation;o.DomEvent.on(a,"click",u).on(a,"mousedown",u).on(a,"dblclick",u).on(a,"click",o.DomEvent.preventDefault).on(a,"click",r,s).on(a,"click",this._refocusOnMap,s);return a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e);o.DomUtil.removeClass(this._zoomOutButton,e);if(t._zoom===t.getMinZoom()){o.DomUtil.addClass(this._zoomOutButton,e)}if(t._zoom===t.getMaxZoom()){o.DomUtil.addClass(this._zoomInButton,e)}}});o.Map.mergeOptions({zoomControl:true});o.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new o.Control.Zoom;this.addControl(this.zoomControl)}});o.control.zoom=function(t){return new o.Control.Zoom(t)};o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t);this._attributions={}},onAdd:function(t){this._container=o.DomUtil.create("div","leaflet-control-attribution");o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers){if(t._layers[e].getAttribution){this.addAttribution(t._layers[e].getAttribution())}}t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this);this._update();return this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){this.options.prefix=t;this._update();return this},addAttribution:function(t){if(!t){return}if(!this._attributions[t]){this._attributions[t]=0}this._attributions[t]++;this._update();return this},removeAttribution:function(t){if(!t){return}if(this._attributions[t]){this._attributions[t]--;this._update()}return this},_update:function(){if(!this._map){return}var t=[];for(var e in this._attributions){if(this._attributions[e]){t.push(e)}}var i=[];if(this.options.prefix){i.push(this.options.prefix)}if(t.length){i.push(t.join(", "))}this._container.innerHTML=i.join(" | ")},_onLayerAdd:function(t){if(t.layer.getAttribution){this.addAttribution(t.layer.getAttribution())}},_onLayerRemove:function(t){if(t.layer.getAttribution){this.removeAttribution(t.layer.getAttribution())}}});o.Map.mergeOptions({attributionControl:true});o.Map.addInitHook(function(){if(this.options.attributionControl){this.attributionControl=(new o.Control.Attribution).addTo(this)}});o.control.attribution=function(t){return new o.Control.Attribution(t)};o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true,updateWhenIdle:false},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;this._addScales(n,e,i);t.on(n.updateWhenIdle?"moveend":"move",this._update,this);t.whenReady(this._update,this);return i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){if(t.metric){this._mScale=o.DomUtil.create("div",e+"-line",i)}if(t.imperial){this._iScale=o.DomUtil.create("div",e+"-line",i)}},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,r=this._map.getSize(),o=this.options,s=0;if(r.x>0){s=n*(o.maxWidth/r.x)}this._updateScales(o,s)},_updateScales:function(t,e){if(t.metric&&e){this._updateMetric(e)}if(t.imperial&&e){this._updateImperial(e)}},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px";this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e=t*3.2808399,i=this._iScale,n,r,o;if(e>5280){n=e/5280;r=this._getRoundNum(n);i.style.width=this._getScaleWidth(r/n)+"px";i.innerHTML=r+" mi"}else{o=this._getRoundNum(e);i.style.width=this._getScaleWidth(o/e)+"px";i.innerHTML=o+" ft"}},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1;return e*i}});o.control.scale=function(t){return new o.Control.Scale(t)};o.Control.Layers=o.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true},initialize:function(t,e,i){o.setOptions(this,i);this._layers={};this._lastZIndex=0;this._handlingClick=false;for(var n in t){this._addLayer(t[n],n)}for(n in e){this._addLayer(e[n],n,true)}},onAdd:function(t){this._initLayout();this._update();t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this);return this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){this._addLayer(t,e);this._update();return this},addOverlay:function(t,e){this._addLayer(t,e,true);this._update();return this},removeLayer:function(t){var e=o.stamp(t);delete this._layers[e];this._update();return this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",true);if(!o.Browser.touch){o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e)}else{o.DomEvent.on(e,"click",o.DomEvent.stopPropagation)}var i=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){if(!o.Browser.android){o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this)}var n=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);n.href="#";n.title="Layers";if(o.Browser.touch){o.DomEvent.on(n,"click",o.DomEvent.stop).on(n,"click",this._expand,this)}else{o.DomEvent.on(n,"focus",this._expand,this)}o.DomEvent.on(i,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this);this._map.on("click",this._collapse,this)}else{this._expand()}this._baseLayersList=o.DomUtil.create("div",t+"-base",i);this._separator=o.DomUtil.create("div",t+"-separator",i);this._overlaysList=o.DomUtil.create("div",t+"-overlays",i);e.appendChild(i)},_addLayer:function(t,e,i){var n=o.stamp(t);this._layers[n]={layer:t,name:e,overlay:i};if(this.options.autoZIndex&&t.setZIndex){this._lastZIndex++;t.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return}this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var t=false,e=false,i,n;for(i in this._layers){n=this._layers[i];this._addItem(n);e=e||n.overlay;t=t||!n.overlay}this._separator.style.display=e&&t?"":"none"},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(!e){return}if(!this._handlingClick){this._update()}var i=e.overlay?t.type==="layeradd"?"overlayadd":"overlayremove":t.type==="layeradd"?"baselayerchange":null;if(i){this._map.fire(i,e)}},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';if(e){n+=' checked="checked"'}n+="/>";var r=i.createElement("div");r.innerHTML=n;return r.firstChild},_addItem:function(t){var e=i.createElement("label"),n,r=this._map.hasLayer(t.layer);if(t.overlay){n=i.createElement("input");n.type="checkbox";n.className="leaflet-control-layers-selector";n.defaultChecked=r}else{n=this._createRadioElement("leaflet-base-layers",r)}n.layerId=o.stamp(t.layer);o.DomEvent.on(n,"click",this._onInputClick,this);var s=i.createElement("span");s.innerHTML=" "+t.name;e.appendChild(n);e.appendChild(s);var a=t.overlay?this._overlaysList:this._baseLayersList;a.appendChild(e);return e},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),r=n.length;this._handlingClick=true;for(t=0;t<r;t++){e=n[t];i=this._layers[e.layerId];if(e.checked&&!this._map.hasLayer(i.layer)){this._map.addLayer(i.layer)}else if(!e.checked&&this._map.hasLayer(i.layer)){this._map.removeLayer(i.layer)}}this._handlingClick=false;this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}});o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)};o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,i,n){this.stop();this._el=t;this._inProgress=true;this._newPos=e;this.fire("start");t.style[o.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)";o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this);o.DomUtil.setPosition(t,e);o.Util.falseFn(t.offsetWidth);this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){if(!this._inProgress){return}o.DomUtil.setPosition(this._el,this._getPos());this._onTransitionEnd();o.Util.falseFn(this._el.offsetWidth)},_onStep:function(){var t=this._getPos();if(!t){this._onTransitionEnd();return}this._el._leaflet_pos=t;this.fire("step")},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,i,n,r=this._el,s=t.getComputedStyle(r);if(o.Browser.any3d){n=s[o.DomUtil.TRANSFORM].match(this._transformRe);if(!n){return}e=parseFloat(n[1]);i=parseFloat(n[2])}else{e=parseFloat(s.left);i=parseFloat(s.top)}return new o.Point(e,i,true)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this);if(!this._inProgress){return}this._inProgress=false;this._el.style[o.DomUtil.TRANSITION]="";this._el._leaflet_pos=this._newPos;clearInterval(this._stepTimer);this.fire("step").fire("end")}});o.Map.include({setView:function(t,e,i){e=e===n?this._zoom:this._limitZoom(e);t=this._limitCenter(o.latLng(t),e,this.options.maxBounds);i=i||{};if(this._panAnim){this._panAnim.stop()}if(this._loaded&&!i.reset&&i!==true){if(i.animate!==n){i.zoom=o.extend({animate:i.animate},i.zoom);i.pan=o.extend({animate:i.animate},i.pan)}var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(r){clearTimeout(this._sizeTimer);return this}}this._resetView(t,e);return this},panBy:function(t,e){t=o.point(t).round();e=e||{};if(!t.x&&!t.y){return this}if(!this._panAnim){this._panAnim=new o.PosAnimation;this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}if(!e.noMoveStart){this.fire("movestart")}if(e.animate!==false){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else{this._rawPanBy(t);this.fire("move").fire("moveend")}return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();if((e&&e.animate)!==true&&!this.getSize().contains(i)){return false}this.panBy(i,e);return true}});o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,i,n){this.stop();this._el=t;this._inProgress=true;this._duration=i||.25;this._easeOutPower=1/Math.max(n||.5,.2);this._startPos=o.DomUtil.getPosition(t);this._offset=e.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step();this._complete()},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var t=+new Date-this._startTime,e=this._duration*1e3;if(t<e){this._runFrame(this._easeOut(t/e))}else{this._runFrame(1);this._complete()}},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e);this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}});o.Map.mergeOptions({zoomAnimation:true,zoomAnimationThreshold:4});if(o.DomUtil.TRANSITION){o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera;if(this._zoomAnimated){o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}})}o.Map.include(!o.DomUtil.TRANSITION?{}:{_catchTransitionEnd:function(t){if(this._animatingZoom&&t.propertyName.indexOf("transform")>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom){return true}i=i||{};if(!this._zoomAnimated||i.animate===false||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold){return false}var n=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/n),o=this._getCenterLayerPoint()._add(r);if(i.animate!==true&&!this.getSize().contains(r)){return false}this.fire("movestart").fire("zoomstart");this._animateZoom(t,e,o,n,null,true);return true},_animateZoom:function(t,e,i,n,r,s,a){if(!a){this._animatingZoom=true}o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this._animateToCenter=t;this._animateToZoom=e;if(o.Draggable){o.Draggable._disabled=true}o.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:i,scale:n,delta:r,backwards:s})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=false;o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._resetView(this._animateToCenter,this._animateToZoom,true,true);if(o.Draggable){o.Draggable._disabled=false}}});o.TileLayer.include({_animateZoom:function(t){if(!this._animating){this._animating=true;this._prepareBgBuffer()}var e=this._bgBuffer,i=o.DomUtil.TRANSFORM,n=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[i],r=o.DomUtil.getScaleString(t.scale,t.origin);e.style[i]=t.backwards?r+" "+n:n+" "+r},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="";t.parentNode.appendChild(t);o.Util.falseFn(e.offsetWidth);this._animating=false},_clearBgBuffer:function(){var t=this._map;if(t&&!t._animatingZoom&&!t.touchZoom._zooming){this._bgBuffer.innerHTML="";this._bgBuffer.style[o.DomUtil.TRANSFORM]=""}},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer;var i=this._getLoadedTilesPercentage(e),n=this._getLoadedTilesPercentage(t);if(e&&i>.5&&n<.5){t.style.visibility="hidden";this._stopLoadingImages(t);return}e.style.visibility="hidden";e.style[o.DomUtil.TRANSFORM]="";this._tileContainer=e;e=this._bgBuffer=t;this._stopLoadingImages(e);clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(t){var e=t.getElementsByTagName("img"),i,n,r=0;for(i=0,n=e.length;i<n;i++){if(e[i].complete){r++}}return r/n},_stopLoadingImages:function(t){var e=Array.prototype.slice.call(t.getElementsByTagName("img")),i,n,r;for(i=0,n=e.length;i<n;i++){r=e[i];if(!r.complete){r.onload=o.Util.falseFn;r.onerror=o.Util.falseFn;r.src=o.Util.emptyImageUrl;r.parentNode.removeChild(r)}}}});o.Map.include({_defaultLocateOptions:{watch:false,setView:false,maxZoom:Infinity,timeout:1e4,maximumAge:0,enableHighAccuracy:false},locate:function(t){t=this._locateOptions=o.extend(this._defaultLocateOptions,t);if(!navigator.geolocation){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);if(t.watch){this._locationWatchId=navigator.geolocation.watchPosition(e,i,t)}else{navigator.geolocation.getCurrentPosition(e,i,t)}return this},stopLocate:function(){if(navigator.geolocation){navigator.geolocation.clearWatch(this._locationWatchId)}if(this._locateOptions){this._locateOptions.setView=false}return this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");if(this._locateOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),r=180*t.coords.accuracy/40075017,s=r/Math.cos(o.LatLng.DEG_TO_RAD*e),a=o.latLngBounds([e-r,i-s],[e+r,i+s]),u=this._locateOptions;if(u.setView){var l=Math.min(this.getBoundsZoom(a),u.maxZoom);this.setView(n,l)}var h={latlng:n,bounds:a,timestamp:t.timestamp};for(var c in t.coords){if(typeof t.coords[c]==="number"){h[c]=t.coords[c]}}this.fire("locationfound",h)}})})(window,document)},{}],31:[function(t,e,i){(function(i,n){var r=i.Backbone,o=i._,s=i.Cocktail;var a=t("geojson-extent");if(r===void 0){r=i.Backbone=t("backbone")}if(r.Associations===void 0){r=t("backbone-associations")}if(o===void 0){o=i._=t("underscore")}if(s===void 0){s=i.Cocktail=t("backbone.cocktail")}if(r.$===void 0){r.$=t("jquery")}if(r.Marionette===void 0){r.Marionette=t("backbone.marionette")}e.exports=n(r,o,s,a)})(window,function(t,e,i,n){var r={};var o=t.Marionette.AppRouter.extend({routes:{"":"_handleNav",":action/:type(/:id)":"_handleNav"},_previousFragment:null,_handleNav:function(t,e,i){}});var s=new o;var a={_isIE:function(){return navigator.appVersion.indexOf("MSIE ")!==-1},_isIE9:function(){return navigator.appVersion.indexOf("MSIE 9.")!==-1}};var u={initialize:function(){this.listenTo(s,"route",function(t,e){if(typeof this._onRoute==="function"){this._onRoute(t,e)}},this)}};var l={_getRelationsForFeature:function(t,i,n){return e.chain(t).filter(function(t){var r=t.get("properties")[i];if(r===void 0||r.length===0){return false}return e.findWhere(r,{id:n})!==void 0}).unique(function(t){return t.get("properties").id}).value()}};r.DrillDownMenuView=t.Marionette.LayoutView.extend({initialize:function(e){var i;this._panelViews=[];i=this._createPanel(e.defaultPanel,e.defaultCollectionKey);if(this.model===void 0){this.model=new t.Model}this.model.set({baseUrlSegment:this.options.baseUrlSegment||"",currentPanelViewCid:i.cid,backUrlSegment:null,currentUrlSegment:null})},onRender:function(){this.defaultPanelRegion.show(this._panelViews[0])},_getPanelByUrlSegment:function(t){return e.filter(this._panelViews,function(e){if(e.model===void 0){return false}return e.model.get("urlSegment")===t})},_showNewPanelView:function(t){var e=null;this._panelViews[0].$el.hide();e=this._createPanelRegion(t.cid);e.show(t)},_setBackUrlSegment:function(){var t=this.model.get("baseUrlSegment"),e=this.model.get("backUrlSegment"),i=this.model.get("currentUrlSegment");if(e===null||e===t){i=t}else{i=i}this.model.set("backUrlSegment",i);return i},_navigateMenuForward:function(t){var e=this.model.get("baseUrlSegment")+t;this._setBackUrlSegment();if(this._panelViews.length>1){this._removePanel(this.model.get("currentPanelViewCid"))}this.model.set("currentUrlSegment",e);s.navigate(e,{trigger:true})},_navigateMenuBack:function(t){var e=this._setBackUrlSegment(),i=e===""?true:false,n=this._panelViews[this._panelViews.length-2];this.model.set({currentPanelViewCid:n.cid});n.$el.addClass("anim-reveal").show();this._removePanel(t);this.model.set("currentUrlSegment",e);s.navigate(e,{trigger:i})},_createPanelRegion:function(t){this.$el.append('<div class="view-absolute panel-region-'+t+'"></div>');return this.addRegion("panelRegion"+t,".panel-region-"+t)},_removePanel:function(t){this._panelViews=e.without(this._panelViews,e.findWhere(this._panelViews,{cid:t}));this.removeRegion("panelRegion"+t);this.$el.find(".panel-region-"+t).remove()},_createPanel:function(t,e,i,n){var r=new t({vent:this.options.vent}),o;this.listenTo(r,"drillDownMenu.navigate.forward",this._navigateMenuForward,this);this.listenTo(r,"drillDownMenu.navigate.back",this._navigateMenuBack,this);if(n!==void 0){r.model.set(n)}if(i!==void 0){o=this._getRelationsForFeature(this.model.get(e).models,i.key,i.value)}else{o=this.model.get(e).models}r.collection.add(o);this._panelViews.push(r);return r}});i.mixin(r.DrillDownMenuView,u,a,l);r.DrillDownPanelView=t.Marionette.CompositeView.extend({childView:r.DrillDownItemView,childViewContainer:".items",templateHelpers:function(){return{items:this.collection.toJSON()}},events:{"click .back":"_navigateMenuBack","click .list__link":"_navigateMenuForward"},initialize:function(){this.model=new t.Model;this.collection=new t.Collection;this.listenTo(this.collection,"change",function(){this.render()},this)},onShow:function(){this.$el.find(".view-absolute").addClass("anim-reveal")},_navigateMenuForward:function(e){this.trigger("drillDownMenu.navigate.forward",t.$(e.currentTarget).data("feature"))},_navigateMenuBack:function(){this.trigger("drillDownMenu.navigate.back",this.cid)}});i.mixin(r.DrillDownPanelView,u,a,l);r.DrillDownItemView=t.Marionette.ItemView.extend({onShow:function(){this.$el.closest(".view-absolute").addClass("anim-reveal")}});i.mixin(r.DrillDownItemView,a,l);r.GeoJsonCollection=t.Collection.extend({fetch:function(t){t=t?e.clone(t):{};if(t.parse===void 0){t.parse=true}var i=t.success;var n=this;t.success=function(e){var r=t.reset?"reset":"set";n[r](e.features,t);if(i){i(n,e,t)}n.trigger("sync",n,e,t)};return this.sync("read",this,t)},_getFeaturesByPropertyValue:function(t,i){return e.filter(this.models,function(e){return e.get("properties")[t]===i})},_getFeatureById:function(t){return e.filter(this.models,function(e){return e.get("properties").id===t})[0]},_getFeaturesByRelation:function(t,i){return e.filter(this.models,function(n){var r=n.get("properties")[t];if(r===void 0||r.length===0){return false}return e.findWhere(r,{id:i})!==void 0})}});r.GeoJsonModel=t.AssociatedModel.extend({_getBounds:function(){var t;if(this.get("geometry").type==="Polygon"){t=n.polygon(this.attributes).coordinates[0]}else{t=n(this.attributes)}return t},_getDisplayTime:function(){var t=null,e=parseFloat(this.get("properties").totalLength),i=parseFloat(this.get("properties").speed),n=0,r=0,o="",s="";if(isNaN(e)||isNaN(i)||i<=0||e<=0){return t}n=Math.ceil(e/(i/60));if(n>60){r=Math.floor(n/60);n-=r*60}o=n===1?"1 min":n+" mins";s=r===1?"1 hour":r+" hours";if(r>0&&n===0){t=s}else if(r>0){t=s+" "+o}else{t=o}return t}});r.MapModel=t.AssociatedModel.extend({defaults:{polling:false,popupFeatureId:null},_populateCollection:function(t,i,n){var r=this.get(t);if(n!==void 0){r.set(e.filter(i,function(t){return t.properties[n.key]===n.value}))}else{r.set(i)}return r},_getFeatureTypeById:function(t,i){return e.filter(this.get(t).models,function(t){return t.get("properties").id===i})[0]},_doFetch:function(){throw new Error("You need to define a _doFetch method on your MapModel.")},_startPolling:function(t){var e=this,i=t||6e4;this._doFetch();this.pollingInterval=setInterval(function(){e._doFetch()},i);this.set("polling",true)},_stopPolling:function(){clearTimeout(this.pollingInterval);this.set("polling",false)},_togglePolling:function(t){if(this.get("polling")===false){this._startPolling(t)}else{this._stopPolling()}}});r.MapView=t.Marionette.ItemView.extend({initialize:function(){this.model=new r.MapModel;this.geoJsonLayers=[];this.options.map.removeControl(this.options.map.zoomControl);this.listenTo(this.options.vent,"userControls.zoomIn",function(){this._zoomIn()},this);this.listenTo(this.options.vent,"userControls.zoomOut",function(){this._zoomOut()},this);this.listenTo(this.options.vent,"userControls.locateUser",function(){this._locateUser()},this);this.listenTo(this.options.vent,"userControls.toggleMapLayer",function(t){this._toggleMapLayer(t)},this)},_zoomIn:function(){this.options.map.zoomIn()
},_zoomOut:function(){this.options.map.zoomOut()},_locateUser:function(){this.options.map.locate({setView:true,maxZoom:this.options.map.getZoom()})},_setMapBounds:function(t){this.options.map.fitBounds(t)},_moveToFeature:function(t){var e=t._getBounds(),i;if(t.get("geometry").type==="Polygon"){i=[[e[0][1],e[0][0]],[e[2][1],e[2][0]]]}else{i=[[e[1],e[0]],[e[3],e[2]]]}this._setMapBounds(i)},_toggleMapLayer:function(t){var i;if(t===void 0){return}i=e.findWhere(this.geoJsonLayers,{id:t});if(i!==void 0&&i.markerClusterGroup!==null){this._removeMapLayer(t)}else{this._addMapLayer(t)}},_addMapLayer:function(i){var n=this.model.get(i),o=e.findWhere(this.geoJsonLayers,{id:i})||{},s;if(n.excludeFromMap||i===void 0){return}if(!e.isEmpty(o)&&o.markerClusterGroup!==null){this._removeMapLayer(o.id)}o.id=i;o.visible=true;o.markerClusterGroup=L.markerClusterGroup();s=L.geoJson(null,{onEachFeature:function(e,i){i.on("click",function(){r.router._previousFragment=t.history.fragment;r.router.navigate(e.properties.featureType+"/"+e.properties.id,{trigger:true})})}});e.each(n.models,function(t){s.addData(t.attributes)});o.markerClusterGroup.addLayer(s);this.options.map.addLayer(o.markerClusterGroup);this.geoJsonLayers.push(o)},_removeMapLayer:function(t){var i=e.findWhere(this.geoJsonLayers,{id:t});this.options.map.removeLayer(i.markerClusterGroup);i.markerClusterGroup=null}});i.mixin(r.MapView,u,a);r.PopupModel=t.AssociatedModel.extend({relations:[{type:t.One,key:"feature",relatedModel:r.GeoJsonModel}],defaults:{hidden:true,type:null,feature:function(){return new r.GeoJsonModel}}});r.PopupView=t.Marionette.LayoutView.extend({events:{"click .close":"_closePopup"},initialize:function(){this.model=new r.PopupModel},onRender:function(){if(this.model.get("hidden")===false){e.defer(function(){t.$("body").addClass("modal-active")})}else{e.defer(function(){t.$("body").removeClass("modal-active")})}},_openPopup:function(t){this.model.set({hidden:false,feature:t,type:t.get("properties").featureType});this.render();this.options.vent.trigger("popup.afterOpen",this.model.get("feature"))},_closePopup:function(){var t=s._previousFragment!==null?s._previousFragment:"";this.model.set({hidden:true,feature:null,type:null});this.render();s.navigate(t,{trigger:false});s._previousFragment=null;this.options.vent.trigger("popup.afterClose")}});i.mixin(r.PopupView,u,a);r.router=s;r.UserControlsView=t.Marionette.ItemView.extend({initialize:function(){this.model=new t.Model({mapLayerFiltersOpen:false})},template:e.template('            <div class="map-controls">                 <div class="section--view-type-nav">                     <ul class="map-nav--view-type">                         <li class="nav__item">                             <a id="mobile-control-map-button" href="javascript:void(0)">Map</a>                         </li>                     </ul>                     <ul class="map-nav--view-type">                         <li class="nav__item">                             <a id="mobile-control-list-button" href="javascript:void(0)">List</a>                         </li>                     </ul>                 </div>                 <div class="section--map-nav">                     <ul class="map-nav--icon">                         <li class="map-nav__item">                             <a href="javascript:void(0)" id="zoomIn">                                 <i class="i i-map-plus"></i>                                 <span class="sr-only">Zoom in</span>                             </a>                         </li>                         <li class="map-nav__item">                             <a href="javascript:void(0)" id="zoomOut">                                 <i class="i i-map-minus"></i>                                 <span class="sr-only">Zoom out</span>                             </a>                         </li>                     </ul>                     <ul class="map-nav--icon">                         <li class="map-nav__item">                             <a href="javascript:void(0)" id="locate">                                 <i class="i i-map-compass"></i>                                 <span class="sr-only">Locate</span>                             </a>                         </li>                     </ul>                     <ul class="map-nav--icon">                         <li class="map-nav__item toggle-tools">                             <a href="javascript:void(0)" class="" id="mapLayerFilters">                                 <i class="i i-map-cog"></i>                                 <span class="sr-only">View options</span>                             </a>                         </li>                     </ul>                     <div id="key"></div>                 </div>             </div>         '),events:{"click #zoomIn":"_zoomIn","click #zoomOut":"_zoomOut","click #locate":"_locateUser","click #mapLayerFilters":"_toggleMapLayerFilters","click #mobile-control-map-button":"_handleMobileControlMapButton","click #mobile-control-list-button":"_handleMobileControlListButton","click .map-layer-filter":"_toggleMapLayer"},_zoomIn:function(){this.options.vent.trigger("userControls.zoomIn")},_zoomOut:function(){this.options.vent.trigger("userControls.zoomOut")},_locateUser:function(){this.options.vent.trigger("userControls.locateUser")},_toggleMapLayerFilters:function(){this.model.set("mapLayerFiltersOpen",this.model.get("mapLayerFiltersOpen")===false);$("body").toggleClass("tools-active")},_toggleMapLayer:function(e){this.options.vent.trigger("userControls.toggleMapLayer",t.$(e.currentTarget).data("layer"))},_handleMobileControlMapButton:function(){$("body").removeClass("list-active")},_handleMobileControlListButton:function(){$("body").addClass("list-active")}});i.mixin(r.UserControlsView,u,a);return r})},{backbone:39,"backbone-associations":32,"backbone.cocktail":33,"backbone.marionette":35,"geojson-extent":41,jquery:48,underscore:49}],32:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{backbone:39,dup:17,underscore:49}],33:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18,underscore:34}],34:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],35:[function(t,e,i){(function(n,r){if(typeof define==="function"&&define.amd){define(["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(t,e){return n.Marionette=n.Mn=r(n,t,e)})}else if(typeof i!=="undefined"){var o=t("backbone");var s=t("underscore");var a=t("backbone.wreqr");var u=t("backbone.babysitter");e.exports=r(n,o,s)}else{n.Marionette=n.Mn=r(n,n.Backbone,n._)}})(this,function(t,e,i){"use strict";var n=t.Marionette;var r=t.Mn;var o=e.Marionette={};o.VERSION="2.3.0";o.noConflict=function(){t.Marionette=n;t.Mn=r;return this};o.Deferred=e.$.Deferred;o.extend=e.Model.extend;o.isNodeAttached=function(t){return e.$.contains(document.documentElement,t)};o.getOption=function(t,e){if(!t||!e){return}if(t.options&&t.options[e]!==undefined){return t.options[e]}else{return t[e]}};o.proxyGetOption=function(t){return o.getOption(this,t)};o.normalizeMethods=function(t){return i.reduce(t,function(t,e,n){if(!i.isFunction(e)){e=this[e]}if(e){t[n]=e}return t},{},this)};o.normalizeUIString=function(t,e){return t.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(t){return e[t.slice(4)]})};o.normalizeUIKeys=function(t,e){return i.reduce(t,function(t,i,n){var r=o.normalizeUIString(n,e);t[r]=i;return t},{})};o.normalizeUIValues=function(t,e){i.each(t,function(n,r){if(i.isString(n)){t[r]=o.normalizeUIString(n,e)}});return t};o.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e));var r=[t].concat(i.toArray(arguments));return i[n].apply(i,r)}})};var s=o.deprecate=function(t,e){if(i.isObject(t)){t=t.prev+" is going to be removed in the future. "+"Please use "+t.next+" instead."+(t.url?" See: "+t.url:"")}if((e===undefined||!e)&&!s._cache[t]){s._warn("Deprecation warning: "+t);s._cache[t]=true}};s._warn=typeof console!=="undefined"&&(console.warn||console.log)||function(){};s._cache={};o._triggerMethod=function(){var t=/(^|:)(\w)/gi;function e(t,e,i){return i.toUpperCase()}return function(n,r,o){var s=arguments.length<3;if(s){o=r;r=o[0]}var a="on"+r.replace(t,e);var u=n[a];var l;if(i.isFunction(u)){l=u.apply(n,s?i.rest(o):o)}if(i.isFunction(n.trigger)){if(s+o.length>1){n.trigger.apply(n,s?o:[r].concat(i.rest(o,0)))}else{n.trigger(r)}}return l}}();o.triggerMethod=function(t){return o._triggerMethod(this,arguments)};o.triggerMethodOn=function(t){var e=i.isFunction(t.triggerMethod)?t.triggerMethod:o.triggerMethod;return e.apply(t,i.rest(arguments))};o.MonitorDOMRefresh=function(t){function e(){t._isShown=true;r()}function n(){t._isRendered=true;r()}function r(){if(t._isShown&&t._isRendered&&o.isNodeAttached(t.el)){if(i.isFunction(t.triggerMethod)){t.triggerMethod("dom:refresh")}}}t.on({show:e,render:n})};(function(t){"use strict";function e(e,n,r,o){var s=o.split(/\s+/);i.each(s,function(i){var o=e[i];if(!o){throw new t.Error('Method "'+i+'" was configured as an event handler, but does not exist.')}e.listenTo(n,r,o)})}function n(t,e,i,n){t.listenTo(e,i,n)}function r(t,e,n,r){var o=r.split(/\s+/);i.each(o,function(i){var r=t[i];t.stopListening(e,n,r)})}function o(t,e,i,n){t.stopListening(e,i,n)}function s(e,n,r,o,s){if(!n||!r){return}if(!i.isFunction(r)&&!i.isObject(r)){throw new t.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"})}if(i.isFunction(r)){r=r.call(e)}i.each(r,function(t,r){if(i.isFunction(t)){o(e,n,r,t)}else{s(e,n,r,t)}})}t.bindEntityEvents=function(t,i,r){s(t,i,r,n,e)};t.unbindEntityEvents=function(t,e,i){s(t,e,i,o,r)};t.proxyBindEntityEvents=function(e,i){return t.bindEntityEvents(this,e,i)};t.proxyUnbindEntityEvents=function(e,i){return t.unbindEntityEvents(this,e,i)}})(o);var a=["description","fileName","lineNumber","name","message","number"];o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(t,e){if(i.isObject(t)){e=t;t=e.message}else if(!e){e={}}var n=Error.call(this,t);i.extend(this,i.pick(n,a),i.pick(e,a));this.captureStackTrace();if(e.url){this.url=this.urlRoot+e.url}},captureStackTrace:function(){if(Error.captureStackTrace){Error.captureStackTrace(this,o.Error)}},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});o.Error.extend=o.extend;o.Callbacks=function(){this._deferred=o.Deferred();this._callbacks=[]};i.extend(o.Callbacks.prototype,{add:function(t,e){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:t,ctx:e});n.then(function(i){if(e){i.context=e}t.call(i.context,i.options)})},run:function(t,e){this._deferred.resolve({options:t,context:e})},reset:function(){var t=this._callbacks;this._deferred=o.Deferred();this._callbacks=[];i.each(t,function(t){this.add(t.cb,t.ctx)},this)}});o.Controller=function(t){this.options=t||{};if(i.isFunction(this.initialize)){this.initialize(this.options)}};o.Controller.extend=o.extend;i.extend(o.Controller.prototype,e.Events,{destroy:function(){o._triggerMethod(this,"before:destroy",arguments);o._triggerMethod(this,"destroy",arguments);this.stopListening();this.off();return this},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption});o.Object=function(t){this.options=i.extend({},i.result(this,"options"),t);this.initialize.apply(this,arguments)};o.Object.extend=o.extend;i.extend(o.Object.prototype,e.Events,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening()},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents});o.Region=o.Object.extend({constructor:function(t){this.options=t||{};this.el=this.getOption("el");this.el=this.el instanceof e.$?this.el[0]:this.el;if(!this.el){throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'})}this.$el=this.getEl(this.el);o.Object.call(this,t)},show:function(t,e){if(!this._ensureElement()){return}this._ensureViewIsIntact(t);var i=e||{};var n=t!==this.currentView;var r=!!i.preventDestroy;var s=!!i.forceShow;var a=!!this.currentView;var u=n&&!r;var l=n||s;if(a){this.triggerMethod("before:swapOut",this.currentView,this,e)}if(this.currentView){delete this.currentView._parent}if(u){this.empty()}else if(a&&l){this.currentView.off("destroy",this.empty,this)}if(l){t.once("destroy",this.empty,this);t.render();t._parent=this;if(a){this.triggerMethod("before:swap",t,this,e)}this.triggerMethod("before:show",t,this,e);o.triggerMethodOn(t,"before:show",t,this,e);if(a){this.triggerMethod("swapOut",this.currentView,this,e)}var h=o.isNodeAttached(this.el);var c=[];var f=i.triggerBeforeAttach||this.triggerBeforeAttach;var d=i.triggerAttach||this.triggerAttach;if(h&&f){c=this._displayedViews(t);this._triggerAttach(c,"before:")}this.attachHtml(t);this.currentView=t;if(h&&d){c=this._displayedViews(t);this._triggerAttach(c)}if(a){this.triggerMethod("swap",t,this,e)}this.triggerMethod("show",t,this,e);o.triggerMethodOn(t,"show",t,this,e);return this}return this},triggerBeforeAttach:true,triggerAttach:true,_triggerAttach:function(t,e){var n=(e||"")+"attach";i.each(t,function(t){o.triggerMethodOn(t,n,t,this)},this)},_displayedViews:function(t){return i.union([t],i.result(t,"_getNestedViews")||[])},_ensureElement:function(){if(!i.isObject(this.el)){this.$el=this.getEl(this.el);this.el=this.$el[0]}if(!this.$el||this.$el.length===0){if(this.getOption("allowMissingEl")){return false}else{throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")}}return true},_ensureViewIsIntact:function(t){if(!t){throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."})}if(t.isDestroyed){throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+t.cid+'") has already been destroyed and cannot be used.'})}},getEl:function(t){return e.$(t)},attachHtml:function(t){this.$el.html("");this.el.appendChild(t.el)},empty:function(){var t=this.currentView;if(!t){return}t.off("destroy",this.empty,this);this.triggerMethod("before:empty",t);this._destroyView();this.triggerMethod("empty",t);delete this.currentView;return this},_destroyView:function(){var t=this.currentView;if(t.destroy&&!t.isDestroyed){t.destroy()}else if(t.remove){t.remove();t.isDestroyed=true}},attachView:function(t){this.currentView=t;return this},hasView:function(){return!!this.currentView},reset:function(){this.empty();if(this.$el){this.el=this.$el.selector}delete this.$el;return this}},{buildRegion:function(t,e){if(i.isString(t)){return this._buildRegionFromSelector(t,e)}if(t.selector||t.el||t.regionClass){return this._buildRegionFromObject(t,e)}if(i.isFunction(t)){return this._buildRegionFromRegionClass(t)}throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(t,e){return new e({el:t})},_buildRegionFromObject:function(t,n){var r=t.regionClass||n;var o=i.omit(t,"selector","regionClass");if(t.selector&&!o.el){o.el=t.selector}var s=new r(o);if(t.parentEl){s.getEl=function(n){if(i.isObject(n)){return e.$(n)}var r=t.parentEl;if(i.isFunction(r)){r=r()}return r.find(n)}}return s},_buildRegionFromRegionClass:function(t){return new t}});o.RegionManager=o.Controller.extend({constructor:function(t){this._regions={};o.Controller.call(this,t);this.addRegions(this.getOption("regions"))},addRegions:function(t,e){if(i.isFunction(t)){t=t.apply(this,arguments)}var n={};i.each(t,function(t,r){if(i.isString(t)){t={selector:t}}if(t.selector){t=i.defaults({},t,e)}var o=this.addRegion(r,t);n[r]=o},this);return n},addRegion:function(t,e){var i;if(e instanceof o.Region){i=e}else{i=o.Region.buildRegion(e,o.Region)}this.triggerMethod("before:add:region",t,i);i._parent=this;this._store(t,i);this.triggerMethod("add:region",t,i);return i},get:function(t){return this._regions[t]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(t){var e=this._regions[t];this._remove(t,e);return e},removeRegions:function(){var t=this.getRegions();i.each(this._regions,function(t,e){this._remove(e,t)},this);return t},emptyRegions:function(){var t=this.getRegions();i.invoke(t,"empty");return t},destroy:function(){this.removeRegions();return o.Controller.prototype.destroy.apply(this,arguments)},_store:function(t,e){this._regions[t]=e;this._setLength()},_remove:function(t,e){this.triggerMethod("before:remove:region",t,e);e.empty();e.stopListening();delete e._parent;delete this._regions[t];this._setLength();this.triggerMethod("remove:region",t,e)},_setLength:function(){this.length=i.size(this._regions)}});o.actAsCollection(o.RegionManager.prototype,"_regions");o.TemplateCache=function(t){this.templateId=t};i.extend(o.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];if(!e){e=new o.TemplateCache(t);this.templateCaches[t]=e}return e.load()},clear:function(){var t;var e=i.toArray(arguments);var n=e.length;if(n>0){for(t=0;t<n;t++){delete this.templateCaches[e[t]]}}else{this.templateCaches={}}}});i.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate){return this.compiledTemplate}var t=this.loadTemplate(this.templateId);this.compiledTemplate=this.compileTemplate(t);return this.compiledTemplate},loadTemplate:function(t){var i=e.$(t).html();if(!i||i.length===0){throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+t+'"'})}return i},compileTemplate:function(t){return i.template(t)}});o.Renderer={render:function(t,e){if(!t){throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."})}var i;if(typeof t==="function"){i=t}else{i=o.TemplateCache.get(t)}return i(e)}};o.View=e.View.extend({constructor:function(t){i.bindAll(this,"render");t=i.isFunction(t)?t.call(this):t;this.options=i.extend({},i.result(this,"options"),t);this._behaviors=o.Behaviors(this);e.View.apply(this,arguments);o.MonitorDOMRefresh(this);this.on("show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(t){return t.toJSON.apply(t,i.rest(arguments))},mixinTemplateHelpers:function(t){t=t||{};var e=this.getOption("templateHelpers");if(i.isFunction(e)){e=e.call(this)}return i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"_uiBindings");return o.normalizeUIKeys(t,e||i.result(this,"ui"))},normalizeUIValues:function(t){var e=i.result(this,"ui");var n=i.result(this,"_uiBindings");return o.normalizeUIValues(t,n||e)},configureTriggers:function(){if(!this.triggers){return}var t=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(t,function(t,e,i){t[i]=this._buildViewTrigger(e);return t},{},this)},delegateEvents:function(t){this._delegateDOMEvents(t);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));i.each(this._behaviors,function(t){t.bindEntityEvents(this.model,t.getOption("modelEvents"));t.bindEntityEvents(this.collection,t.getOption("collectionEvents"))},this);return this},_delegateDOMEvents:function(t){var n=t||this.events;if(i.isFunction(n)){n=n.call(this)}n=this.normalizeUIKeys(n);if(i.isUndefined(t)){this.events=n}var r={};var o=i.result(this,"behaviorEvents")||{};var s=this.configureTriggers();var a=i.result(this,"behaviorTriggers")||{};i.extend(r,o,n,s,a);e.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){e.View.prototype.undelegateEvents.apply(this,arguments);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));i.each(this._behaviors,function(t){t.unbindEntityEvents(this.model,t.getOption("modelEvents"));t.unbindEntityEvents(this.collection,t.getOption("collectionEvents"))},this);return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})}},destroy:function(){if(this.isDestroyed){return}var t=i.toArray(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(t));this.isDestroyed=true;this.triggerMethod.apply(this,["destroy"].concat(t));this.unbindUIElements();this.remove();i.invoke(this._behaviors,"destroy",t);return this},bindUIElements:function(){this._bindUIElements();i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(!this.ui){return}if(!this._uiBindings){this._uiBindings=this.ui}var t=i.result(this,"_uiBindings");this.ui={};i.each(i.keys(t),function(e){var i=t[e];this.ui[e]=this.$(i)},this)},unbindUIElements:function(){this._unbindUIElements();i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){if(!this.ui||!this._uiBindings){return}i.each(this.ui,function(t,e){delete this.ui[e]},this);this.ui=this._uiBindings;delete this._uiBindings},_buildViewTrigger:function(t){var e=i.isObject(t);var n=i.defaults({},e?t:{},{preventDefault:true,stopPropagation:true});var r=e?n.event:t;return function(t){if(t){if(t.preventDefault&&n.preventDefault){t.preventDefault()}if(t.stopPropagation&&n.stopPropagation){t.stopPropagation()}}var e={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,e)}},setElement:function(){var t=e.View.prototype.setElement.apply(this,arguments);i.invoke(this._behaviors,"proxyViewProperties",this);return t},triggerMethod:function(){var t=o._triggerMethod;var e=t(this,arguments);var i=this._behaviors;for(var n=0,r=i&&i.length;n<r;n++){t(i[n],arguments)}return e},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var t=this._getImmediateChildren();if(!t.length){return t}return i.reduce(t,function(t,e){if(!e._getNestedViews){return t}return t.concat(e._getNestedViews())},t)},normalizeMethods:o.normalizeMethods,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents});o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection){return{}}var t=[this.model||this.collection];if(arguments.length){t.push.apply(t,arguments)}if(this.model){return this.serializeModel.apply(this,t)}else{return{items:this.serializeCollection.apply(this,t)}}},serializeCollection:function(t){return t.toJSON.apply(t,i.rest(arguments))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var t=this.getTemplate();if(t===false){return}if(!t){throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."})}var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=o.Renderer.render(t,e,this);this.attachElContent(i);return this},attachElContent:function(t){this.$el.html(t);return this}});o.CollectionView=o.View.extend({childViewEventPrefix:"childview",constructor:function(t){var e=t||{};if(i.isUndefined(this.sort)){this.sort=i.isUndefined(e.sort)?true:e.sort}this.once("render",this._initialEvents);this._initChildViewStorage();o.View.apply(this,arguments);this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=true},endBuffering:function(){this.isBuffering=false;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){if(this._isShown){i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"before:show"))}},_triggerShowBufferedChildren:function(){if(this._isShown){i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"show"));this._bufferedChildren=[]}},_triggerMethodOnChild:function(t,e){o.triggerMethodOn(e,t)},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this._onCollectionAdd);this.listenTo(this.collection,"remove",this._onCollectionRemove);this.listenTo(this.collection,"reset",this.render);if(this.sort){this.listenTo(this.collection,"sort",this._sortViews)}}},_onCollectionAdd:function(t){this.destroyEmptyView();var e=this.getChildView(t);var i=this.collection.indexOf(t);this.addChild(t,e,i)},_onCollectionRemove:function(t){var e=this.children.findByModel(t);this.removeChildView(e);this.checkEmpty()},onShowCalled:function(){this.children.each(i.partial(this._triggerMethodOnChild,"show"))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",this);return this},resortView:function(){this.render()},_sortViews:function(){var t=this.collection.find(function(t,e){var i=this.children.findByModel(t);return!i||i._index!==e},this);if(t){this.resortView()}},_emptyViewIndex:-1,_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();if(this.isEmpty(this.collection)){this.showEmptyView()}else{this.triggerMethod("before:render:collection",this);this.startBuffering();this.showCollection();this.endBuffering();this.triggerMethod("render:collection",this)}},showCollection:function(){var t;this.collection.each(function(e,i){t=this.getChildView(e);this.addChild(e,t,i)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=true;var i=new e.Model;this.addEmptyView(i,t);this.triggerMethod("render:empty")}},destroyEmptyView:function(){if(this._showingEmptyView){this.triggerMethod("before:remove:empty");this.destroyChildren();delete this._showingEmptyView;this.triggerMethod("remove:empty")}},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(t,e){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");if(i.isFunction(n)){n=n.call(this,t,this._emptyViewIndex)}var r=this.buildChildView(t,e,n);r._parent=this;this.proxyChildEvents(r);if(this._isShown){o.triggerMethodOn(r,"before:show")}this.children.add(r);this.renderChildView(r,this._emptyViewIndex);if(this._isShown){o.triggerMethodOn(r,"show")}},getChildView:function(t){var e=this.getOption("childView");if(!e){throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'})}return e},addChild:function(t,e,n){var r=this.getOption("childViewOptions");if(i.isFunction(r)){r=r.call(this,t,n)}var o=this.buildChildView(t,e,r);this._updateIndices(o,true,n);this._addChildView(o,n);o._parent=this;return o},_updateIndices:function(t,e,i){if(!this.sort){return}if(e){t._index=i;this.children.each(function(e){if(e._index>=t._index){e._index++}})}else{this.children.each(function(e){if(e._index>=t._index){e._index--}})}},_addChildView:function(t,e){this.proxyChildEvents(t);this.triggerMethod("before:add:child",t);this.children.add(t);this.renderChildView(t,e);if(this._isShown&&!this.isBuffering){o.triggerMethodOn(t,"show")}this.triggerMethod("add:child",t)},renderChildView:function(t,e){t.render();this.attachHtml(this,t,e);return t},buildChildView:function(t,e,n){var r=i.extend({model:t},n);return new e(r)},removeChildView:function(t){if(t){this.triggerMethod("before:remove:child",t);if(t.destroy){t.destroy()}else if(t.remove){t.remove()}delete t._parent;this.stopListening(t);this.children.remove(t);this.triggerMethod("remove:child",t);this._updateIndices(t,false)}return t},isEmpty:function(){return!this.collection||this.collection.length===0},checkEmpty:function(){if(this.isEmpty(this.collection)){this.showEmptyView()}},attachBuffer:function(t,e){t.$el.append(e)},attachHtml:function(t,e,i){if(t.isBuffering){t.elBuffer.appendChild(e.el);t._bufferedChildren.push(e)}else{if(!t._insertBefore(e,i)){t._insertAfter(e)}}},_insertBefore:function(t,e){var i;var n=this.sort&&e<this.children.length-1;if(n){i=this.children.find(function(t){return t._index===e+1})}if(i){i.$el.before(t.el);return true}return false},_insertAfter:function(t){this.$el.append(t.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},destroy:function(){if(this.isDestroyed){return}this.triggerMethod("before:destroy:collection");this.destroyChildren();this.triggerMethod("destroy:collection");return o.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var t=this.children.map(i.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return t},proxyChildEvents:function(t){var e=this.getOption("childViewEventPrefix");this.listenTo(t,"all",function(){var n=i.toArray(arguments);var r=n[0];var o=this.normalizeMethods(i.result(this,"childEvents"));n[0]=e+":"+r;n.splice(1,0,t);if(typeof o!=="undefined"&&i.isFunction(o[r])){o[r].apply(this,n.slice(1))}this.triggerMethod.apply(this,n)},this)},_getImmediateChildren:function(){return i.values(this.children._views)}});o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this._onCollectionAdd);this.listenTo(this.collection,"remove",this._onCollectionRemove);this.listenTo(this.collection,"reset",this._renderChildren);if(this.sort){this.listenTo(this.collection,"sort",this._sortViews)}}},getChildView:function(t){var e=this.getOption("childView")||this.constructor;return e},serializeData:function(){var t={};if(this.model){t=i.partial(this.serializeModel,this.model).apply(this,arguments)}return t},render:function(){this._ensureViewIsIntact();this.isRendered=true;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){if(this.isRendered){o.CollectionView.prototype._renderChildren.call(this)}},_renderTemplate:function(){var t={};t=this.serializeData();t=this.mixinTemplateHelpers(t);this.triggerMethod("before:render:template");var e=this.getTemplate();var i=o.Renderer.render(e,t,this);this.attachElContent(i);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(t){this.$el.html(t);return this},attachBuffer:function(t,e){var i=this.getChildViewContainer(t);i.append(e)},_insertAfter:function(t){var e=this.getChildViewContainer(this,t);e.append(t.el)},getChildViewContainer:function(t,e){if("$childViewContainer"in t){return t.$childViewContainer}var n;var r=o.getOption(t,"childViewContainer");if(r){var s=i.isFunction(r)?r.call(t):r;if(s.charAt(0)==="@"&&t.ui){n=t.ui[s.substr(4)]}else{n=t.$(s)}if(n.length<=0){throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+t.childViewContainer})}}else{n=t.$el}t.$childViewContainer=n;return n},resetChildViewContainer:function(){if(this.$childViewContainer){delete this.$childViewContainer}}});o.LayoutView=o.ItemView.extend({regionClass:o.Region,constructor:function(t){t=t||{};this._firstRender=true;this._initializeRegions(t);o.ItemView.call(this,t)},render:function(){this._ensureViewIsIntact();if(this._firstRender){this._firstRender=false}else{this._reInitializeRegions()}return o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed){return this}this.regionManager.destroy();return o.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(t,e){var i={};i[t]=e;return this._buildRegions(i)[t]},addRegions:function(t){this.regions=i.extend({},this.regions,t);return this._buildRegions(t)},removeRegion:function(t){delete this.regions[t];
return this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(t){var e={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"$el")};return this.regionManager.addRegions(t,e)},_initializeRegions:function(t){var e;this._initRegionManager();if(i.isFunction(this.regions)){e=this.regions(t)}else{e=this.regions||{}}var n=this.getOption.call(t,"regions");if(i.isFunction(n)){n=n.call(this,t)}i.extend(e,n);e=this.normalizeUIValues(e);this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.regionManager._parent=this;this.listenTo(this.regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)});this.listenTo(this.regionManager,"add:region",function(t,e){this[t]=e;this.triggerMethod("add:region",t,e)});this.listenTo(this.regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)});this.listenTo(this.regionManager,"remove:region",function(t,e){delete this[t];this.triggerMethod("remove:region",t,e)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}});o.Behavior=o.Object.extend({constructor:function(t,e){this.view=e;this.defaults=i.result(this,"defaults")||{};this.options=i.extend({},this.defaults,t);o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening()},proxyViewProperties:function(t){this.$el=t.$el;this.el=t.el}});o.Behaviors=function(t,e){function i(t,r){if(!e.isObject(t.behaviors)){return{}}r=i.parseBehaviors(t,r||e.result(t,"behaviors"));i.wrap(t,r,e.keys(n));return r}var n={behaviorTriggers:function(t,e){var i=new r(this,e);return i.buildBehaviorTriggers()},behaviorEvents:function(i,n){var r={};var o=e.result(this,"ui");e.each(n,function(i,n){var s={};var a=e.clone(e.result(i,"events"))||{};var u=e.result(i,"ui");var l=e.extend({},o,u);a=t.normalizeUIKeys(a,l);e.each(e.keys(a),function(t){var r=new Array(n+2).join(" ");var o=t+r;var u=e.isFunction(a[t])?a[t]:i[a[t]];s[o]=e.bind(u,i)});r=e.extend(r,s)});return r}};e.extend(i,{behaviorsLookup:function(){throw new t.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,n){if(t.behaviorClass){return t.behaviorClass}return e.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(t,n){return e.chain(n).map(function(n,r){var o=i.getBehaviorClass(n,r);var s=new o(n,t);var a=i.parseBehaviors(t,e.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(t,i,r){e.each(r,function(r){t[r]=e.partial(n[r],t[r],i)})}});function r(t,i){this._view=t;this._viewUI=e.result(t,"ui");this._behaviors=i;this._triggers={}}e.extend(r.prototype,{buildBehaviorTriggers:function(){e.each(this._behaviors,this._buildTriggerHandlersForBehavior,this);return this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var r=e.extend({},this._viewUI,e.result(i,"ui"));var o=e.clone(e.result(i,"triggers"))||{};o=t.normalizeUIKeys(o,r);e.each(o,e.partial(this._setHandlerForBehavior,i,n),this)},_setHandlerForBehavior:function(t,e,i,n){var r=n.replace(/^\S+/,function(t){return t+"."+"behaviortriggers"+e});this._triggers[r]=this._view._buildViewTrigger(i)}});return i}(o,i);o.AppRouter=e.Router.extend({constructor:function(t){this.options=t||{};e.Router.apply(this,arguments);var i=this.getOption("appRoutes");var n=this._getController();this.processAppRoutes(n,i);this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[t];this.onRoute(t,n,e)}},processAppRoutes:function(t,e){if(!e){return}var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)},_getController:function(){return this.getOption("controller")},_addAppRoute:function(t,e,n){var r=t[n];if(!r){throw new o.Error('Method "'+n+'" was not found on the controller')}this.route(e,n,i.bind(r,t))},getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents});o.Application=o.Object.extend({constructor:function(t){this._initializeRegions(t);this._initCallbacks=new o.Callbacks;this.submodules={};i.extend(this,t);this._initChannel();o.Object.call(this,t)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("before:start",t);this._initCallbacks.run(t,this);this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(t){return this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},getRegions:function(){return this._regionManager.getRegions()},module:function(t,e){var n=o.Module.getClass(e);var r=i.toArray(arguments);r.unshift(this);return n.create.apply(n,r)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(t){var e=i.isFunction(this.regions)?this.regions(t):this.regions||{};this._initRegionManager();var n=o.getOption(t,"regions");if(i.isFunction(n)){n=n.call(this,t)}i.extend(e,n);this.addRegions(e);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this._regionManager._parent=this;this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)});this.listenTo(this._regionManager,"add:region",function(t,e){this[t]=e;o._triggerMethod(this,"add:region",arguments)});this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)});this.listenTo(this._regionManager,"remove:region",function(t){delete this[t];o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global";this.channel=i.result(this,"channel")||e.Wreqr.radio.channel(this.channelName);this.vent=i.result(this,"vent")||this.channel.vent;this.commands=i.result(this,"commands")||this.channel.commands;this.reqres=i.result(this,"reqres")||this.channel.reqres}});o.Module=function(t,e,n){this.moduleName=t;this.options=i.extend({},this.options,n);this.initialize=n.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=e;if(i.isFunction(this.initialize)){this.initialize(t,e,this.options)}};o.Module.extend=o.extend;i.extend(o.Module.prototype,e.Events,{startWithParent:true,initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){if(this._isInitialized){return}i.each(this.submodules,function(e){if(e.startWithParent){e.start(t)}});this.triggerMethod("before:start",t);this._initializerCallbacks.run(t,this);this._isInitialized=true;this.triggerMethod("start",t)},stop:function(){if(!this._isInitialized){return}this._isInitialized=false;this.triggerMethod("before:stop");i.invoke(this.submodules,"stop");this._finalizerCallbacks.run(undefined,this);this._initializerCallbacks.reset();this._finalizerCallbacks.reset();this.triggerMethod("stop")},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(!t){return}var r=i.flatten([this,this.app,e,o,e.$,i,n]);t.apply(this,r)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks;this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod});i.extend(o.Module,{create:function(t,e,n){var r=t;var o=i.rest(arguments,3);e=e.split(".");var s=e.length;var a=[];a[s-1]=n;i.each(e,function(e,i){var s=r;r=this._getModule(s,e,t,n);this._addModuleDefinition(s,r,a[i],o)},this);return r},_getModule:function(t,e,n,r,o){var s=i.extend({},r);var a=this.getClass(r);var u=t[e];if(!u){u=new a(e,n,s);t[e]=u;t.submodules[e]=u}return u},getClass:function(t){var e=o.Module;if(!t){return e}if(t.prototype instanceof e){return t}return t.moduleClass||e},_addModuleDefinition:function(t,e,i,n){var r=this._getDefine(i);var o=this._getStartWithParent(i,e);if(r){e.addDefinition(r,n)}this._addStartWithParent(t,e,o)},_getStartWithParent:function(t,e){var n;if(i.isFunction(t)&&t.prototype instanceof o.Module){n=e.constructor.prototype.startWithParent;return i.isUndefined(n)?true:n}if(i.isObject(t)){n=t.startWithParent;return i.isUndefined(n)?true:n}return true},_getDefine:function(t){if(i.isFunction(t)&&!(t.prototype instanceof o.Module)){return t}if(i.isObject(t)){return t.define}return null},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i;if(!e.startWithParent||!!e.startWithParentIsConfigured){return}e.startWithParentIsConfigured=true;t.addInitializer(function(t){if(e.startWithParent){e.start(t)}})}});return o})},{backbone:39,"backbone.babysitter":36,"backbone.wreqr":37,underscore:38}],36:[function(t,e,i){arguments[4][21][0].apply(i,arguments)},{backbone:39,dup:21,underscore:38}],37:[function(t,e,i){arguments[4][22][0].apply(i,arguments)},{backbone:39,dup:22,underscore:38}],38:[function(t,e,i){arguments[4][23][0].apply(i,arguments)},{dup:23}],39:[function(t,e,i){arguments[4][26][0].apply(i,arguments)},{dup:26,underscore:40}],40:[function(t,e,i){(function(){var t=this;var n=t._;var r=Array.prototype,o=Object.prototype,s=Function.prototype;var a=r.push,u=r.slice,l=o.toString,h=o.hasOwnProperty;var c=Array.isArray,f=Object.keys,d=s.bind,p=Object.create;var g=function(){};var m=function(t){if(t instanceof m)return t;if(!(this instanceof m))return new m(t);this._wrapped=t};if(typeof i!=="undefined"){if(typeof e!=="undefined"&&e.exports){i=e.exports=m}i._=m}else{t._=m}m.VERSION="1.8.2";var v=function(t,e,i){if(e===void 0)return t;switch(i==null?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}};var _=function(t,e,i){if(t==null)return m.identity;if(m.isFunction(t))return v(t,e,i);if(m.isObject(t))return m.matcher(t);return m.property(t)};m.iteratee=function(t,e){return _(t,e,Infinity)};var y=function(t,e){return function(i){var n=arguments.length;if(n<2||i==null)return i;for(var r=1;r<n;r++){var o=arguments[r],s=t(o),a=s.length;for(var u=0;u<a;u++){var l=s[u];if(!e||i[l]===void 0)i[l]=o[l]}}return i}};var b=function(t){if(!m.isObject(t))return{};if(p)return p(t);g.prototype=t;var e=new g;g.prototype=null;return e};var w=Math.pow(2,53)-1;var x=function(t){var e=t&&t.length;return typeof e=="number"&&e>=0&&e<=w};m.each=m.forEach=function(t,e,i){e=v(e,i);var n,r;if(x(t)){for(n=0,r=t.length;n<r;n++){e(t[n],n,t)}}else{var o=m.keys(t);for(n=0,r=o.length;n<r;n++){e(t[o[n]],o[n],t)}}return t};m.map=m.collect=function(t,e,i){e=_(e,i);var n=!x(t)&&m.keys(t),r=(n||t).length,o=Array(r);for(var s=0;s<r;s++){var a=n?n[s]:s;o[s]=e(t[a],a,t)}return o};function C(t){function e(e,i,n,r,o,s){for(;o>=0&&o<s;o+=t){var a=r?r[o]:o;n=i(n,e[a],a,e)}return n}return function(i,n,r,o){n=v(n,o,4);var s=!x(i)&&m.keys(i),a=(s||i).length,u=t>0?0:a-1;if(arguments.length<3){r=i[s?s[u]:u];u+=t}return e(i,n,r,s,u,a)}}m.reduce=m.foldl=m.inject=C(1);m.reduceRight=m.foldr=C(-1);m.find=m.detect=function(t,e,i){var n;if(x(t)){n=m.findIndex(t,e,i)}else{n=m.findKey(t,e,i)}if(n!==void 0&&n!==-1)return t[n]};m.filter=m.select=function(t,e,i){var n=[];e=_(e,i);m.each(t,function(t,i,r){if(e(t,i,r))n.push(t)});return n};m.reject=function(t,e,i){return m.filter(t,m.negate(_(e)),i)};m.every=m.all=function(t,e,i){e=_(e,i);var n=!x(t)&&m.keys(t),r=(n||t).length;for(var o=0;o<r;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return false}return true};m.some=m.any=function(t,e,i){e=_(e,i);var n=!x(t)&&m.keys(t),r=(n||t).length;for(var o=0;o<r;o++){var s=n?n[o]:o;if(e(t[s],s,t))return true}return false};m.contains=m.includes=m.include=function(t,e,i){if(!x(t))t=m.values(t);return m.indexOf(t,e,typeof i=="number"&&i)>=0};m.invoke=function(t,e){var i=u.call(arguments,2);var n=m.isFunction(e);return m.map(t,function(t){var r=n?e:t[e];return r==null?r:r.apply(t,i)})};m.pluck=function(t,e){return m.map(t,m.property(e))};m.where=function(t,e){return m.filter(t,m.matcher(e))};m.findWhere=function(t,e){return m.find(t,m.matcher(e))};m.max=function(t,e,i){var n=-Infinity,r=-Infinity,o,s;if(e==null&&t!=null){t=x(t)?t:m.values(t);for(var a=0,u=t.length;a<u;a++){o=t[a];if(o>n){n=o}}}else{e=_(e,i);m.each(t,function(t,i,o){s=e(t,i,o);if(s>r||s===-Infinity&&n===-Infinity){n=t;r=s}})}return n};m.min=function(t,e,i){var n=Infinity,r=Infinity,o,s;if(e==null&&t!=null){t=x(t)?t:m.values(t);for(var a=0,u=t.length;a<u;a++){o=t[a];if(o<n){n=o}}}else{e=_(e,i);m.each(t,function(t,i,o){s=e(t,i,o);if(s<r||s===Infinity&&n===Infinity){n=t;r=s}})}return n};m.shuffle=function(t){var e=x(t)?t:m.values(t);var i=e.length;var n=Array(i);for(var r=0,o;r<i;r++){o=m.random(0,r);if(o!==r)n[r]=n[o];n[o]=e[r]}return n};m.sample=function(t,e,i){if(e==null||i){if(!x(t))t=m.values(t);return t[m.random(t.length-1)]}return m.shuffle(t).slice(0,Math.max(0,e))};m.sortBy=function(t,e,i){e=_(e,i);return m.pluck(m.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria;var n=e.criteria;if(i!==n){if(i>n||i===void 0)return 1;if(i<n||n===void 0)return-1}return t.index-e.index}),"value")};var L=function(t){return function(e,i,n){var r={};i=_(i,n);m.each(e,function(n,o){var s=i(n,o,e);t(r,n,s)});return r}};m.groupBy=L(function(t,e,i){if(m.has(t,i))t[i].push(e);else t[i]=[e]});m.indexBy=L(function(t,e,i){t[i]=e});m.countBy=L(function(t,e,i){if(m.has(t,i))t[i]++;else t[i]=1});m.toArray=function(t){if(!t)return[];if(m.isArray(t))return u.call(t);if(x(t))return m.map(t,m.identity);return m.values(t)};m.size=function(t){if(t==null)return 0;return x(t)?t.length:m.keys(t).length};m.partition=function(t,e,i){e=_(e,i);var n=[],r=[];m.each(t,function(t,i,o){(e(t,i,o)?n:r).push(t)});return[n,r]};m.first=m.head=m.take=function(t,e,i){if(t==null)return void 0;if(e==null||i)return t[0];return m.initial(t,t.length-e)};m.initial=function(t,e,i){return u.call(t,0,Math.max(0,t.length-(e==null||i?1:e)))};m.last=function(t,e,i){if(t==null)return void 0;if(e==null||i)return t[t.length-1];return m.rest(t,Math.max(0,t.length-e))};m.rest=m.tail=m.drop=function(t,e,i){return u.call(t,e==null||i?1:e)};m.compact=function(t){return m.filter(t,m.identity)};var E=function(t,e,i,n){var r=[],o=0;for(var s=n||0,a=t&&t.length;s<a;s++){var u=t[s];if(x(u)&&(m.isArray(u)||m.isArguments(u))){if(!e)u=E(u,e,i);var l=0,h=u.length;r.length+=h;while(l<h){r[o++]=u[l++]}}else if(!i){r[o++]=u}}return r};m.flatten=function(t,e){return E(t,e,false)};m.without=function(t){return m.difference(t,u.call(arguments,1))};m.uniq=m.unique=function(t,e,i,n){if(t==null)return[];if(!m.isBoolean(e)){n=i;i=e;e=false}if(i!=null)i=_(i,n);var r=[];var o=[];for(var s=0,a=t.length;s<a;s++){var u=t[s],l=i?i(u,s,t):u;if(e){if(!s||o!==l)r.push(u);o=l}else if(i){if(!m.contains(o,l)){o.push(l);r.push(u)}}else if(!m.contains(r,u)){r.push(u)}}return r};m.union=function(){return m.uniq(E(arguments,true,true))};m.intersection=function(t){if(t==null)return[];var e=[];var i=arguments.length;for(var n=0,r=t.length;n<r;n++){var o=t[n];if(m.contains(e,o))continue;for(var s=1;s<i;s++){if(!m.contains(arguments[s],o))break}if(s===i)e.push(o)}return e};m.difference=function(t){var e=E(arguments,true,true,1);return m.filter(t,function(t){return!m.contains(e,t)})};m.zip=function(){return m.unzip(arguments)};m.unzip=function(t){var e=t&&m.max(t,"length").length||0;var i=Array(e);for(var n=0;n<e;n++){i[n]=m.pluck(t,n)}return i};m.object=function(t,e){var i={};for(var n=0,r=t&&t.length;n<r;n++){if(e){i[t[n]]=e[n]}else{i[t[n][0]]=t[n][1]}}return i};m.indexOf=function(t,e,i){var n=0,r=t&&t.length;if(typeof i=="number"){n=i<0?Math.max(0,r+i):i}else if(i&&r){n=m.sortedIndex(t,e);return t[n]===e?n:-1}if(e!==e){return m.findIndex(u.call(t,n),m.isNaN)}for(;n<r;n++)if(t[n]===e)return n;return-1};m.lastIndexOf=function(t,e,i){var n=t?t.length:0;if(typeof i=="number"){n=i<0?n+i+1:Math.min(n,i+1)}if(e!==e){return m.findLastIndex(u.call(t,0,n),m.isNaN)}while(--n>=0)if(t[n]===e)return n;return-1};function M(t){return function(e,i,n){i=_(i,n);var r=e!=null&&e.length;var o=t>0?0:r-1;for(;o>=0&&o<r;o+=t){if(i(e[o],o,e))return o}return-1}}m.findIndex=M(1);m.findLastIndex=M(-1);m.sortedIndex=function(t,e,i,n){i=_(i,n,1);var r=i(e);var o=0,s=t.length;while(o<s){var a=Math.floor((o+s)/2);if(i(t[a])<r)o=a+1;else s=a}return o};m.range=function(t,e,i){if(arguments.length<=1){e=t||0;t=0}i=i||1;var n=Math.max(Math.ceil((e-t)/i),0);var r=Array(n);for(var o=0;o<n;o++,t+=i){r[o]=t}return r};var P=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var o=b(t.prototype);var s=t.apply(o,r);if(m.isObject(s))return s;return o};m.bind=function(t,e){if(d&&t.bind===d)return d.apply(t,u.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var i=u.call(arguments,2);var n=function(){return P(t,n,e,this,i.concat(u.call(arguments)))};return n};m.partial=function(t){var e=u.call(arguments,1);var i=function(){var n=0,r=e.length;var o=Array(r);for(var s=0;s<r;s++){o[s]=e[s]===m?arguments[n++]:e[s]}while(n<arguments.length)o.push(arguments[n++]);return P(t,i,this,this,o)};return i};m.bindAll=function(t){var e,i=arguments.length,n;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++){n=arguments[e];t[n]=m.bind(t[n],t)}return t};m.memoize=function(t,e){var i=function(n){var r=i.cache;var o=""+(e?e.apply(this,arguments):n);if(!m.has(r,o))r[o]=t.apply(this,arguments);return r[o]};i.cache={};return i};m.delay=function(t,e){var i=u.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)};m.defer=m.partial(m.delay,m,1);m.throttle=function(t,e,i){var n,r,o;var s=null;var a=0;if(!i)i={};var u=function(){a=i.leading===false?0:m.now();s=null;o=t.apply(n,r);if(!s)n=r=null};return function(){var l=m.now();if(!a&&i.leading===false)a=l;var h=e-(l-a);n=this;r=arguments;if(h<=0||h>e){if(s){clearTimeout(s);s=null}a=l;o=t.apply(n,r);if(!s)n=r=null}else if(!s&&i.trailing!==false){s=setTimeout(u,h)}return o}};m.debounce=function(t,e,i){var n,r,o,s,a;var u=function(){var l=m.now()-s;if(l<e&&l>=0){n=setTimeout(u,e-l)}else{n=null;if(!i){a=t.apply(o,r);if(!n)o=r=null}}};return function(){o=this;r=arguments;s=m.now();var l=i&&!n;if(!n)n=setTimeout(u,e);if(l){a=t.apply(o,r);o=r=null}return a}};m.wrap=function(t,e){return m.partial(e,t)};m.negate=function(t){return function(){return!t.apply(this,arguments)}};m.compose=function(){var t=arguments;var e=t.length-1;return function(){var i=e;var n=t[e].apply(this,arguments);while(i--)n=t[i].call(this,n);return n}};m.after=function(t,e){return function(){if(--t<1){return e.apply(this,arguments)}}};m.before=function(t,e){var i;return function(){if(--t>0){i=e.apply(this,arguments)}if(t<=1)e=null;return i}};m.once=m.partial(m.before,2);var T=!{toString:null}.propertyIsEnumerable("toString");var k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function S(t,e){var i=k.length;var n=t.constructor;var r=m.isFunction(n)&&n.prototype||o;var s="constructor";if(m.has(t,s)&&!m.contains(e,s))e.push(s);while(i--){s=k[i];if(s in t&&t[s]!==r[s]&&!m.contains(e,s)){e.push(s)}}}m.keys=function(t){if(!m.isObject(t))return[];if(f)return f(t);var e=[];for(var i in t)if(m.has(t,i))e.push(i);if(T)S(t,e);return e};m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var i in t)e.push(i);if(T)S(t,e);return e};m.values=function(t){var e=m.keys(t);var i=e.length;var n=Array(i);for(var r=0;r<i;r++){n[r]=t[e[r]]}return n};m.mapObject=function(t,e,i){e=_(e,i);var n=m.keys(t),r=n.length,o={},s;for(var a=0;a<r;a++){s=n[a];o[s]=e(t[s],s,t)}return o};m.pairs=function(t){var e=m.keys(t);var i=e.length;var n=Array(i);for(var r=0;r<i;r++){n[r]=[e[r],t[e[r]]]}return n};m.invert=function(t){var e={};var i=m.keys(t);for(var n=0,r=i.length;n<r;n++){e[t[i[n]]]=i[n]}return e};m.functions=m.methods=function(t){var e=[];for(var i in t){if(m.isFunction(t[i]))e.push(i)}return e.sort()};m.extend=y(m.allKeys);m.extendOwn=m.assign=y(m.keys);m.findKey=function(t,e,i){e=_(e,i);var n=m.keys(t),r;for(var o=0,s=n.length;o<s;o++){r=n[o];if(e(t[r],r,t))return r}};m.pick=function(t,e,i){var n={},r=t,o,s;if(r==null)return n;if(m.isFunction(e)){s=m.allKeys(r);o=v(e,i)}else{s=E(arguments,false,false,1);o=function(t,e,i){return e in i};r=Object(r)}for(var a=0,u=s.length;a<u;a++){var l=s[a];var h=r[l];if(o(h,l,r))n[l]=h}return n};m.omit=function(t,e,i){if(m.isFunction(e)){e=m.negate(e)}else{var n=m.map(E(arguments,false,false,1),String);e=function(t,e){return!m.contains(n,e)}}return m.pick(t,e,i)};m.defaults=y(m.allKeys,true);m.clone=function(t){if(!m.isObject(t))return t;return m.isArray(t)?t.slice():m.extend({},t)};m.tap=function(t,e){e(t);return t};m.isMatch=function(t,e){var i=m.keys(e),n=i.length;if(t==null)return!n;var r=Object(t);for(var o=0;o<n;o++){var s=i[o];if(e[s]!==r[s]||!(s in r))return false}return true};var O=function(t,e,i,n){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return t===e;if(t instanceof m)t=t._wrapped;if(e instanceof m)e=e._wrapped;var r=l.call(t);if(r!==l.call(e))return false;switch(r){case"[object RegExp]":case"[object String]":return""+t===""+e;case"[object Number]":if(+t!==+t)return+e!==+e;return+t===0?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o=r==="[object Array]";if(!o){if(typeof t!="object"||typeof e!="object")return false;var s=t.constructor,a=e.constructor;if(s!==a&&!(m.isFunction(s)&&s instanceof s&&m.isFunction(a)&&a instanceof a)&&("constructor"in t&&"constructor"in e)){return false}}i=i||[];n=n||[];var u=i.length;while(u--){if(i[u]===t)return n[u]===e}i.push(t);n.push(e);if(o){u=t.length;if(u!==e.length)return false;while(u--){if(!O(t[u],e[u],i,n))return false}}else{var h=m.keys(t),c;u=h.length;if(m.keys(e).length!==u)return false;while(u--){c=h[u];if(!(m.has(e,c)&&O(t[c],e[c],i,n)))return false}}i.pop();n.pop();return true};m.isEqual=function(t,e){return O(t,e)};m.isEmpty=function(t){if(t==null)return true;if(x(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t)))return t.length===0;return m.keys(t).length===0};m.isElement=function(t){return!!(t&&t.nodeType===1)};m.isArray=c||function(t){return l.call(t)==="[object Array]"};m.isObject=function(t){var e=typeof t;return e==="function"||e==="object"&&!!t};m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){m["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}});if(!m.isArguments(arguments)){m.isArguments=function(t){return m.has(t,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){m.isFunction=function(t){return typeof t=="function"||false}}m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))};m.isNaN=function(t){return m.isNumber(t)&&t!==+t};m.isBoolean=function(t){return t===true||t===false||l.call(t)==="[object Boolean]"};m.isNull=function(t){return t===null};m.isUndefined=function(t){return t===void 0};m.has=function(t,e){return t!=null&&h.call(t,e)};m.noConflict=function(){t._=n;return this};m.identity=function(t){return t};m.constant=function(t){return function(){return t}};m.noop=function(){};m.property=function(t){return function(e){return e==null?void 0:e[t]}};m.propertyOf=function(t){return t==null?function(){}:function(e){return t[e]}};m.matcher=m.matches=function(t){t=m.extendOwn({},t);return function(e){return m.isMatch(e,t)}};m.times=function(t,e,i){var n=Array(Math.max(0,t));e=v(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n};m.random=function(t,e){if(e==null){e=t;t=0}return t+Math.floor(Math.random()*(e-t+1))};m.now=Date.now||function(){return(new Date).getTime()};var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var D=m.invert(A);var I=function(t){var e=function(e){return t[e]};var i="(?:"+m.keys(t).join("|")+")";var n=RegExp(i);var r=RegExp(i,"g");return function(t){t=t==null?"":""+t;return n.test(t)?t.replace(r,e):t}};m.escape=I(A);m.unescape=I(D);m.result=function(t,e,i){var n=t==null?void 0:t[e];if(n===void 0){n=i}return m.isFunction(n)?n.call(t):n};var R=0;m.uniqueId=function(t){var e=++R+"";return t?t+e:e};m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/;var N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var z=/\\|'|\r|\n|\u2028|\u2029/g;var V=function(t){return"\\"+N[t]};m.template=function(t,e,i){if(!e&&i)e=i;e=m.defaults({},e,m.templateSettings);var n=RegExp([(e.escape||B).source,(e.interpolate||B).source,(e.evaluate||B).source].join("|")+"|$","g");var r=0;var o="__p+='";t.replace(n,function(e,i,n,s,a){o+=t.slice(r,a).replace(z,V);r=a+e.length;if(i){o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"}else if(n){o+="'+\n((__t=("+n+"))==null?'':__t)+\n'"}else if(s){o+="';\n"+s+"\n__p+='"}return e});o+="';\n";if(!e.variable)o="with(obj||{}){\n"+o+"}\n";o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){a.source=o;throw a}var u=function(t){return s.call(this,t,m)};var l=e.variable||"obj";u.source="function("+l+"){\n"+o+"}";return u};m.chain=function(t){var e=m(t);e._chain=true;return e};var j=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),function(e){var i=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];a.apply(t,arguments);return j(this,i.apply(m,t))}})};m.mixin(m);m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];m.prototype[t]=function(){var i=this._wrapped;e.apply(i,arguments);if((t==="shift"||t==="splice")&&i.length===0)delete i[0];return j(this,i)}});m.each(["concat","join","slice"],function(t){var e=r[t];m.prototype[t]=function(){return j(this,e.apply(this._wrapped,arguments))}});m.prototype.value=function(){return this._wrapped};m.prototype.valueOf=m.prototype.toJSON=m.prototype.value;m.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return m})}}).call(this)},{}],41:[function(t,e,i){var n=t("geojson-coords"),r=t("traverse"),o=t("extent");e.exports=function(t){return s(t).bbox()};e.exports.polygon=function(t){return s(t).polygon()};e.exports.bboxify=function(t){return r(t).map(function(t){if(t&&typeof t.type==="string"){t.bbox=s(t).bbox();this.update(t)}})};function s(t){var e=[Infinity,Infinity,-Infinity,-Infinity],i=o(),r=n(t);for(var s=0;s<r.length;s++)i.include(r[s]);return i}},{extent:42,"geojson-coords":44,traverse:47}],42:[function(t,e,i){e.exports=n;function n(){if(!(this instanceof n)){return new n}this._bbox=[Infinity,Infinity,-Infinity,-Infinity];this._valid=false}n.prototype.include=function(t){this._valid=true;this._bbox[0]=Math.min(this._bbox[0],t[0]);this._bbox[1]=Math.min(this._bbox[1],t[1]);this._bbox[2]=Math.max(this._bbox[2],t[0]);this._bbox[3]=Math.max(this._bbox[3],t[1]);return this};n.prototype.union=function(t){this._valid=true;this._bbox[0]=Math.min(this._bbox[0],t[0]);this._bbox[1]=Math.min(this._bbox[1],t[1]);this._bbox[2]=Math.max(this._bbox[2],t[2]);this._bbox[3]=Math.max(this._bbox[3],t[3]);return this};n.prototype.bbox=function(){if(!this._valid)return null;return this._bbox};n.prototype.contains=function(t){if(!this._valid)return null;return this._bbox[0]<=t[0]&&this._bbox[1]<=t[1]&&this._bbox[2]>=t[0]&&this._bbox[3]>=t[1]};n.prototype.polygon=function(){if(!this._valid)return null;return{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}}},{}],43:[function(t,e,i){e.exports=function n(t,e){return i(t);function i(t){if(Array.isArray(t)&&t.length&&typeof t[0]==="number"){return[t]}return t.reduce(function(t,e){if(Array.isArray(e)&&Array.isArray(e[0])){return t.concat(i(e))}else{t.push(e);return t}},[])}}},{}],44:[function(t,e,i){var n=t("geojson-normalize"),r=t("geojson-flatten"),o=t("./flatten");e.exports=function(t){if(!t)return[];var e=r(n(t)),i=[];e.features.forEach(function(t){if(!t.geometry)return;i=i.concat(o(t.geometry.coordinates))});return i}},{"./flatten":43,"geojson-flatten":45,"geojson-normalize":46}],45:[function(t,e,i){e.exports=n;function n(t,e){switch(t&&t.type||null){case"FeatureCollection":t.features=t.features.reduce(function(t,e){return t.concat(n(e))},[]);return t;case"Feature":return n(t.geometry).map(function(e){return{type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e}});case"MultiPoint":return t.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return t.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return t.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return t.geometries;case"Point":case"Polygon":case"LineString":return[t];default:return t}}},{}],46:[function(t,e,i){e.exports=r;var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function r(t){if(!t||!t.type)return null;var e=n[t.type];if(!e)return null;if(e==="geometry"){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}}else if(e==="feature"){return{type:"FeatureCollection",features:[t]}}else if(e==="featurecollection"){return t}}},{}],47:[function(t,e,i){var n=e.exports=function(t){return new r(t)};function r(t){this.value=t}r.prototype.get=function(t){var e=this.value;for(var i=0;i<t.length;i++){var n=t[i];if(!e||!v.call(e,n)){e=undefined;break}e=e[n]}return e};r.prototype.has=function(t){var e=this.value;for(var i=0;i<t.length;i++){var n=t[i];if(!e||!v.call(e,n)){return false}e=e[n]}return true};r.prototype.set=function(t,e){var i=this.value;for(var n=0;n<t.length-1;n++){var r=t[n];if(!v.call(i,r))i[r]={};i=i[r]}i[t[n]]=e;return e};r.prototype.map=function(t){return o(this.value,t,true)};r.prototype.forEach=function(t){this.value=o(this.value,t,false);return this.value};r.prototype.reduce=function(t,e){var i=arguments.length===1;var n=i?this.value:e;this.forEach(function(e){if(!this.isRoot||!i){n=t.call(this,n,e)}});return n};r.prototype.paths=function(){var t=[];this.forEach(function(e){t.push(this.path)});return t};r.prototype.nodes=function(){var t=[];this.forEach(function(e){t.push(this.node)});return t};r.prototype.clone=function(){var t=[],e=[];return function i(n){for(var r=0;r<t.length;r++){if(t[r]===n){return e[r]}}if(typeof n==="object"&&n!==null){var o=s(n);t.push(n);e.push(o);m(a(n),function(t){o[t]=i(n[t])});t.pop();e.pop();return o}else{return n}}(this.value)};function o(t,e,i){var n=[];var r=[];var o=true;return function u(t){var l=i?s(t):t;var h={};var c=true;var f={node:l,node_:t,path:[].concat(n),parent:r[r.length-1],parents:r,key:n.slice(-1)[0],isRoot:n.length===0,level:n.length,circular:null,update:function(t,e){if(!f.isRoot){f.parent.node[f.key]=t}f.node=t;if(e)c=false},"delete":function(t){delete f.parent.node[f.key];if(t)c=false},remove:function(t){if(g(f.parent.node)){f.parent.node.splice(f.key,1)
}else{delete f.parent.node[f.key]}if(t)c=false},keys:null,before:function(t){h.before=t},after:function(t){h.after=t},pre:function(t){h.pre=t},post:function(t){h.post=t},stop:function(){o=false},block:function(){c=false}};if(!o)return f;function d(){if(typeof f.node==="object"&&f.node!==null){if(!f.keys||f.node_!==f.node){f.keys=a(f.node)}f.isLeaf=f.keys.length==0;for(var e=0;e<r.length;e++){if(r[e].node_===t){f.circular=r[e];break}}}else{f.isLeaf=true;f.keys=null}f.notLeaf=!f.isLeaf;f.notRoot=!f.isRoot}d();var p=e.call(f,f.node);if(p!==undefined&&f.update)f.update(p);if(h.before)h.before.call(f,f.node);if(!c)return f;if(typeof f.node=="object"&&f.node!==null&&!f.circular){r.push(f);d();m(f.keys,function(t,e){n.push(t);if(h.pre)h.pre.call(f,f.node[t],t);var r=u(f.node[t]);if(i&&v.call(f.node,t)){f.node[t]=r.node}r.isLast=e==f.keys.length-1;r.isFirst=e==0;if(h.post)h.post.call(f,r);n.pop()});r.pop()}if(h.after)h.after.call(f,f.node);return f}(t).node}function s(t){if(typeof t==="object"&&t!==null){var e;if(g(t)){e=[]}else if(l(t)){e=new Date(t.getTime?t.getTime():t)}else if(h(t)){e=new RegExp(t)}else if(c(t)){e={message:t.message}}else if(f(t)){e=new Boolean(t)}else if(d(t)){e=new Number(t)}else if(p(t)){e=new String(t)}else if(Object.create&&Object.getPrototypeOf){e=Object.create(Object.getPrototypeOf(t))}else if(t.constructor===Object){e={}}else{var i=t.constructor&&t.constructor.prototype||t.__proto__||{};var n=function(){};n.prototype=i;e=new n}m(a(t),function(i){e[i]=t[i]});return e}else return t}var a=Object.keys||function _(t){var e=[];for(var i in t)e.push(i);return e};function u(t){return Object.prototype.toString.call(t)}function l(t){return u(t)==="[object Date]"}function h(t){return u(t)==="[object RegExp]"}function c(t){return u(t)==="[object Error]"}function f(t){return u(t)==="[object Boolean]"}function d(t){return u(t)==="[object Number]"}function p(t){return u(t)==="[object String]"}var g=Array.isArray||function y(t){return Object.prototype.toString.call(t)==="[object Array]"};var m=function(t,e){if(t.forEach)return t.forEach(e);else for(var i=0;i<t.length;i++){e(t[i],i,t)}};m(a(r.prototype),function(t){n[t]=function(e){var i=[].slice.call(arguments,1);var n=new r(e);return n[t].apply(n,i)}});var v=Object.hasOwnProperty||function(t,e){return e in t}},{}],48:[function(t,e,i){arguments[4][28][0].apply(i,arguments)},{dup:28}],49:[function(t,e,i){arguments[4][40][0].apply(i,arguments)},{dup:40}],50:[function(t,e,i){arguments[4][40][0].apply(i,arguments)},{dup:40}]},{},[1]);